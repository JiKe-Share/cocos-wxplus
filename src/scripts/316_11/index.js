window.__require=function e(t,o,n){function i(r,s){if(!o[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var a="function"==typeof __require&&__require;if(!s&&a)return a(l,!0);if(c)return c(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var d=o[r]={exports:{}};t[r][0].call(d.exports,function(e){return i(t[r][1][e]||e)},d,d.exports,e,t,o,n)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({"316_11_Ani":[function(e,t,o){"use strict";cc._RF.push(t,"b34d3sPIfNHbqI9wjOJoXaJ","316_11_Ani");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=e("316_StateNodeSys"),r=cc._decorator,s=r.ccclass,l=r.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateNodeSys=null,t}return n(t,e),t.prototype.onLoad=function(){this.stateNodeSys.on(c.default.EventType.ENTER_STATE,this._onEnterState,this)},t.prototype._onEnterState=function(e){for(var t=this,o=0,n=this.stateNodeSys.getAttrById(e);o<n.length;o++){var i=n[o],c=i.state,r=i.node.getComponent(cc.Sprite);switch(c){case 0:i.node.children.forEach(function(e){e.active=!1}),r||(i.node.children[0].active=!0),9!==e&&10!==e||this.breaction(i.node);break;case 1:if(r)i.node.children.forEach(function(o){if(o.active=!0,1===e||7===e){var n=o.getComponent(cc.Sprite);n.fillRange=0,cc.tween(n).to(.5,{fillRange:1}).start()}else cc.tween(o).to(1,{scaleX:1.2,scaleY:.8333333333333334},{easing:t._jellyCurve}).start()});else{i.node.children.forEach(function(e){e.active=!1});var s=i.node.children[i.node.childrenCount-1];s.active=!0,cc.tween(s).to(1,{scaleX:1.2,scaleY:.8333333333333334},{easing:this._jellyCurve}).start()}}}},t.prototype._jellyCurve=function(e){return Math.abs(Math.sin(1.2*Math.PI*e)*Math.sin(2*Math.PI*e))},t.prototype.breaction=function(e){cc.tween(e).to(.5,{scaleY:1.01}).to(.5,{scaleY:1}).union().repeatForever().start()},i([l(c.default)],t.prototype,"stateNodeSys",void 0),i([s],t)}(cc.Component);o.default=a,cc._RF.pop()},{"316_StateNodeSys":void 0}],"316_11_LevelCtrl":[function(e,t,o){"use strict";cc._RF.push(t,"83f2fueoxRJZrzzqc+jUrde","316_11_LevelCtrl");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=e("LevelCtrl_CommonResult"),r=e("AssetManager"),s=e("AudioManager"),l=e("316_AudioConfig"),a=e("316_TextConfig"),d=e("316_DialogSys"),u=e("316_FloatCount"),h=e("316_StateNodeSys"),_=e("316_AudioFunc"),y=cc._decorator,f=y.ccclass,p=y.property,v=a.default[11],g=l.default[11],T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogSys=null,t.stateNodeSys=null,t.scrollView=null,t.moneyPile=null,t.money=null,t.count=null,t.guideNode=null,t._curSentence=-1,t._unTriggerItems=[4,6,5,10,9,2,3,8,7,1],t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.dialogSys.hideAllDialogImmed(),this.money.active=!1,this.guideNode.active=!1,this.count.init(10,0),r.default.loadSoundEffect_fileDir("AudioClip/lv_316/11",function(){s.default.playEffect(g.start),e.dialogSys.showDialog(v.start).then(function(){e.guideNode.active=!0,e.moneyPile.on(cc.Node.EventType.TOUCH_START,e._onClickMoneyPile,e),e.count.on(u.default.EventType.FLOAT_SHOW,e._onFloatShow,e)})})},t.prototype._onClickMoneyPile=function(e){0!==this._unTriggerItems.length&&(this.scrollView.enabled=!1,this.money.setPosition(this.scrollView.node.convertToNodeSpaceAR(e.getLocation())),this.money.active=!0,this.moneyPile.children[this.moneyPile.childrenCount-1].active=!1,this.scrollView.node.on(cc.Node.EventType.TOUCH_MOVE,this._onMoneyTouchMove,this),this.scrollView.node.on(cc.Node.EventType.TOUCH_END,this._onMoneyTouchEnd,this),this.scrollView.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onMoneyTouchEnd,this))},t.prototype._onMoneyTouchMove=function(e){this.money.setPosition(this.money.getPosition().add(e.getDelta().mul(.6666666666666666)))},t.prototype._onMoneyTouchEnd=function(){this.scrollView.node.off(cc.Node.EventType.TOUCH_MOVE,this._onMoneyTouchMove,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_END,this._onMoneyTouchEnd,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onMoneyTouchEnd,this),this.scrollView.enabled=!0,this.moneyPile.children.forEach(function(e){e.active=!0});var e=!1;if(this.money.active&&(this.money.active=!1,!this.moneyPile.getBoundingBoxToWorld().contains(this.money.convertToWorldSpaceAR(cc.Vec2.ZERO))))for(var t=0,o=this._unTriggerItems;t<o.length;t++){for(var n=o[t],i=0,c=this.stateNodeSys.getAttrById(n);i<c.length;i++){var r=c[i];if(0===r.state){var s=r.node;if(s.getBoundingBox().contains(s.parent.convertToNodeSpaceAR(this.money.convertToWorldSpaceAR(cc.Vec2.ZERO)))){this._triggerItem(n),e=!0,this.guideNode.active&&(this.guideNode.active=!1);break}}}if(e)break}},t.prototype._triggerItem=function(e){var t=this;this.stateNodeSys.setAttrById(e,{state:1}),this._unTriggerItems.splice(this._unTriggerItems.indexOf(e),1);var o=0===this._unTriggerItems.length;this.moneyPile.children[this.moneyPile.childrenCount-1].destroy(),_.playCommonEffect_316(l.default.money),this.count.showFloat(1),-1!==this._curSentence&&cc.audioEngine.stop(this._curSentence),s.default.playEffect(g["item_"+e]).then(function(e){return t._curSentence=e}),this.dialogSys.showDialog(v["item_"+e],10===e?1:0).then(function(){o&&t.GameSucc()})},t.prototype._onFloatShow=function(e,t){e.getComponent(cc.Label).string="+"+t},t.prototype.GameSucc=function(){this.moneyPile.off(cc.Node.EventType.TOUCH_START,this._onClickMoneyPile,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_MOVE,this._onMoneyTouchMove,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_END,this._onMoneyTouchEnd,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onMoneyTouchEnd,this),this.node.getComponent(c.default).onGameSucc()},i([p(d.default)],t.prototype,"dialogSys",void 0),i([p(h.default)],t.prototype,"stateNodeSys",void 0),i([p(cc.ScrollView)],t.prototype,"scrollView",void 0),i([p(cc.Node)],t.prototype,"moneyPile",void 0),i([p(cc.Node)],t.prototype,"money",void 0),i([p(u.default)],t.prototype,"count",void 0),i([p(cc.Node)],t.prototype,"guideNode",void 0),i([f],t)}(cc.Component);o.default=T,cc._RF.pop()},{"316_AudioConfig":void 0,"316_AudioFunc":void 0,"316_DialogSys":void 0,"316_FloatCount":void 0,"316_StateNodeSys":void 0,"316_TextConfig":void 0,AssetManager:void 0,AudioManager:void 0,LevelCtrl_CommonResult:void 0}]},{},["316_11_Ani","316_11_LevelCtrl"]);
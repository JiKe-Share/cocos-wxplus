window.__require=function e(o,t,n){function i(r,d){if(!t[r]){if(!o[r]){var s=r.split("/");if(s=s[s.length-1],!o[s]){var l="function"==typeof __require&&__require;if(!d&&l)return l(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var a=t[r]={exports:{}};o[r][0].call(a.exports,function(e){return i(o[r][1][e]||e)},a,a.exports,e,o,t,n)}return t[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({"316_9_Ani":[function(e,o,t){"use strict";cc._RF.push(o,"420e8vK4gVHK50U3NDSnEeG","316_9_Ani");var n=__extends,i=__decorate;Object.defineProperty(t,"__esModule",{value:!0});var c=e("316_StateNodeSys"),r=cc._decorator,d=r.ccclass,s=r.property,l=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.stateNodeSys=null,o}return n(o,e),o.prototype.onLoad=function(){this.stateNodeSys.on(c.default.EventType.ENTER_STATE,this._onEnterState,this)},o.prototype.start=function(){},o.prototype._onEnterState=function(e){for(var o=0,t=this.stateNodeSys.getAttrById(e);o<t.length;o++){var n=t[o],i=n.state,c=n.node.getComponent(cc.Sprite);switch(i){case 0:n.node.children.forEach(function(e){e.active=!1}),c||(n.node.children[0].active=!0);break;case 1:c?n.node.children.forEach(function(e){e.active=!0}):(n.node.children.forEach(function(e){e.active=!1}),n.node.children[n.node.childrenCount-1].active=!0)}}},i([s(c.default)],o.prototype,"stateNodeSys",void 0),i([d],o)}(cc.Component);t.default=l,cc._RF.pop()},{"316_StateNodeSys":void 0}],"316_9_LevelCtrl":[function(e,o,t){"use strict";cc._RF.push(o,"978a737FNlFiqIbGyfCEkUc","316_9_LevelCtrl");var n=__extends,i=__decorate;Object.defineProperty(t,"__esModule",{value:!0});var c=e("LevelCtrl_CommonResult"),r=e("AssetManager"),d=e("AudioManager"),s=e("316_AudioConfig"),l=e("316_TextConfig"),a=e("316_DialogSys"),u=e("316_StateNodeSys"),_=e("316_AudioFunc"),f=cc._decorator,h=f.ccclass,p=f.property,g=l.default[9],v=s.default[9],y=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.dialogSys=null,o.stateNodeSys=null,o.scrollView=null,o.ingotsNode=null,o.ingotNode=null,o._curSentence=-1,o._unTriggerItems=[1,2,3,4,5,6,7,8,9,10],o}return n(o,e),o.prototype.start=function(){var e=this;this.dialogSys.hideAllDialogImmed(),this.ingotNode.active=!1,r.default.loadSoundEffect_fileDir("AudioClip/lv_316/9",function(){d.default.playEffect(v.start).then(function(o){return e._curSentence=o}),e.dialogSys.showDialog(g.start).then(function(){e.ingotsNode.on(cc.Node.EventType.TOUCH_START,e._onClickIngotsNode,e),e.scrollView.node.on(cc.Node.EventType.TOUCH_MOVE,e._onScrollNodeTouchMove,e),e.scrollView.node.on(cc.Node.EventType.TOUCH_END,e._onScrollNodeTouchEnd,e),e.scrollView.node.on(cc.Node.EventType.TOUCH_CANCEL,e._onScrollNodeTouchEnd,e)})})},o.prototype._onClickIngotsNode=function(e){this.scrollView.enabled=!1,this.ingotNode.setPosition(this.scrollView.node.convertToNodeSpaceAR(e.getLocation())),this.ingotNode.active=!0},o.prototype._onScrollNodeTouchMove=function(e){this.ingotNode.setPosition(this.ingotNode.getPosition().add(e.getDelta().mul(.6666666666666666)))},o.prototype._onScrollNodeTouchEnd=function(){this.scrollView.enabled=!0;var e=!1;if(this.ingotNode.active&&(this.ingotNode.active=!1,!this.ingotsNode.getBoundingBoxToWorld().contains(this.ingotNode.convertToWorldSpaceAR(cc.Vec2.ZERO))))for(var o=0,t=this._unTriggerItems;o<t.length;o++){for(var n=t[o],i=0,c=this.stateNodeSys.getAttrById(n);i<c.length;i++){var r=c[i];if(0===r.state&&r.node.getBoundingBoxToWorld().contains(this.ingotNode.convertToWorldSpaceAR(cc.Vec2.ZERO))){this._triggerItem(n),e=!0;break}}if(e)break}},o.prototype._triggerItem=function(e){var o=this;this.stateNodeSys.setAttrById(e,{state:1}),this._unTriggerItems.splice(this._unTriggerItems.indexOf(e),1);var t=0===this._unTriggerItems.length;_.playCommonEffect_316(s.default.money),-1!==this._curSentence&&cc.audioEngine.stop(this._curSentence),d.default.playEffect(v["item_"+e]).then(function(e){return o._curSentence=e}),this.dialogSys.showDialog(g["item_"+e]).then(function(){t&&o.GameSucc()})},o.prototype.GameSucc=function(){this.ingotsNode.off(cc.Node.EventType.TOUCH_START,this._onClickIngotsNode,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_MOVE,this._onScrollNodeTouchMove,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_END,this._onScrollNodeTouchEnd,this),this.scrollView.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onScrollNodeTouchEnd,this),this.node.getComponent(c.default).onGameSucc()},i([p(a.default)],o.prototype,"dialogSys",void 0),i([p(u.default)],o.prototype,"stateNodeSys",void 0),i([p(cc.ScrollView)],o.prototype,"scrollView",void 0),i([p(cc.Node)],o.prototype,"ingotsNode",void 0),i([p(cc.Node)],o.prototype,"ingotNode",void 0),i([_.bgm_316(4),h],o)}(cc.Component);t.default=y,cc._RF.pop()},{"316_AudioConfig":void 0,"316_AudioFunc":void 0,"316_DialogSys":void 0,"316_StateNodeSys":void 0,"316_TextConfig":void 0,AssetManager:void 0,AudioManager:void 0,LevelCtrl_CommonResult:void 0}]},{},["316_9_Ani","316_9_LevelCtrl"]);
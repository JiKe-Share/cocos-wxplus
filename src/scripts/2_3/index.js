window.__require=function t(o,i,e){function s(c,h){if(!i[c]){if(!o[c]){var a=c.split("/");if(a=a[a.length-1],!o[a]){var l="function"==typeof __require&&__require;if(!h&&l)return l(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var r=i[c]={exports:{}};o[c][0].call(r.exports,function(t){return s(o[c][1][t]||t)},r,r.exports,t,o,i,e)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<e.length;c++)s(e[c]);return s}({Food_3_shrimp:[function(t,o,i){"use strict";cc._RF.push(o,"b80ca4UGptLoY8xSvkpt8NL","Food_3_shrimp");var e=__extends,s=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=t("MathTool"),c=t("Food_3"),h=cc._decorator,a=h.ccclass,l=h.property,r=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.id=0,o.food=null,o}return e(o,t),o.prototype.onLoad=function(){this.startpos=this.node.position,this.food=this.node.parent.parent.parent.parent.getComponent(c.default),this.mask=this.node.parent.parent.getChildByName("mask"),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.TouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.TouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchEnd,this)},o.prototype.TouchMove=function(t){var o=this.node.parent.parent.parent.parent.convertToNodeSpaceAR(t.getLocation());this.node.x=o.x,this.node.y=o.y},o.prototype.TouchEnd=function(t){var o=this,i=this.node.parent.parent.parent.parent.convertToNodeSpaceAR(t.getLocation());this.node.x=i.x,this.node.y=i.y;var e=cc.rect(this.mask.x,this.mask.y,this.mask.width,this.mask.height);if(n.default.rectPoint(i,e)){this.food.shrimppos[this.id]=this.node.position;var s=this.node.parent.parent.getChildByName("pos").getChildByName("xia");s.children[this.id].active=!0,s.children[this.id].position=this.node.position,this.scheduleOnce(function(){if(s.children[o.id]){s.children[o.id].getComponent(cc.Sprite).spriteFrame=o.food.shrimp_sprite;for(var t=0;t<s.childrenCount;t++)if(!s.children[t].active)return;o.food.SuccessFunc()}},1),this.node.opacity=0}else this.node.position=this.startpos},o.prototype.update=function(){},s([l],o.prototype,"id",void 0),s([a],o)}(cc.Component);i.default=r,cc._RF.pop()},{Food_3:"Food_3",MathTool:void 0}],Food_3:[function(t,o,i){"use strict";cc._RF.push(o,"3e9c0OODzZPorcxmLSQuoJv","Food_3");var e=__extends,s=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=t("MathTool"),c=t("Game"),h=t("AudioManager"),a=cc._decorator,l=a.ccclass,r=a.property,d=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.taskNode=null,o.shrimp_sprite=null,o.titlelist=[],o.dd=null,o.tool_sprite=null,o.plan=0,o.successnum=9,o.localnum=0,o.shrimppos=[cc.v3(0,0),cc.v3(0,0),cc.v3(0,0),cc.v3(0,0),cc.v3(0,0),cc.v3(0,0)],o.cleanpos=[],o.cleamposnum=0,o}return e(o,t),o.prototype.onLoad=function(){this.dd=this.node.getChildByName("dd"),this.UpNode()},o.prototype.UpNode=function(){for(var t=this,o=0;o<this.taskNode.childrenCount;o++)o==this.plan?this.taskNode.children[o].active=!0:this.taskNode.children[o].active=!1;if(this.plan>=5)for(var i=this.taskNode.children[this.plan].getChildByName("pos").getChildByName("xia"),e=0;e<i.childrenCount;e++)i.children[e].position=this.shrimppos[e];if(this.title=this.taskNode.children[this.plan].getChildByName("title"),this.title.getComponent(cc.Label).string=this.titlelist[this.plan],this.toolNode=this.taskNode.children[this.plan].getChildByName("tool"),this.tool=this.toolNode.getChildByName("tool"),this.mask=this.taskNode.children[this.plan].getChildByName("mask"),this.startpos=this.tool.position,cc.tween(this.toolNode).to(.5,{position:cc.v3(0,0)}).start(),this.tool.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.on(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.on(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this),this.successnum=this.mask.childrenCount,this.localnum=0,this.plan<=2){this.cleanpos=[],this.cleamposnum=0;var s=this.tool.children[0].width/4;for(this.tool_sprite=this.tool.children[1],o=0;o<720/s;o++)for(e=0;e<1280/s;e++){var n=cc.v2(s*o-360,640-s*e),c=this.mask.getComponent(cc.PolygonCollider).points;this.containsPoint(n.x,n.y,c)&&this.cleanpos.push(n)}}else this.tool_sprite=null;var h=30;if(15==this.plan){var a=this.toolNode.getChildByName("time").getChildByName("time"),l=30;h=.1;var r=cc.tween().delay(h).call(function(){l-=1,t.node&&(a.getComponent(cc.Label).string=l>=10?"00:"+l:"00:0"+l,l<=0&&(t.localnum=1,t.successnum=1,t.SuccessFunc()))});cc.tween(this.node).then(r).repeat(30).start()}16==this.plan&&(this.localnum=1,this.successnum=1,this.SuccessFunc())},o.prototype.TouchStart=function(){this.toolNode.getChildByName("tool_icon")&&(this.toolNode.getChildByName("tool_icon").active=!1)},o.prototype.TouchSMove=function(t){var o=this.node.convertToNodeSpaceAR(t.getLocation());if(this.tool.x=o.x,this.tool.y=o.y,this.tool_sprite&&(this.tool_sprite.active=!0),this.localnum!=this.successnum){var i=this.mask.children[0],e=cc.rect(i.x,i.y,i.width,i.height),s=cc.v2(o.x+this.tool.children[0].x,o.y+this.tool.children[0].y);n.default.rectPoint(s,e)&&(this.plan<=2?this.Task1Func():3==this.plan?this.Task2Func():this.plan<=8?this.Task3Func():this.plan<15&&this.Task2Func())}},o.prototype.BtnOffClick=function(){this.tool.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.off(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.off(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)},o.prototype.TouchSEnd=function(){this.tool.position=this.startpos,this.tool_sprite&&(this.tool_sprite.active=!1),this.SuccessFunc()},o.prototype.SuccessFunc=function(){var t=this;if(this.plan<=2&&this.cleamposnum>this.cleanpos.length/10*9&&(this.localnum=this.successnum),this.successnum==this.localnum)if(this.BtnOffClick(),this.plan+=1,3==this.plan){this.toolNode.active=!1;var o=this.mask.children[0].children[0];cc.tween(o).to(1,{position:cc.v3(0,-500)}).call(function(){t.UpNode()}).start()}else if(4==this.plan){for(var i=0;i<this.taskNode.childrenCount;i++)i==this.plan?this.taskNode.children[i].active=!0:this.taskNode.children[i].active=!1;this.title=this.taskNode.children[this.plan].getChildByName("title"),this.title.getComponent(cc.Label).string=this.titlelist[this.plan],this.toolNode=this.taskNode.children[this.plan].getChildByName("tool"),cc.tween(this.toolNode).to(.5,{position:cc.v3(0,0)}).start()}else cc.tween(this.toolNode).to(.5,{position:cc.v3(800,0)}).call(function(){t.plan==t.taskNode.childrenCount?t.GameWin():t.UpNode()}).start()},o.prototype.Task1Func=function(){var t=this.tool.children[0],o=t.x+this.tool.x,i=t.y+this.tool.y;this._addCircle(cc.v2(o,i),t.width,t.height,this.mask),this.tool.children[0].active=!0;for(var e=0;e<this.cleanpos.length;e++)if(this.cleanpos[e]){var s=this.tool.x+t.x,n=this.tool.y+t.y;this.rectToPoints(this.cleanpos[e],cc.v2(s,n),t.width,t.height)&&(this.cleamposnum+=1,this.cleanpos[e]=null)}},o.prototype.Task2Func=function(){var t=this,o=this.mask.children[0];if(0==o.children[0].scale){this.toolNode.active=!1;var i=this.taskNode.children[this.plan].getChildByName("action");i.active=!0,cc.tween(o.children[0]).to(1,{scale:1}).call(function(){14!=t.plan&&(i.active=!1),t.localnum=1,t.successnum=1,t.SuccessFunc()}).start()}},o.prototype.Task3Func=function(){var t=this,o=this.mask.children[0];0==o.children[0].scale&&(this.tool.active=!1,cc.tween(o.children[0]).to(1,{scale:1}).call(function(){t.localnum=1,t.successnum=1,t.SuccessFunc()}).start())},o.prototype.Task4Func=function(){var t=this;this.toolNode.active=!1;var o=this.taskNode.children[this.plan].getChildByName("action");o.active=!0,cc.tween(o).to(1,{position:cc.v3(0,500)}).call(function(){t.localnum=1,t.successnum=1,t.SuccessFunc()}).start()},o.prototype.GameWin=function(){var t=this;h.default.playEffect(h.default.audioName.CRRECT),cc.tween(this.dd).to(1,{opacity:255,scale:1}).delay(.5).call(function(){t.dd.scale=0,cc.find("Canvas/game").getComponent(c.default).showResultLayer()}).start()},o.prototype._addCircle=function(t,o,i,e){var s=e.getComponent(cc.Mask)._graphics,n=cc.color(0,0,0,255);s.circle(t.x,t.y,o),s.lineWidth=2,s.fillColor=n,s.fill()},o.prototype.rectToPoints=function(t,o,i,e){return t.x>o.x-i&&t.x<o.x+i&&t.y>o.y-e&&t.y<o.y+e},o.prototype.containsPoint=function(t,o,i){for(var e=i.length,s=0,n=0;n<e;++n){var c=i[n].x,h=i[n].y,a=i[(n+1)%e].x,l=i[(n+1)%e].y;h!=l&&(o<Math.min(h,l)||o>=Math.max(h,l)||(o-h)*(a-c)/(l-h)+c>t&&s++)}return s%2==1},o.prototype.update=function(){},s([r(cc.Node)],o.prototype,"taskNode",void 0),s([r(cc.SpriteFrame)],o.prototype,"shrimp_sprite",void 0),s([r([cc.String])],o.prototype,"titlelist",void 0),s([l],o)}(cc.Component);i.default=d,cc._RF.pop()},{AudioManager:void 0,Game:void 0,MathTool:void 0}]},{},["Food_3","Food_3_shrimp"]);
window.__require=function t(e,i,o){function s(c,a){if(!i[c]){if(!e[c]){var h=c.split("/");if(h=h[h.length-1],!e[h]){var l="function"==typeof __require&&__require;if(!a&&l)return l(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+c+"'")}c=h}var r=i[c]={exports:{}};e[c][0].call(r.exports,function(t){return s(e[c][1][t]||t)},r,r.exports,t,e,i,o)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<o.length;c++)s(o[c]);return s}({lv501_18_Ctrl:[function(t,e,i){"use strict";cc._RF.push(e,"43671S6kSBMwpqZGBY9PGH2","lv501_18_Ctrl");var o=__extends,s=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=t("MathTool"),c=t("Game"),a=t("AssetManager"),h=t("AudioManager"),l=cc._decorator,r=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tasklist=null,e.sccbtn=null,e.titlelist=[],e.dd=null,e.successnum=9,e.localnum=0,e.plan=0,e.cleanpos=[],e.cleamposnum=0,e.progressBar=null,e.node_splash=null,e.node_ef_stars=null,e.sccliz=null,e.isworking=!1,e.isover=!1,e.bq=null,e.count=0,e.isplay=!1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.node.opacity=0,a.default.loadSoundEffect_fileDir("AudioClip/lv_501/18",function(){t.node&&(t.node.opacity=255)}),this.dd=this.node.getChildByName("dd"),this.title=this.node.getChildByName("title"),this.progressBar=this.node.getChildByName("progressBar").getComponent(cc.ProgressBar),this.node_ef_stars=this.node.getChildByName("ef_stars"),this.sccliz=this.node.getChildByName("success"),this.node_splash=this.node.getChildByName("splash"),this.UpNode(),cc.sys.isBrowser&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){e.keyCode==cc.macro.KEY.space&&(t.plan++,t.UpNode())},this)},e.prototype.UpNode=function(){for(var t=0;t<this.tasklist.childrenCount;t++)t==this.plan?this.tasklist.children[t].active=!0:this.tasklist.children[t].active=!1;if(this.title.getComponent(cc.Label).string=this.titlelist[this.plan],this.toolNode=this.tasklist.children[this.plan].getChildByName("tool"),this.tool=this.toolNode.getChildByName("tool"),this.action=this.tasklist.children[this.plan].getChildByName("action"),this.mask=this.tasklist.children[this.plan].getChildByName("mask"),this.rect=this.tasklist.children[this.plan].getChildByName("rect"),this.startsca=this.tool.scale,this.startpos=this.tool.position,8==this.plan&&this.Mission9Handler(),0!=this.plan&&1!=this.plan&&5!=this.plan||(this.successnum=2),3==this.plan||7==this.plan){this.cleanpos=[],this.cleamposnum=0;var e=this.tool.children[0].width/4;for(t=0;t<720/e;t++)for(var i=0;i<1280/e;i++){var o=cc.v2(e*t-360,640-e*i),s=this.mask.getComponent(cc.PolygonCollider).points;this.containsPoint(o.x,o.y,s)&&this.cleanpos.push(o)}}cc.tween(this.toolNode).to(.5,{position:cc.v3(0,0)}).start(),this.action.active=!1,this.tool.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.on(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.on(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)},e.prototype.TouchStart=function(t){this.isworking||(t.target.scale=1.1*this.startsca,h.default.playEffect(h.default.audioName.BUTTON),this.toolNode.getChildByName("tool_icon")&&(this.toolNode.getChildByName("tool_icon").active=!1),2!=this.plan&&7!=this.plan||(this.tool.angle=45))},e.prototype.TouchSMove=function(t){if(!this.isworking){var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.tool.setPosition(this.tool.getPosition().add(t.getDelta().mul(.6666666666666666))),3==this.plan||7==this.plan){var i=this.rect,o=cc.rect(i.x,i.y,i.width,i.height),s=cc.v2(e.x+this.tool.children[0].x,e.y+this.tool.children[0].y);n.default.rectPoint(s,o)&&this.Task4Func()}this.localnum,this.successnum}},e.prototype.BtnOffClick=function(){this.tool.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.off(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.off(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)},e.prototype.TouchSEnd=function(t){t.target.scale=this.startsca,3!=this.plan&&7!=this.plan||(this.cleamposnum>this.cleanpos.length/10*8?(this.localnum=this.successnum,this.SuccessFunc(),this.isplay=!1,cc.audioEngine.stopAllEffects()):this.tool.angle=0),this.rectrect(t.target,this.rect)&&(6==this.plan&&(t.target.active=!1,this.Task7Func()),5==this.plan&&(t.target.active=!1,this.Task6Func()),4==this.plan&&(t.target.active=!1,this.Task5Func()),2==this.plan&&(t.target.active=!1,this.Task3Func()),1==this.plan&&(t.target.active=!1,this.Task2Func()),0==this.plan&&(t.target.active=!1,this.Task1Func())),this.tool.position=this.startpos},e.prototype.Task1Func=function(){var t=this,e=this.mask.children[0].children[0],i=this.mask.children[1].children[0];0==this.localnum?(e.active=!0,e.y=50,this.playaudio("lv501_fang"),cc.tween(e).to(.5,{y:0}).call(function(){t.localnum++,t.toolNode.x=-800,t.moveTween(t.toolNode),t.tool.active=!0}).start()):(i.active=!0,i.y=50,this.playaudio("lv501_fang"),cc.tween(i).to(.5,{y:0}).call(function(){t.localnum++,t.SuccessFunc()}).start())},e.prototype.addfill=function(){var t=this;if(0==this.localnum){var e=this.mask.children[0].children[0];e.children[this.count].active=!0,e.children[this.count].y+=20,this.playaudio("lv501_18_4"),cc.tween(e.children[this.count]).by(.2,{y:-20}).start()}else{var i=this.mask.children[1].children[0];i.children[this.count].active=!0,i.children[this.count].y+=20,this.playaudio("lv501_18_4"),cc.tween(i.children[this.count]).by(.2,{y:-20}).start()}this.count++,8==this.count&&(this.unschedule(this.addfill),this.localnum++,this.count=0,1==this.localnum&&(this.tool.active=!0),this.toolNode.x=-800,cc.tween(this.toolNode).to(.5,{position:cc.v3(0,0)}).call(function(){t.SuccessFunc()}).start())},e.prototype.Task2Func=function(){this.schedule(this.addfill,.2)},e.prototype.playaudio=function(t,e){void 0===e&&(e=!1),cc.audioEngine.stopAllEffects(),h.default.playEffect(t,e)},e.prototype.Task3Func=function(){var t=this,e=this.action.children[0].getComponent(cc.Animation);this.action.active=!0,this.action.children[0].active=!0,this.playaudio("lv501_18_1"),e.play(),cc.tween(this.mask.children[0]).to(1,{opacity:255}).call(function(){t.action.children[0].active=!1,t.action.angle=0,cc.tween(t.action).to(.5,{position:cc.v3(350,160)}).call(function(){t.action.angle=45,t.playaudio("lv501_18_1"),t.action.children[0].active=!0,cc.tween(t.mask.children[1]).to(1,{opacity:255}).call(function(){t.action.active=!1,t.tool.active=!0,t.successnum=0,t.SuccessFunc()}).start()}).start()}).start()},e.prototype.Task4Func=function(){var t=this.tool.children[0],e=t.x+this.tool.x,i=t.y+this.tool.y;this._addCircle(cc.v2(e,i),t.width,t.height,this.mask);for(var o=0;o<this.cleanpos.length;o++)if(this.cleanpos[o]){var s=this.tool.x+t.x,n=this.tool.y+t.y;if(this.rectToPoints(this.cleanpos[o],cc.v2(s,n),t.width,t.height)){this.cleamposnum+=1,this.cleanpos[o]=null;var c=this.cleamposnum/(this.cleanpos.length/10*9);c>1?this.onRefreshProgressBar(1):(this.isplay||(this.playaudio("lv501_18_2",!0),this.isplay=!0),this.onRefreshProgressBar(c))}}},e.prototype.Task5Func=function(){var t=this;this.successnum=0,this.action.active=!0,this.action.y=100,this.playaudio("lv501_fang"),cc.tween(this.action).to(.5,{y:0}).call(function(){t.SuccessFunc()}).start()},e.prototype.Task6Func=function(){var t=this;this.successnum=2,this.action.active=!0;var e=this.action.children[0],i=this.action.children[1];0==this.localnum?(e.children[0].active=!0,e.children[0].y=50,this.playaudio("lv501_fang"),cc.tween(e.children[0]).to(.5,{y:-40}).call(function(){e.children[1].active=!0,e.children[0].active=!1,t.localnum++,t.tool.active=!0,t.toolNode.x=-800,cc.tween(t.toolNode).to(.5,{position:cc.v3(0,0)}).call(function(){}).start()}).start()):(i.children[0].active=!0,i.children[0].y=50,this.playaudio("lv501_fang"),cc.tween(i.children[0]).to(.5,{y:-40}).call(function(){i.children[1].active=!0,i.children[0].active=!1,t.localnum++,t.SuccessFunc()}).start())},e.prototype.Task7Func=function(){this.action.active=!0;var t=this.action.children[0].children[0],e=this.action.children[1].children[0];0==this.localnum?(t.active=!0,t.y=100,this.playaudio("lv501_fang"),this.moveTween(t),this.localnum++,this.toolNode.x=-800,this.moveTween(this.toolNode),this.tool.active=!0):(e.active=!0,e.y=100,this.playaudio("lv501_fang"),this.moveTween(e),this.localnum++,this.SuccessFunc())},e.prototype.Mission9Handler=function(){var t=this;this.scheduleOnce(function(){t.rect.children[1].active=!0,t.playaudio("lv501_18_3"),cc.tween(t.rect).by(1,{angle:720}).call(function(){t.rect.children[1].active=!1,t.successnum=0,t.SuccessFunc()}).start()},1)},e.prototype.moveTween=function(t,e,i){void 0===e&&(e=.5),void 0===i&&(i=null),cc.tween(t).to(e,{position:cc.v3(0,0)}).call(function(){i&&i()}).start()},e.prototype.SuccessFunc=function(){var t=this;console.log(this.successnum,this.localnum),this.successnum==this.localnum&&(this.BtnOffClick(),this.plan+=1,this.localnum=0,this.progressBar.node.opacity=0,this.plan==this.tasklist.childrenCount?(this.node_ef_stars.active=!0,this.scheduleOnce(function(){t.GameWin()},1.5)):cc.tween(this.toolNode).to(.5,{position:cc.v3(800,0)}).call(function(){8==t.plan?(t.showSplash(),t.UpNode()):t.UpNode()}).start())},e.prototype.containsPoint=function(t,e,i){for(var o=i.length,s=0,n=0;n<o;++n){var c=i[n].x,a=i[n].y,h=i[(n+1)%o].x,l=i[(n+1)%o].y;a!=l&&(e<Math.min(a,l)||e>=Math.max(a,l)||(e-a)*(h-c)/(l-a)+c>t&&s++)}return s%2==1},e.prototype.rectToPoints=function(t,e,i,o){return t.x>e.x-i&&t.x<e.x+i&&t.y>e.y-o&&t.y<e.y+o},e.prototype.GameWin=function(){var t=this;h.default.playEffect(h.default.audioName.CRRECT),cc.tween(this.dd).to(1,{opacity:255,scale:1}).delay(.5).call(function(){t.dd.scale=0,cc.find("Canvas/game").getComponent(c.default).showResultLayer()}).start()},e.prototype.rectrect=function(t,e){var i=t.getBoundingBoxToWorld(),o=e.getBoundingBoxToWorld();return!!cc.Intersection.rectRect(o,i)},e.prototype.showSplash=function(){cc.Tween.stopAllByTarget(this.node_splash),this.node_splash.opacity=255,cc.tween(this.node_splash).to(1,{opacity:0},{easing:"fade"}).start()},e.prototype.onRefreshProgressBar=function(t){this.progressBar.progress=t,this.progressBar.node.opacity=255},e.prototype._addCircle=function(t,e,i,o){var s=o.getComponent(cc.Mask)._graphics,n=cc.color(0,0,0,255);s.circle(t.x,t.y,e),s.lineWidth=2,s.fillColor=n,s.fill()},s([p(cc.Node)],e.prototype,"tasklist",void 0),s([p(cc.Node)],e.prototype,"sccbtn",void 0),s([p([cc.String])],e.prototype,"titlelist",void 0),s([p(cc.Node)],e.prototype,"bq",void 0),s([r],e)}(cc.Component);i.default=d,cc._RF.pop()},{AssetManager:void 0,AudioManager:void 0,Game:void 0,MathTool:void 0}],lv501_19_Ctrl:[function(t,e,i){"use strict";cc._RF.push(e,"e878duKNqJC5ZGrRoGkg+RY","lv501_19_Ctrl");var o=__extends,s=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=t("LevelCtrl_CommonResult"),c=t("AssetManager"),a=t("AudioManager"),h=cc._decorator,l=h.ccclass,r=h.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball=null,e.tw=null,e.rect=null,e.speedtext=null,e.jdttext=null,e.btn=null,e.jiangbei=null,e.dir=-1,e.speed=1,e.a=0,e.eff=null,e.effsp=[],e.numsp=[],e.twsp=[],e.move=1,e.progressBar=null,e.count=0,e.isover=!1,e.highspeed=10,e.nowhighspeed=10,e.progrescount=0,e.addspeed1=1.5,e.jiana1=.02,e.jiana2=.03,e.bz=0,e.jiana3=.06,e.jiana4=.2,e.jiana5=.3,e.count1=0,e.count2=0,e.count3=0,e.bq=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.node.opacity=0,c.default.loadSoundEffect_fileDir("AudioClip/lv_501/19",function(){t.node&&(t.node.opacity=255)})},e.prototype.start=function(){this.schedule(this.ballrotate,.02),this.btn.on(cc.Node.EventType.TOUCH_START,this.btneff,this),this.btn.on(cc.Node.EventType.TOUCH_END,this.addspeed,this),this.schedule(this.updatetext,.02),this.schedule(this.upatahigh,1)},e.prototype.updatetext=function(){var t=this;if(!this.isover){var e=10*Number(this.move.toFixed(1));e>=10&&e<50?(this.onRefreshProgressBar(e/50),this.jdttext.string="50"):e>=50&&e<200?(this.onRefreshProgressBar(e/200),this.jdttext.string="200"):e>=200&&e<500?(this.onRefreshProgressBar(e/500),this.jdttext.string="500"):e>=500&&e<800?(this.onRefreshProgressBar(e/800),this.jdttext.string="800"):e>=800&&e<1e3?(this.jdttext.string="999",this.onRefreshProgressBar(e/1e3)):(this.isover=!0,this.jdttext.string="999",this.showbiaoqing(),this.onRefreshProgressBar(1),this.scheduleOnce(function(){t.gameSuccess()},2)),this.speedtext.string=e>=1e3?"999km/h":e+"km/h",this.highspeed>e||(this.highspeed=e,this.highspeed>1e3&&(this.highspeed=999))}},e.prototype.ballrotate=function(){this.move=this.speed+=this.a,this.ball.angle+=this.move*this.dir,this.ball.angle<-360&&(this.ball.angle+=360),this.move<1&&(this.a=0,this.move=1),this.move>1&&this.move<5?(this.a=-(this.jiana1+this.bz),this.eff.active=!1,this.tw.active=!1):this.move>5&&this.move<=20?(this.eff.active=!0,this.tw.active=!1,this.a=-(this.jiana2+this.bz)):this.move>20&&this.move<=50?(this.a=-(this.jiana3+this.bz),this.eff.active=!1,this.tw.angle+=-15,this.tw.children[0].getComponent(cc.MotionStreak).texture=this.twsp[0],this.tw.active=!0):this.move>20&&this.move<=80?(this.a=-(this.jiana4+this.bz),this.tw.angle+=-15,this.tw.children[0].getComponent(cc.MotionStreak).texture=this.twsp[1],this.tw.active=!0):this.move>80&&this.move<=100&&(this.a=-(this.jiana5+this.bz),this.tw.angle+=-15,this.tw.children[0].getComponent(cc.MotionStreak).texture=this.twsp[2],this.tw.active=!0)},e.prototype.upatahigh=function(){this.nowhighspeed<this.highspeed&&this.updatenum()},e.prototype.updatenum=function(){var t=this,e=this.jiangbei.children[0].children[0].getComponent(cc.Sprite),i=this.jiangbei.children[0].children[1].getComponent(cc.Sprite),o=this.jiangbei.children[0].children[2].getComponent(cc.Sprite),s=Math.floor(this.highspeed/100)%10,n=Math.floor(this.highspeed/10)%10,c=this.highspeed%10;e.spriteFrame=this.numsp[s],i.spriteFrame=this.numsp[n],o.spriteFrame=this.numsp[c],cc.tween(this.jiangbei.children[0]).to(.3,{scale:1.2}).to(.2,{scale:1}).call(function(){t.nowhighspeed=t.highspeed}).start()},e.prototype.showbiaoqing=function(){var t=this;a.default.playEffect("lv501_good"),this.bq.active=!0,this.bq.scale=0,cc.tween(this.bq).to(.5,{scale:1}).to(.2,{angle:45}).to(.2,{angle:-45}).to(.1,{angle:0}).delay(1).call(function(){t.bq.active=!1}).start()},e.prototype.addspeed=function(){this.isover||(a.default.playEffect("lv501_19",!1),this.btn.y=25,this.unschedule(this.btneff),this.speed+=this.addspeed1)},e.prototype.gameSuccess=function(){this.node.getComponent(n.default).onGameSucc()},e.prototype.gameFailed=function(){this.node.getComponent(n.default).onGameFail()},e.prototype.btneff=function(){this.btn.y=9},e.prototype.onRefreshProgressBar=function(t){this.progressBar.progress=t,this.progressBar.node.opacity=255},s([r(cc.Node)],e.prototype,"ball",void 0),s([r(cc.Node)],e.prototype,"tw",void 0),s([r(cc.Node)],e.prototype,"rect",void 0),s([r(cc.Label)],e.prototype,"speedtext",void 0),s([r(cc.Label)],e.prototype,"jdttext",void 0),s([r(cc.Node)],e.prototype,"btn",void 0),s([r(cc.Node)],e.prototype,"jiangbei",void 0),s([r(cc.Node)],e.prototype,"eff",void 0),s([r([cc.SpriteFrame])],e.prototype,"effsp",void 0),s([r([cc.SpriteFrame])],e.prototype,"numsp",void 0),s([r([cc.Texture2D])],e.prototype,"twsp",void 0),s([r(cc.ProgressBar)],e.prototype,"progressBar",void 0),s([r(cc.Node)],e.prototype,"bq",void 0),s([l],e)}(cc.Component);i.default=p,cc._RF.pop()},{AssetManager:void 0,AudioManager:void 0,LevelCtrl_CommonResult:void 0}],lv501_gudie_move_label_19:[function(t,e,i){"use strict";cc._RF.push(e,"9458dOqK+JLSaidnXHC3c9J","lv501_gudie_move_label_19");var o=__extends,s=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,a=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=null,e.endPos=null,e.shouzi=null,e}return o(e,t),e.prototype.start=function(){this.shouzi.setPosition(this.startPos);var t=this.endPos.sub(this.startPos).mag()/600;this.node.parent.on(cc.Node.EventType.TOUCH_START,this.close,this),cc.tween(this.shouzi).to(.2,{scale:1}).to(t,{position:cc.v3(this.endPos.x,this.endPos.y)}).to(.2,{scale:1.2}).delay(.2).to(t,{position:cc.v3(this.startPos.x,this.startPos.y)}).union().repeatForever().start()},e.prototype.close=function(){this.node.destroy()},s([a(cc.Vec2)],e.prototype,"startPos",void 0),s([a(cc.Vec2)],e.prototype,"endPos",void 0),s([a(cc.Node)],e.prototype,"shouzi",void 0),s([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{}]},{},["lv501_18_Ctrl","lv501_19_Ctrl","lv501_gudie_move_label_19"]);
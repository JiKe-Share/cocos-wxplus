window.__require=function t(e,o,n){function i(r,l){if(!o[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var s="function"==typeof __require&&__require;if(!l&&s)return s(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){return i(e[r][1][t]||t)},d,d.exports,t,e,o,n)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({lv504_Ctrl:[function(t,e,o){"use strict";cc._RF.push(e,"432d2pYb+lCK4kRDBcpxuEN","lv504_Ctrl");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=t("LevelCtrl_CommonResult"),r=t("AssetManager"),l=t("AudioManager"),a=t("VideoManager"),s=t("Platforms_QuickGame"),d=t("lv504_icon"),p=cc._decorator,u=p.ccclass,h=p.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.rects=null,e.items=null,e.content=null,e.plan=0,e.audiodata=[],e.dialogdata=[],e.dialog=null,e.errcount=5,e.level=1,e.isplay=!1,e.errtext=null,e.hintbtn=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.node.opacity=0,this.hintbtn=this.node.getChildByName("btn_hint"),r.default.loadSoundEffect_fileDir("AudioClip/lv_504",function(){t.node&&(t.node.opacity=255,l.default.stopMusic(),l.default.playMusic("504_bgm",!0))})},e.prototype.start=function(){this.errtext.string=""+this.errcount,this.icon.active=!1,this.hintbtn.on(cc.Node.EventType.TOUCH_END,this.addetubiao,this),setTimeout(function(){s.default.getInstance().hideBanner()},700)},e.prototype.updaterr=function(){this.errcount--,this.errtext.string=""+this.errcount,this.errcount<=0&&this.node.getComponent(c.default).onGameFail()},e.prototype.addetubiao=function(){var t=this;this.plan>=this.content.childrenCount||(this.isplay=!0,a.default.getInstance().showVideo(function(){t.content.children[t.plan].getComponent(d.default).addicon()}))},e.prototype.onEnable=function(){l.default.stopMusic(),this.scheduleOnce(function(){l.default.playMusic("504_bgm",!0)},.1)},e.prototype.onDestroy=function(){cc.audioEngine.stopAllEffects(),setTimeout(function(){l.default.playMusic(l.default.audioName.BACKGROUND)},0)},e.prototype.VerifyCompletion=function(){var t=this;this.plan==this.content.childrenCount&&this.scheduleOnce(function(){t.node.getComponent(c.default).onGameSucc()},3)},e.prototype.showdialog=function(t){this.dialogdata.length<=0||(this.unschedule(this.ActiveDialog),cc.audioEngine.pauseAllEffects(),this.dialog.active=!0,this.dialog.getChildByName("type_1").children[0].getComponent(cc.Label).string=this.dialogdata[t],this.scheduleOnce(this.ActiveDialog,4))},e.prototype.ActiveDialog=function(){this.dialog.active=!1},e.prototype.update=function(){},i([h(cc.Node)],e.prototype,"icon",void 0),i([h(cc.Node)],e.prototype,"rects",void 0),i([h(cc.Node)],e.prototype,"items",void 0),i([h(cc.Node)],e.prototype,"content",void 0),i([h([cc.String])],e.prototype,"audiodata",void 0),i([h([cc.String])],e.prototype,"dialogdata",void 0),i([h(cc.Node)],e.prototype,"dialog",void 0),i([h],e.prototype,"errcount",void 0),i([h(cc.Float)],e.prototype,"level",void 0),i([h(cc.Label)],e.prototype,"errtext",void 0),i([u],e)}(cc.Component);o.default=v,cc._RF.pop()},{AssetManager:void 0,AudioManager:void 0,LevelCtrl_CommonResult:void 0,Platforms_QuickGame:void 0,VideoManager:void 0,lv504_icon:"lv504_icon"}],lv504_icon:[function(t,e,o){"use strict";cc._RF.push(e,"615e8c5KrtEz58Ra2Pj2HGC","lv504_icon");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=t("AudioManager"),r=t("lv504_Ctrl"),l=cc._decorator,a=l.ccclass,s=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelparent=null,e.rect=null,e.icon_name="",e.count=0,e.item=null,e.iserr=!1,e.lv=0,e}return n(e,t),e.prototype.onLoad=function(){this.level=this.levelparent.getComponent(r.default),this.node.getChildByName("name").getComponent(cc.Label).string=this.icon_name,this.movenode=this.node.children[0],this.BtnOnClick(),this.init()},e.prototype.BtnOnClick=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.TouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.TouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchEnd,this)},e.prototype.BtnOffClick=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.TouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.TouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchEnd,this)},e.prototype.init=function(){this.rect=this.level.rects.children[this.lv],this.item.getChildByName("icon").active=!1,this.item.getChildByName("icon2").active=!0},e.prototype.rectRect=function(){var t=this,e=this.level.icon.getBoundingBoxToWorld(),o=this.rect.getBoundingBoxToWorld();if(cc.Intersection.rectRect(o,e))this.addicon();else{if(this.level.icon.y>-450){if(this.iserr)return;this.iserr=!0,c.default.playEffect("504_err"),cc.tween(this.level.icon).by(.1,{x:20}).by(.1,{x:-40}).by(.2,{x:20}).call(function(){t.node.parent.parent.parent.getComponent(cc.ScrollView).enabled=!0,t.node.opacity=255,t.iserr=!1,t.level.icon.active=!1}).start()}else this.node.opacity=255,this.level.icon.active=!1;this.node.parent.parent.parent.getComponent(cc.ScrollView).enabled=!0}},e.prototype.addicon=function(){var t=this;c.default.playEffect("504_f"),this.node.active=!1,this.level.icon.active=!1;var e=this.item.getChildByName("icon");e.active=!0,e.scale=1.2,this.level.plan+=1,this.level.VerifyCompletion(),cc.tween(e).to(.5,{scale:1}).call(function(){t.level.isplay=!1,t.node.parent.parent.parent.getComponent(cc.ScrollView).enabled=!0}).start(),this.item.getChildByName("icon2").active=!1},e.prototype.TouchStart=function(t){this.node.parent.parent.parent.getComponent(cc.ScrollView).enabled=!1,this.level.icon.active=!0,this.level.icon.getComponent(cc.Sprite).spriteFrame=this.movenode.getComponent(cc.Sprite).spriteFrame,this.level.icon.scale=1.2,this.level.icon.position=this.node.parent.parent.parent.parent.convertToNodeSpaceAR(t.getLocation()),this.node.opacity=0},e.prototype.TouchMove=function(t){this.level.icon.position=this.node.parent.parent.parent.parent.convertToNodeSpaceAR(t.getLocation())},e.prototype.TouchEnd=function(){this.rectRect()},i([s(cc.Node)],e.prototype,"levelparent",void 0),i([s],e.prototype,"icon_name",void 0),i([s(cc.Node)],e.prototype,"item",void 0),i([s],e.prototype,"lv",void 0),i([a],e)}(cc.Component);o.default=d,cc._RF.pop()},{AudioManager:void 0,lv504_Ctrl:"lv504_Ctrl"}]},{},["lv504_Ctrl","lv504_icon"]);
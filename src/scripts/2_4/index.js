window.__require=function t(e,o,i){function n(c,l){if(!o[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var a="function"==typeof __require&&__require;if(!l&&a)return a(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var h=o[c]={exports:{}};e[c][0].call(h.exports,function(t){return n(e[c][1][t]||t)},h,h.exports,t,e,o,i)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({Food_4:[function(t,e,o){"use strict";cc._RF.push(e,"b1bd6FXJYFG4raAuUt7uHQG","Food_4");var i=__extends,n=__decorate,s=__spreadArrays;Object.defineProperty(o,"__esModule",{value:!0});var c=t("Game"),l=t("AudioManager"),r=cc._decorator,a=r.ccclass,h=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tskIndex=0,e.titles=[],e.toolOffset=cc.Vec2.ZERO,e.toolPos=cc.Vec2.ZERO,e.bowlPos=cc.Vec2.ZERO,e.toolSwitchedTime=1.8,e.cuttingSceneTime=3,e.hammerCount=5,e.title=null,e.bottomLayer=null,e.tsks=[],e.tool=null,e.tools=[],e.canOperation=!1,e.usingTools=!1,e.cutsence=!1,e._toolIndex=-1,e.mskPoints=[],e.mskPCount=0,e.bowlShowed=!1,e.crabMeatParticle=null,e.succ_precentage=.8,e.tsk2_3_legs_mark=new Array(4).fill(!1),e.tsk4_opened_shell=!1,e.tsk4_shell=null,e.tsk6_splited=!1,e.tsk8_placed=!1,e.tsk9_picked_roe=!1,e.tsk9_placed=!1,e._isScraping=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.bottomLayer=this.node.getChildByName("bottom_layer"),this.node.getChildByName("tools").setPosition(cc.Vec2.ZERO),this.tools=s(this.node.getChildByName("tools").children),this.tools.forEach(function(t){t.active=!1}),this.crabMeatParticle=this.node.getChildByName("crab_meat_particle"),this.bowlNode=this.node.getChildByName("bowl"),this.dd=this.node.getChildByName("dd"),this.title=this.node.getChildByName("title").getComponent(cc.Label),this.tsks=this.node.getChildByName("tasks").children,this.taskLauncher(this.tskIndex)},e.prototype.onDestroy=function(){cc.director.getCollisionManager().enabled=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.lateUpdate=function(){if(this.tool.onLateUpdate(),!this.cutsence&&!this.usingTools){switch(this.tskIndex){case 0:this.tsk.getComponentsInChildren(cc.PolygonCollider).length<1&&this.exitTask().then(function(t){return t.taskLauncher(1)});break;case 1:this.tsk.getComponentsInChildren(cc.PolygonCollider).length<1&&this.exitTask().then(function(t){return t.taskLauncher(2)});break;case 2:this.tsk.getComponentsInChildren(cc.PolygonCollider).length<1&&(this.switchTool(1),this.tsk2_3_legs_mark.filter(function(t){return!1===t}).length<1&&this.exitTask().then(function(t){t.tsk2_3_legs_mark.fill(!1),t.taskLauncher(3)}));break;case 3:this.tsk2_3_legs_mark.filter(function(t){return!1===t}).length<1&&this.exitTask().then(function(t){t.taskLauncher(4)});break;case 4:this.hammerCount<1&&(this.switchTool(3),this.tsk4_opened_shell&&this.exitTask().then(function(t){return t.taskLauncher(5)}));break;case 5:this.tsk.getComponentsInChildren(cc.PolygonCollider).length<1&&this.exitTask().then(function(t){return t.taskLauncher(6)});break;case 6:this.tsk6_splited&&this.exitTask().then(function(t){return t.taskLauncher(7)});break;case 7:this.tskProgress>=this.succ_precentage&&(this.switchTool(0),this.tsk.getComponentsInChildren(cc.PolygonCollider).length<1&&this.exitTask().then(function(t){return t.taskLauncher(8)}));break;case 8:this.tskProgress>=this.succ_precentage&&(this.tool=new C(this,this.tsk.getChildByName("meat")),this.tsk8_placed&&this.exitTask().then(function(t){return t.taskLauncher(9)}));break;case 9:this.tsk9_picked_roe&&(this.switchTool(5),this.tskProgress>=this.succ_precentage&&(this.tool=new C(this,this.tsk.getChildByName("meats")),this.tsk9_placed&&this.exitTask().then(function(t){return t.taskLauncher(10)})))}this.crabMeatParticle.active=!1}},e.prototype._playScrapingAudio=function(){var t=this;this._isScraping||(this._isScraping=!0,l.default.playEffect("lv2_4_2"),this.scheduleOnce(function(){t._isScraping=!1},.1))},Object.defineProperty(e.prototype,"spoonReo",{get:function(){return this.tools[3].getChildByName("msk").height},set:function(t){this.tools[3].getChildByName("msk").height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tskProgress",{get:function(){switch(this.tskIndex){default:return;case 4:case 7:case 8:case 9:}return this.tsk.getChildByName("progress").getChildByName("bar").getComponent(cc.Sprite).fillRange},set:function(t){switch(this.tskIndex){default:return;case 4:case 7:case 8:case 9:}this.tsk.getChildByName("progress").getChildByName("bar").getComponent(cc.Sprite).fillRange=t},enumerable:!1,configurable:!0}),e.prototype.switchTool=function(t){var e=this;if(!(t<0&&t>=this.tools.length)&&this._toolIndex!=t){switch(this.canOperation=!1,-1!=this._toolIndex&&cc.tween(this.tools[this._toolIndex]).to(this.toolSwitchedTime,{x:800,angle:90}).call(function(){e.tools[e._toolIndex].active=!1,e.tools[t].active=!0}).start(),this._toolIndex=t,this._toolIndex){case 0:this.tool=new p(this);break;case 1:this.tool=new g(this);break;case 2:this.tool=new y(this);break;case 3:this.tool=new m(this),this.tools[this._toolIndex].parent=this.node.getChildByName("tools");break;case 4:this.tool=new v(this);break;case 5:this.tool=new f(this)}this.tools[t].setPosition(cc.v2(this.toolPos.x,-800)),this.tools[t].active=!0,this.tools[t].angle=90,cc.tween(this.tools[t]).to(this.toolSwitchedTime,{position:cc.v3(2===t?this.toolPos.add(cc.v2(0,-50)):this.toolPos)}).call(function(){e.canOperation=!0}).start()}},e.prototype.showBowl=function(t){if(void 0===t&&(t=0),!this.bowlShowed){switch(this.bowlShowed=!0,this.bowlNode.active=!0,this.bowlNode.children.forEach(function(t){return t.active=!1}),t){case 1:this.bowlNode.getChildByName("wan-shiwu2").active=!0;case 0:this.bowlNode.getChildByName("wan-xiehuang").active=!0;default:this.bowlNode.getChildByName("wan").active=!0}this.bowlNode.position.equals(cc.v3(this.bowlPos))||cc.tween(this.bowlNode).to(this.toolSwitchedTime,{position:cc.v3(this.bowlPos)}).start()}},e.prototype.taskLauncher=function(t){var e=this;switch(this.tskIndex=t,this.tsk=this.tsks[this.tskIndex],this.title.string=this.titles[t],this.canOperation=!1,this.cutsence=!0,this.tsks.forEach(function(t){t.active=!1}),t){case 0:case 1:case 2:this.tsk.getChildByName("guide").active=!1,this.levelIntroAnimation(function(){e.tsk.getChildByName("guide").active=!0}),this.switchTool(0);break;case 3:this.levelIntroAnimation(),this.switchTool(1);break;case 4:this.tsk.getChildByName("progress").active=!1,this.levelIntroAnimation(function(){e.tskProgress=0,e.tsk.getChildByName("progress").active=!0}),this.switchTool(2);break;case 5:this.tsk.active=!0,this.canOperation=!0,this.switchTool(4),this.cutsence=!1;break;case 6:this.tsk.active=!0,this.canOperation=!0,this.switchTool(0),this.cutsence=!1;break;case 7:this.tskProgress=0,this.tsk.getChildByName("progress").active=!1,this.tsk.active=!0,this.canOperation=!0,this.cutsence=!1,this.switchTool(3);var o=this.tsk.getChildByName("left").getComponent(cc.PolygonCollider).world.points,i=this.tsk.getChildByName("right").getComponent(cc.PolygonCollider).world.points;this.mskPoints=o.concat(i),this.mskPCount=this.mskPoints.length;break;case 8:this.tskProgress=0,this.tsk.getChildByName("progress").active=!1;var n=this.tsk.getChildByName("left"),s=this.tsk.getChildByName("right");this.mskPoints=this.calculatePolygonVertices(n).concat(this.calculatePolygonVertices(s)),this.mskPCount=this.mskPoints.length,this.tsk.active=!0,this.canOperation=!0,this.switchTool(5),this.cutsence=!1;break;case 9:this.tskProgress=0,this.tsk.getChildByName("progress").active=!1,this.levelIntroAnimation(),this.switchTool(4);var c=this.tsk.getChildByName("meat");this.mskPoints=this.calculatePolygonVertices(c),this.mskPCount=this.mskPoints.length;break;case 10:this.spoonReo=0,this.levelIntroAnimation(),this.switchTool(3)}},e.prototype.levelIntroAnimation=function(t){var e=this;this.tsk.x=-800,this.tsk.active=!0,cc.tween(this.tsk).to(this.cuttingSceneTime,{x:0}).call(function(){e.canOperation=!0,t&&t(),e.cutsence=!1}).start()},e.prototype.exitTask=function(){var t=this;return this.title.string="",this.canOperation=!1,new Promise(function(e){switch(t.tskIndex){default:cc.tween(t.tsk).by(t.cuttingSceneTime,{x:800}).call(function(){e(t)}).start();break;case 4:e(t);break;case 5:case 6:t.spoonReo=0;case 7:var o=t.tsk;e(t),o.active=!1,t.spoonReo=0}})},e.prototype.onTouchStart=function(t){this.canOperation&&this.tool.onTouchStart(t)},e.prototype.onTouchMove=function(t){this.canOperation&&this.tool.onTouchMove(t)},e.prototype.onTouchEnd=function(t){this.canOperation&&this.tool.onTouchEnd(t)},e.prototype.onCut=function(t){var e=this;if(!1!==t.active){switch(this.tskIndex){case 0:"left"===t.name&&(this.tsk.getChildByName("guide").getChildByName("left").active=!1,cc.tween(t).by(this.cuttingSceneTime/2,{x:-50}).start()),"right"===t.name&&(this.tsk.getChildByName("guide").getChildByName("right").active=!1,cc.tween(t).by(this.cuttingSceneTime/2,{x:50}).start());break;case 1:case 2:cc.tween(t).by(1.2,{y:"top"===t.name?20:-20,opacity:-255}).by(0,{y:"top"===t.name?-20:20}).call(function(){t.active=!1,e.tsk.getComponentsInChildren(cc.PolygonCollider).filter(function(t){return"top"===t.node.name}).length<1&&(e.tsk.getChildByName("guide").getChildByName("top").active=!1),e.tsk.getComponentsInChildren(cc.PolygonCollider).filter(function(t){return"bottom"===t.node.name}).length<1&&(e.tsk.getChildByName("guide").getChildByName("bottom").active=!1)}).start();break;case 6:var o=this.tsk.getChildByName("left"),i=this.tsk.getChildByName("right");cc.tween(o).to(this.cuttingSceneTime,{x:-50}).start(),cc.tween(i).to(this.cuttingSceneTime,{x:50}).call(function(){e.tsk6_splited=!0}).start();break;case 7:var n=this.tsk.getChildByName("pangxieke2-biaopi3-zuo"),s=this.tsk.getChildByName("pangxieke2-biaopi3-you");"left"===t.name&&cc.tween(n).by(this.cuttingSceneTime,{x:-50,y:50,opacity:-255}).start(),"right"===t.name&&cc.tween(s).by(this.cuttingSceneTime,{x:50,y:50,opacity:-255}).start()}t.removeComponent(cc.PolygonCollider)}},e.prototype.onPush=function(t,e,o){var i=this.tsk.children[t].getChildByName("shell"),n=this.tsk.children[t].getChildByName("meat");cc.Intersection.rectRect(i.getBoundingBoxToWorld(),n.getBoundingBoxToWorld())?n.y+=o:this.tsk2_3_legs_mark[t]=!0},e.prototype.onHammer=function(t,e){var o=this;this.scheduleOnce(function(){cc.tween(t).by(.1,{scale:.1}).to(.1,{scale:1}).call(function(){o.tskProgress+=.2,o.hammerCount--}).start()},e+.1)},e.prototype.onFlip=function(t){var e=this;this.tsk.getChildByName("progress").active=!1,cc.tween(t).to(.1,{scale:1.1}).to(.8,{scaleY:0}).call(function(){e.tsk4_opened_shell=!0,e.usingTools=!1}).start()},e.prototype.onClip=function(t,e,o,i){var n=this;switch(this.tskIndex){case 9:if("roe"!=t.name)return;this.tsk9_picked_roe=!0;default:t.removeComponent(cc.PolygonCollider),cc.tween(t).by(e,{position:cc.v3(o),opacity:-255}).call(function(){n.tskIndex,t.destroy()}).start(),i()}},e.prototype.onScraping=function(t){switch(this.tskIndex){case 7:var e=null,o=this.tsk.getChildByName("left"),i=this.tsk.getChildByName("right");if(cc.Intersection.polygonPolygon(t,o.getComponent(cc.PolygonCollider).world.points)?e=o:cc.Intersection.polygonPolygon(t,i.getComponent(cc.PolygonCollider).world.points)&&(e=i),e){this._addPolygon(t,e);for(var n=0,s=this.mskPoints;n<s.length;n++){var c=s[n];cc.Intersection.pointInPolygon(c,t)&&(this._playScrapingAudio(),this.mskPoints.splice(this.mskPoints.indexOf(c),1),this.spoonReo+=114/this.mskPCount,this.tskProgress+=1/this.mskPCount)}}this.tskProgress>=this.succ_precentage&&(this.tsk.getChildByName("progress").active=!1);break;case 8:for(var l=0,r=t;l<r.length;l++){c=r[l];var a=null,h=this.tsk.getChildByName("left"),d=this.tsk.getChildByName("right"),u=this.tsk.getChildByName("meat");if(cc.Intersection.pointInPolygon(c,h.getComponent(cc.PolygonCollider).world.points)?a=h:cc.Intersection.pointInPolygon(c,d.getComponent(cc.PolygonCollider).world.points)&&(a=d),a){this.crabMeatParticle.setPosition(this.tsk.convertToNodeSpaceAR(t[2])),this._addPolygon(t,a);for(var p=0,g=this.mskPoints;p<g.length;p++){var y=g[p];cc.Intersection.pointInPolygon(y,t)&&(this._playScrapingAudio(),this.mskPoints.splice(this.mskPoints.indexOf(y),1),this.crabMeatParticle.active=!0,u.scale+=1/this.mskPCount,this.tskProgress+=1/this.mskPCount)}}if(this.tskProgress>=this.succ_precentage){this.tsk.getChildByName("progress").active=!1,this.showBowl();break}}break;case 9:for(var m=0,v=t;m<v.length;m++){c=v[m],u=this.tsk.getChildByName("meat");var f=this.tsk.getChildByName("meats");if(cc.Intersection.pointInPolygon(c,u.getComponent(cc.PolygonCollider).world.points)){this.crabMeatParticle.setPosition(this.tsk.convertToNodeSpaceAR(t[2])),this._addPolygon(t,u);for(var C=0,k=this.mskPoints;C<k.length;C++){var P=k[C],T=cc.v2(P);T.x=-T.x,T.y-=u.y,cc.Intersection.pointInPolygon(T,t)&&(this._playScrapingAudio(),this.mskPoints.splice(this.mskPoints.indexOf(P),1),this.crabMeatParticle.active=!0,f.scale+=1/(this.mskPCount-30),this.tskProgress+=1/(.8*this.mskPCount))}}if(this.tskProgress>=this.succ_precentage){this.tsk.getChildByName("progress").active=!1,this.showBowl(1);break}}}},e.prototype.onMeatPlaced=function(){switch(this.bowlNode.active=!1,this.bowlShowed=!1,this.tskIndex){case 8:this.tsk8_placed=!0;break;case 9:this.tsk9_placed=!0}},e.prototype.onSuccGame=function(){var t=this;l.default.playEffect(l.default.audioName.CRRECT),cc.tween(this.dd).to(1,{opacity:255,scale:1}).delay(.5).call(function(){t.dd.scale=0,cc.find("Canvas/game").getComponent(c.default).showResultLayer()}).start()},e.prototype._addPolygon=function(t,e){var o=e.getComponent(cc.Mask)._graphics,i=cc.color(0,0,0,255),n=t.map(function(t){return e.convertToNodeSpaceAR(t)});o.moveTo(n[0].x,n[0].y);for(var s=1;s<n.length;s++)o.lineTo(n[s].x,n[s].y);o.lineTo(n[0].x,n[0].y),o.lineWidth=2,o.fillColor=i,o.strokeColor=i,o.stroke(),o.fill()},e.prototype.calculatePolygonVertices=function(t){for(var e=[],o=t.getComponent(cc.PolygonCollider).points,i=0;i<720;i++)for(var n=0;n<1280;n++){var s=cc.v2(10*i-360,640-10*n);cc.Intersection.pointInPolygon(s,o)&&e.push(s)}return e.map(function(e){return t.convertToWorldSpaceAR(e)})},n([h(cc.Integer)],e.prototype,"tskIndex",void 0),n([h([cc.String])],e.prototype,"titles",void 0),n([h(cc.Vec2)],e.prototype,"toolOffset",void 0),n([h(cc.Vec2)],e.prototype,"toolPos",void 0),n([h(cc.Vec2)],e.prototype,"bowlPos",void 0),n([h(cc.Float)],e.prototype,"toolSwitchedTime",void 0),n([h(cc.Float)],e.prototype,"cuttingSceneTime",void 0),n([h(cc.Integer)],e.prototype,"hammerCount",void 0),n([a],e)}(cc.Component);o.default=d;var u=function(){function t(t){this.angle=60,this.lvCtrl=t,this.node=t.tools[t._toolIndex]}return t.prototype.updateState=function(t){this.lvCtrl.usingTools=!0,this.node.setPosition(this.node.parent.convertToNodeSpaceAR(t.getLocation()).add(this.lvCtrl.toolOffset)),this.node.angle=90-this.angle},t.prototype.onTouchStart=function(){},t.prototype.onTouchMove=function(){},t.prototype.onTouchEnd=function(){},t.prototype.onLateUpdate=function(){},t}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.angle=60,e.animationState=null,e}return i(e,t),e.prototype.onLateUpdate=function(){},Object.defineProperty(e.prototype,"animePlaying",{get:function(){return this.animationState&&this.animationState.isPlaying},enumerable:!1,configurable:!0}),e.prototype.playAnime=function(){this.animePlaying||(this.animationState=this.node.getComponent(cc.Animation).play("cut"))},e.prototype.updateState=function(t){this.lvCtrl.usingTools=!0,this.node.setPosition(this.node.parent.convertToNodeSpaceAR(t.getLocation()).add(this.lvCtrl.toolOffset)),this.node.angle=90-this.angle},e.prototype.onTouchStart=function(t){this.animePlaying||this.updateState(t)},e.prototype.onTouchMove=function(t){if(!this.animePlaying){this.updateState(t);for(var e=0,o=this.lvCtrl.tsk.getComponentsInChildren(cc.PolygonCollider);e<o.length;e++){var i=o[e];if(cc.Intersection.polygonPolygon(this.node.getComponent(cc.PolygonCollider).world.points,i.world.points)){this.playAnime(),l.default.playEffect("lv2_4_1"),this.lvCtrl.onCut(i.node);break}}}},e.prototype.onTouchEnd=function(){var t=this;this.lvCtrl.scheduleOnce(function(){t.node.setPosition(t.lvCtrl.toolPos),t.node.angle=90,t.lvCtrl.usingTools=!1},this.animePlaying?this.animationState.duration:0)},e}(u),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLateUpdate=function(){},e.prototype.onTouchStart=function(t){this.lvCtrl.usingTools=!0,this.node.parent=this.lvCtrl.bottomLayer,this.node.angle=0;var e=this.node.parent.convertToNodeSpaceAR(t.getLocation());e.y+=this.lvCtrl.toolOffset.y,this.node.setPosition(e)},e.prototype.onTouchMove=function(t){var e=this,o=this.node.parent.convertToNodeSpaceAR(t.getLocation());o.y+=this.lvCtrl.toolOffset.y,this.lvCtrl.tsk.children.forEach(function(i,n){if(!e.lvCtrl.tsk2_3_legs_mark[n]&&cc.Intersection.rectRect(i.getBoundingBoxToWorld(),e.node.getBoundingBoxToWorld()))return t.getDelta().y>0&&e.lvCtrl.onPush(n,i,t.getDelta().y),void(o.x=i.x)}),this.node.setPosition(o)},e.prototype.onTouchEnd=function(){this.node.setPosition(this.lvCtrl.toolPos),this.node.angle=90,this.lvCtrl.usingTools=!1,this.node.parent=this.lvCtrl.tools[0].parent},e}(u),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.angle=60,e}return i(e,t),Object.defineProperty(e.prototype,"playingAnime",{get:function(){return this.animeState&&this.animeState.isPlaying},enumerable:!1,configurable:!0}),e.prototype.playAnime=function(){this.animeState=this.node.getComponent(cc.Animation).play("hammering")},e.prototype.onTouchStart=function(t){this.lvCtrl.usingTools=!0,this.updateState(t)},e.prototype.onTouchMove=function(t){this.updateState(t)},e.prototype.onTouchEnd=function(){this.node.setPosition(this.lvCtrl.toolPos.add(cc.v2(0,-50))),this.node.angle=90,this.lvCtrl.usingTools=!1},e.prototype.onLateUpdate=function(){var t=this.lvCtrl.tsk.getChildByName("shell");this.lvCtrl.hammerCount>0&&!this.playingAnime&&cc.Intersection.rectRect(this.node.getBoundingBoxToWorld(),t.getBoundingBoxToWorld())&&(this.playAnime(),this.lvCtrl.onHammer(t,.3))},e}(u),m=function(t){function e(e){var o=t.call(this,e)||this,i=o.node.getChildByName("food");switch(i.active=!0,i.children.forEach(function(t){return t.active=!1}),o.lvCtrl.tskIndex){case 7:o.lvCtrl.tskProgress=0,o.lvCtrl.tsk.getChildByName("progress").active=!0}return o}return i(e,t),e.prototype.onTouchStart=function(t){4===this.lvCtrl.tskIndex&&(this.node.parent=this.lvCtrl.bottomLayer),this.updateState(t)},e.prototype.onTouchMove=function(t){switch(this.updateState(t),this.lvCtrl.onScraping(this.node.getComponent(cc.PolygonCollider).world.points),this.lvCtrl.tskIndex){case 4:var e=this.lvCtrl.tsk.getChildByName("shell");e&&cc.Intersection.rectRect(this.node.getBoundingBoxToWorld(),e.getBoundingBoxToWorld())&&this.lvCtrl.onFlip(e)}},e.prototype.onTouchEnd=function(){var t=this;switch(this.lvCtrl.tskIndex){case 10:var e=this.lvCtrl.tsk.getChildByName("wan"),o=this.lvCtrl.tsk.getChildByName("diezi");if(cc.Intersection.rectRect(this.node.getBoundingBoxToWorld(),e.getBoundingBoxToWorld())){var i=this.node.getChildByName("food");i.active=!0,i.children.forEach(function(t){return t.active=!1});var n=cc.v3(i.position.neg().sub(cc.v3(this.lvCtrl.toolOffset)));cc.tween(this.node).to(0,{position:n,angle:90-this.angle}).call(function(){t.node.getChildByName("food").children[0].active=!0}).by(this.lvCtrl.toolSwitchedTime,{position:o.position.sub(e.position).add(cc.v3(o.width/2,o.height/2))}).call(function(){t.node.getChildByName("food").children[1].active=!0}).to(this.lvCtrl.cuttingSceneTime,{scale:2,position:n}).call(function(){return t.lvCtrl.onSuccGame()}).start()}}this.node.parent=this.lvCtrl.tools[0].parent,this.node.setPosition(this.lvCtrl.toolPos),this.node.angle=90,this.lvCtrl.usingTools=!1},e}(u),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.angle=60,e.isAnimed=!1,e.animeTime=.8,e.byPos=cc.v2(10,100),e}return i(e,t),e.prototype.tip=function(){for(var t=0,e=this.tsk.getComponentsInChildren(cc.PolygonCollider);t<e.length;t++){var o=e[t];cc.tween(o.node).to(.2,{color:cc.color(218,87,87)}).to(.1,{color:cc.Color.WHITE}).to(.2,{color:cc.color(218,87,87)}).to(.1,{color:cc.Color.WHITE}).start()}},e.prototype.onTouchStart=function(t){this.isAnimed||(this.updateState(t),this.lvCtrl.schedule(this.tip,2))},e.prototype.onTouchMove=function(t){var e=this;if(!this.isAnimed){for(var o=0,i=this.lvCtrl.tsk.getComponentsInChildren(cc.PolygonCollider);o<i.length;o++)for(var n=i[o],s=0,c=this.node.getComponent(cc.PolygonCollider).world.points;s<c.length;s++){var l=c[s];if(cc.Intersection.pointInPolygon(l,n.world.points)){this.lvCtrl.unschedule(this.tip),this.lvCtrl.schedule(this.tip,2),this.lvCtrl.onClip(n.node,this.animeTime,this.byPos,function(){e.isAnimed=!0,cc.tween(e.node).by(e.animeTime,{position:cc.v3(e.byPos)}).call(function(){e.isAnimed=!1}).start()});break}}this.updateState(t)}},e.prototype.onTouchEnd=function(){var t=this;this.lvCtrl.scheduleOnce(function(){t.lvCtrl.unschedule(t.tip),t.isAnimed=!1,t.node.setPosition(t.lvCtrl.toolPos),t.node.angle=90,t.lvCtrl.usingTools=!1},this.isAnimed?this.animeTime:0)},e}(u),f=function(t){function e(e){var o=t.call(this,e)||this;return o.lvCtrl.tskProgress=0,o.lvCtrl.tsk.getChildByName("progress").active=!0,o}return i(e,t),e.prototype.onTouchStart=function(t){this.updateState(t)},e.prototype.onTouchMove=function(t){this.updateState(t),this.lvCtrl.onScraping(this.node.getComponent(cc.PolygonCollider).world.points)},e.prototype.onTouchEnd=function(){this.node.setPosition(this.lvCtrl.tskProgress>=this.lvCtrl.succ_precentage?cc.v2(800,-800):this.lvCtrl.toolPos),this.node.angle=90,this.lvCtrl.usingTools=!1},e}(u),C=function(t){function e(e,o){var i=t.call(this,e)||this;return i.angle=90,i.node=o,i}return i(e,t),e.prototype.onTouchStart=function(t){this.updateState(t)},e.prototype.onTouchMove=function(t){this.updateState(t)},e.prototype.onTouchEnd=function(){cc.Intersection.rectRect(this.node.getBoundingBoxToWorld(),this.lvCtrl.bowlNode.getBoundingBoxToWorld())?(this.lvCtrl.onMeatPlaced(),this.node.active=!1):this.node.setPosition(cc.Vec2.ZERO),this.lvCtrl.usingTools=!1},e}(u);cc._RF.pop()},{AudioManager:void 0,Game:void 0}]},{},["Food_4"]);
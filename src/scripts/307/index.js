window.__require=function e(t,o,n){function i(c,r){if(!o[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var d="function"==typeof __require&&__require;if(!r&&d)return d(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return i(t[c][1][e]||e)},p,p.exports,e,t,o,n)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({"307_1_Drag":[function(e,t,o){"use strict";cc._RF.push(t,"323362/jLRCLLwRqpZqDNth","307_1_Drag");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragTarget=t.node,t.dragOffset=cc.v2(0,0),t.dragStartEvents=[],t.dragMoveEvents=[],t.dragEndEvents=[],t._isDrag=!1,t}return n(t,e),t.prototype.onLoad=function(){this.dragTarget||(this.dragTarget=this.node),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.onTouchStart=function(e){this._isDrag||(this._isDrag=!0,this.dragTarget.setPosition(this.dragTarget.parent.convertToNodeSpaceAR(e.getLocation()).add(this.dragOffset)),cc.Component.EventHandler.emitEvents(this.dragStartEvents,this.dragTarget,e))},t.prototype.onTouchMove=function(e){this._isDrag&&(this.dragTarget.setPosition(this.dragTarget.getPosition().add(e.getDelta().mul(.6666666666666666))),cc.Component.EventHandler.emitEvents(this.dragMoveEvents,this.dragTarget,e))},t.prototype.onTouchEnd=function(e){this._isDrag&&(this._isDrag=!1,cc.Component.EventHandler.emitEvents(this.dragEndEvents,this.dragTarget,e))},i([r({type:cc.Node,displayName:"\u62d6\u52a8\u76ee\u6807"})],t.prototype,"dragTarget",void 0),i([r({displayName:"\u62d6\u52a8\u504f\u79fb"})],t.prototype,"dragOffset",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u62d6\u52a8\u5f00\u59cb\u4e8b\u4ef6"})],t.prototype,"dragStartEvents",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u62d6\u52a8\u4e2d\u4e8b\u4ef6"})],t.prototype,"dragMoveEvents",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u62d6\u52a8\u7ed3\u675f\u4e8b\u4ef6"})],t.prototype,"dragEndEvents",void 0),i([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],"307_1_LevelCtrl":[function(e,t,o){"use strict";cc._RF.push(t,"9c116P76w9GnrQFTCJ6d34J","307_1_LevelCtrl");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isDrawOutNMG=!1,t.tempNMGNode=null,t.nmgNode=null,t._scissorsNode=null,t._isCutNMG=!1,t.foldNMGNode=null,t._suctionPipeNode=null,t._isInsertSuctionPipe=!1,t._isMoveNMGSuctionPipe=!1,t._progressTime=1,t._blowerProgress=0,t._nmgSuctionPipeNode=null,t._isMoveNMGToPump=!1,t.ballNode=null,t._pumpProgress=0,t.selectColor=cc.color(198,2,125),t.injectNode=null,t._injectProgress=0,t._selectHeadwearIndex=-1,t._selectLimbIndex=-1,t._selectExpressionIndex=-1,t.headwearNode=null,t.limbNode=null,t.expressionNode=null,t}return n(t,e),t.prototype.onLoad=function(){var e=this.node.getChildByName("contents").children.filter(function(e){return e.name.startsWith("stage")});e.forEach(function(e){e.active=!1}),e[0].active=!0},t.prototype.onToggleStep=function(e){this.node.getChildByName("contents").children.filter(function(e){return e.name.startsWith("stage")}).forEach(function(e){e.active=!1}),this.onShowStep(e)},t.prototype.onShowStep=function(e){var t=this.node.getChildByName("contents").children.filter(function(e){return e.name.startsWith("stage")}).find(function(t){return t.name==="stage"+e});return t?(t.active=!0,t):null},t.prototype.onDrawOutNMG=function(e){this._isDrawOutNMG||(this._isDrawOutNMG=!0,cc.tween(e).by(1,{x:720},{easing:"cubicInOut"}).start())},t.prototype.onCheckScissorsAndNMG=function(e){this.tempNMGNode&&this.nmgNode&&(this._isCutNMG||this.tempNMGNode.getBoundingBoxToWorld().intersects(e.getBoundingBoxToWorld())&&(this._scissorsNode=e,this._isCutNMG=!0,this.onPlayScissorsAndNMG()))},t.prototype.onPlayScissorsAndNMG=function(){var e=this;if(this._scissorsNode){var t=this._scissorsNode.getChildByName("right"),o=this._scissorsNode.getChildByName("left");cc.tween(t).sequence(cc.tween().to(.25,{angle:-20}),cc.tween().to(.25,{angle:0})).repeat(2).start(),cc.tween(o).sequence(cc.tween().to(.25,{angle:20}),cc.tween().to(.25,{angle:0})).repeat(2).start(),cc.tween(this._scissorsNode).by(1,{y:300}).call(function(){e._scissorsNode.parent.active=!1}).start(),this.tempNMGNode.active=!1,this.nmgNode.active=!0,this.nmgNode.x=this._scissorsNode.x+this.nmgNode.width/2,cc.tween(this.nmgNode).delay(1).to(1,{position:cc.v3(0,0)}).call(function(){e.onShowStep(3)}).start()}},t.prototype.onScissorsTouchEnd=function(e){this._isCutNMG||(this._scissorsNode=e,e.parent.getChildByName("icon").active=!0,this.onHiddenScissors())},t.prototype.onHiddenScissors=function(){this._scissorsNode&&(this._scissorsNode.active=!1)},t.prototype.onCheckSuctionPipeAndNMG=function(e){this.foldNMGNode&&(this._isInsertSuctionPipe||this.foldNMGNode.getBoundingBoxToWorld().intersects(e.getBoundingBoxToWorld())&&(this._suctionPipeNode=e,this._isInsertSuctionPipe=!0,this.onPlaySuctionPipeAndNMG()))},t.prototype.onPlaySuctionPipeAndNMG=function(){var e=this;cc.tween(this.foldNMGNode).to(1,{position:cc.v3(this._suctionPipeNode.getPosition().add(this._suctionPipeNode.parent.getPosition()).add(cc.v2(0,this._suctionPipeNode.height/2+this.foldNMGNode.height/2)))}).call(function(){e.foldNMGNode.parent=e._scissorsNode}).start(),cc.tween(this._suctionPipeNode).to(1,{position:cc.v3(0,309)}).call(function(){e._suctionPipeNode.parent.active=!1,e.onShowStep(4)}).start()},t.prototype.onVacuumHoseRelease=function(e){this._isInsertSuctionPipe||(this._suctionPipeNode=e,e.parent.getChildByName("icon").active=!0,this.onHiddenSuctionPipe())},t.prototype.onHiddenSuctionPipe=function(){this._suctionPipeNode&&(this._suctionPipeNode.active=!1)},t.prototype.onMoveNMGSuctionPipe=function(e){if(!this._isMoveNMGSuctionPipe){this._nmgSuctionPipeNode=e,this._isMoveNMGSuctionPipe=!0;var t=cc.v3(-125,-248);cc.tween(e).to(1,{position:t,angle:-30}).start()}},t.prototype.onBlowerProgressUp=function(e,t){this._blowerProgress>=this._progressTime||(this._blowerProgress+=t,e.getChildByName("progress").getChildByName("progress_bar").getComponent(cc.Sprite).fillRange=this._blowerProgress/this._progressTime,this._blowerProgress>=this._progressTime&&(e.active=!1,this.onShowStep(5)))},t.prototype.onMoveNMGToPump=function(e){var t=this;this._isMoveNMGToPump||(this._isMoveNMGToPump=!0,cc.tween(this._nmgSuctionPipeNode).to(1,{position:cc.v3(123,-128),angle:40}).call(function(){var o=t._nmgSuctionPipeNode.parent.convertToWorldSpaceAR(t._nmgSuctionPipeNode.getPosition());t._nmgSuctionPipeNode.parent=e,t._nmgSuctionPipeNode.setPosition(e.convertToNodeSpaceAR(o))}).start())},t.prototype.onPumpProgressUp=function(e,t){this._pumpProgress>=this._progressTime||(this._pumpProgress+=t,e.getChildByName("progress").getChildByName("progress_bar").getComponent(cc.Sprite).fillRange=this._pumpProgress/this._progressTime,this.ballNode.getChildByName("border").scale=this._pumpProgress/this._progressTime,this.ballNode.scale>=.1&&this._nmgSuctionPipeNode.removeAllChildren(),this._pumpProgress>=this._progressTime&&(e.active=!1,cc.tween(this.ballNode).to(1,{position:cc.Vec3.ZERO}).start(),this.onShowStep(6)))},t.prototype.onSelectColor=function(e){this.selectColor=e.color;for(var t=0,o=e.parent.children;t<o.length;t++)o[t].getChildByName("selected").active=!1;e.getChildByName("selected").active=!0,this.selectColor=e.color,this.ballNode.color=this.selectColor},t.prototype.onNextStep7=function(){this.onShowStep(7)},t.prototype.onInjectProgressUp=function(e,t){this._injectProgress>=this._progressTime||(this._injectProgress+=t,this.ballNode.color=this.selectColor,e.getChildByName("progress").getChildByName("progress_bar").getComponent(cc.Sprite).fillRange=this._injectProgress/this._progressTime,this.injectNode.getChildByName("push").getChildByName("liquid").color=this.selectColor,this.injectNode.getChildByName("push").getChildByName("liquid").getComponent(cc.Sprite).fillRange=1-this._injectProgress/this._progressTime,this.injectNode.getChildByName("push").y+=t*this.injectNode.getChildByName("push").getChildByName("liquid").height/this._progressTime,this.ballNode.getComponent(cc.Sprite).fillRange=this._injectProgress/this._progressTime,this._injectProgress>=this._progressTime&&(e.active=!1,this.onShowStep(8)))},t.prototype.onSelectHeadwear=function(e){if(this._selectHeadwearIndex==e.getSiblingIndex())return this._selectHeadwearIndex=-1,this.headwearNode.children.forEach(function(e){e.active=!1}),void(e.getChildByName("selected").active=!1);this._selectHeadwearIndex=e.getSiblingIndex(),this.headwearNode.children.forEach(function(e){e.active=!1}),this.headwearNode.children[this._selectHeadwearIndex].active=!0;for(var t=0,o=e.parent.children;t<o.length;t++)o[t].getChildByName("selected").active=!1;e.getChildByName("selected").active=!0},t.prototype.onSelectLimb=function(e){if(this._selectLimbIndex==e.getSiblingIndex())return this._selectLimbIndex=-1,this.limbNode.children.forEach(function(e){e.active=!1}),void(e.getChildByName("selected").active=!1);this._selectLimbIndex=e.getSiblingIndex();var t=e.parent.children;this.limbNode.children.forEach(function(e){e.active=!1}),this.limbNode.children[this._selectLimbIndex].active=!0;for(var o=0,n=t;o<n.length;o++)n[o].getChildByName("selected").active=!1;e.getChildByName("selected").active=!0},t.prototype.onSelectExpression=function(e){if(this._selectExpressionIndex==e.getSiblingIndex())return this._selectExpressionIndex=-1,this.expressionNode.children.forEach(function(e){e.active=!1}),void(e.getChildByName("selected").active=!1);this._selectExpressionIndex=e.getSiblingIndex(),this.expressionNode.children.forEach(function(e){e.active=!1}),this.expressionNode.children[this._selectExpressionIndex].active=!0;for(var t=0,o=e.parent.children;t<o.length;t++)o[t].getChildByName("selected").active=!1;e.getChildByName("selected").active=!0},t.prototype.onShowSelectData=function(){cc.log("\n        \u9009\u62e9\u7684\u989c\u8272\uff1a"+this.selectColor+"\n\n        \u9009\u62e9\u7684\u5934\u9970\uff1a"+(this._selectHeadwearIndex+1)+"\n\n        \u9009\u62e9\u7684\u56db\u80a2\uff1a"+(this._selectLimbIndex+1)+"\n\n        \u9009\u62e9\u7684\u8868\u60c5\uff1a"+(this._selectExpressionIndex+1)+"\n\n        ")},i([r({type:cc.Node,displayName:"\u8981\u526a\u7684\u7eb3\u7c73\u80f6\u8282\u70b9"})],t.prototype,"tempNMGNode",void 0),i([r({type:cc.Node,displayName:"\u7eb3\u7c73\u80f6\u8282\u70b9"})],t.prototype,"nmgNode",void 0),i([r({type:cc.Node,displayName:"\u6298\u53e0\u7eb3\u7c73\u80f6\u8282\u70b9"})],t.prototype,"foldNMGNode",void 0),i([r({type:cc.Node,displayName:"\u7403\u8282\u70b9"})],t.prototype,"ballNode",void 0),i([r({type:cc.Node,displayName:"\u6ce8\u5c04\u5668"})],t.prototype,"injectNode",void 0),i([r({type:cc.Node,displayName:"\u5934\u9970\u8282\u70b9"})],t.prototype,"headwearNode",void 0),i([r({type:cc.Node,displayName:"\u56db\u80a2\u8282\u70b9"})],t.prototype,"limbNode",void 0),i([r({type:cc.Node,displayName:"\u8868\u60c5\u8282\u70b9"})],t.prototype,"expressionNode",void 0),i([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],"307_1_Press":[function(e,t,o){"use strict";cc._RF.push(t,"0eaa3uAdvJLILVIf3Akj2Ux","307_1_Press");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventTarget=t.node,t.pressStartEvents=[],t.pressMoveEvents=[],t.pressEndEvents=[],t._isPress=!1,t}return n(t,e),t.prototype.onLoad=function(){this.eventTarget||(this.eventTarget=this.node),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.update=function(e){this._isPress&&cc.Component.EventHandler.emitEvents(this.pressMoveEvents,this.eventTarget,e)},t.prototype.onTouchStart=function(e){this._isPress=!0,cc.Component.EventHandler.emitEvents(this.pressStartEvents,this.eventTarget,e)},t.prototype.onTouchEnd=function(e){this._isPress=!1,cc.Component.EventHandler.emitEvents(this.pressEndEvents,this.eventTarget,e)},i([r(cc.Node)],t.prototype,"eventTarget",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u6309\u538b\u5f00\u59cb\u4e8b\u4ef6"})],t.prototype,"pressStartEvents",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u6309\u538b\u4e2d\u4e8b\u4ef6"})],t.prototype,"pressMoveEvents",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u6309\u538b\u7ed3\u675f\u4e8b\u4ef6"})],t.prototype,"pressEndEvents",void 0),i([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],"307_1_Show_Hidden":[function(e,t,o){"use strict";cc._RF.push(t,"5805cqwhhlD+4qtsS3qL3ro","307_1_Show_Hidden");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventTarget=t.node,t.showEvents=[],t.hiddenEvents=[],t}return n(t,e),t.prototype.onLoad=function(){this.eventTarget||(this.eventTarget=this.node)},t.prototype.onEnable=function(){cc.Component.EventHandler.emitEvents(this.showEvents,this.eventTarget)},t.prototype.onDisable=function(){cc.Component.EventHandler.emitEvents(this.hiddenEvents,this.eventTarget)},t.prototype.onShow=function(){this.eventTarget||(this.eventTarget=this.node),this.node.active=!0},t.prototype.onHidden=function(){this.node.active=!1},i([r({type:cc.Node,displayName:"\u663e\u793a&\u9690\u85cf\u4e8b\u4ef6\u5bf9\u8c61"})],t.prototype,"eventTarget",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u663e\u793a\u4e8b\u4ef6"})],t.prototype,"showEvents",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u9690\u85cf\u4e8b\u4ef6"})],t.prototype,"hiddenEvents",void 0),i([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],"307_1_Slide":[function(e,t,o){"use strict";cc._RF.push(t,"50cf8MIZJBJdIdBQCTV900M","307_1_Slide");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,r=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slideRange=null,t.slideDistance=20,t.direction=0,t.eventTargets=[],t.slideEvents=[],t.slideEndEvents=[],t._isSlide=!1,t}return n(t,e),t.prototype.onLoad=function(){this.slideRange||(this.slideRange=this.node),this.slideRange.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.slideRange.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.slideRange.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.onTouchMove=function(e){switch(this.direction){case 0:if(Math.abs(e.getDelta().x)<Math.abs(e.getDelta().y))return;if(this.slideDistance>0?e.getDelta().x<this.slideDistance:e.getDelta().x>this.slideDistance)return;break;case 1:if(Math.abs(e.getDelta().x)>Math.abs(e.getDelta().y))return;if(this.slideDistance>0?e.getDelta().y<this.slideDistance:e.getDelta().y>this.slideDistance)return;break;case 2:if(Math.abs(e.getDelta().x)<this.slideDistance&&Math.abs(e.getDelta().y)<this.slideDistance)return}this._isSlide=!0;for(var t=0,o=this.eventTargets;t<o.length;t++){var n=o[t];cc.Component.EventHandler.emitEvents(this.slideEvents,n,e)}},t.prototype.onTouchEnd=function(e){if(this._isSlide){this._isSlide=!1;for(var t=0,o=this.eventTargets;t<o.length;t++){var n=o[t];cc.Component.EventHandler.emitEvents(this.slideEndEvents,n,e)}}},i([r({type:cc.Node,displayName:"\u6ed1\u52a8\u8303\u56f4"})],t.prototype,"slideRange",void 0),i([r({type:cc.Float,displayName:"\u6ed1\u52a8\u89e6\u53d1\u8ddd\u79bb"})],t.prototype,"slideDistance",void 0),i([r({type:cc.Enum({Horizontal:0,Verticl:1,Any:2}),displayName:"\u65b9\u5411"})],t.prototype,"direction",void 0),i([r({type:[cc.Node],displayName:"\u4e8b\u4ef6\u5bf9\u8c61\u76ee\u6807"})],t.prototype,"eventTargets",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u6ed1\u52a8\u4e8b\u4ef6"})],t.prototype,"slideEvents",void 0),i([r({type:[cc.Component.EventHandler],displayName:"\u6ed1\u52a8\u7ed3\u675f\u4e8b\u4ef6"})],t.prototype,"slideEndEvents",void 0),i([c],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],"307_1_Tap":[function(e,t,o){"use strict";cc._RF.push(t,"b7e8bCQMktOM5kLxkAHQUaO","307_1_Tap");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=e("AudioManager"),c=cc._decorator,r=c.ccclass,a=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventTarget=t.node,t.tapEvents=[],t}return n(t,e),t.prototype.onLoad=function(){this.eventTarget||(this.eventTarget=this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchEnd=function(e){s.default.playEffect(s.default.audioName.BUTTON),cc.Component.EventHandler.emitEvents(this.tapEvents,this.eventTarget,e)},i([a(cc.Node)],t.prototype,"eventTarget",void 0),i([a({type:[cc.Component.EventHandler],displayName:"\u70b9\u51fb\u4e8b\u4ef6"})],t.prototype,"tapEvents",void 0),i([r],t)}(cc.Component);o.default=d,cc._RF.pop()},{AudioManager:void 0}],"307_2_LevelCtrl":[function(e,t,o){"use strict";cc._RF.push(t,"c19fcKCZzNMWZ5gPEqzRQIJ","307_2_LevelCtrl");var n=__extends,i=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=e("LevelCtrl_CommonResult"),c=e("AudioManager"),r=e("307_1_LevelCtrl"),a=cc._decorator,d=a.ccclass,p=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectColor=cc.color(198,2,125),t.selectDecorate=cc.v3(0,0,0),t.light=null,t}return n(t,e),t.prototype.onInjectProgressUp=function(e,t){var o=this;if(!(this._injectProgress>=this._progressTime)&&(this._injectProgress+=t,this.ballNode.color=this.selectColor,e.getChildByName("progress").getChildByName("progress_bar").getComponent(cc.Sprite).fillRange=this._injectProgress/this._progressTime,this.injectNode.getChildByName("push").getChildByName("liquid").color=this.selectColor,this.injectNode.getChildByName("push").getChildByName("liquid").getComponent(cc.Sprite).fillRange=1-this._injectProgress/this._progressTime,this.injectNode.getChildByName("push").y+=t*this.injectNode.getChildByName("push").getChildByName("liquid").height/this._progressTime,this.ballNode.getComponent(cc.Sprite).fillRange=this._injectProgress/this._progressTime,this._injectProgress>=this._progressTime)){e.active=!1;var n=this.onShowStep(7);if(!n)return;var i=n.getChildByName("tools"),r=i.getChildByName("pen"),a=n.getChildByName("title").getComponent(cc.Label);n.getChildByName("scene");var d=function(e,t){if(!(e<1)){var o=cc.instantiate(t.children[e-1]);return o.parent=i,o.setPosition(cc.v3(0,0)),o.active=!1,o}},p=function(e){return new Promise(function(t){if(!e)return t();e.x-=100,e.opacity=0,e.active=!0,cc.tween(e).to(.5,{x:0,opacity:255},{easing:cc.easing.fade}).call(t).start()})},l=function(e){return new Promise(function(t){if(!e)return t();e.setPosition(cc.v3(0,0)),cc.tween(e).to(.5,{x:100,opacity:0},{easing:cc.easing.fade}).call(function(){t(),e.active=!1}).start()})};r.active=!1;var h=d(this.selectDecorate.x,this.headwearNode),u=d(this.selectDecorate.y,this.limbNode);u.scale=.5,a.string="\u6ed1\u51fa\u5934\u9970\uff0c\u7ed9\u6ce1\u6ce1\u6234\u4e0a",p(h).then(function(){return o.onInjectToolDrag(h,o.ballNode)}).then(function(e){return e(),o.onShowHeadWear(),l(h)}).then(function(){return a.string="\u7ed9\u6ce1\u6ce1\u6362\u4e0a\u56db\u80a2\u5427",p(u)}).then(function(){return o.onInjectToolDrag(u,o.ballNode)}).then(function(e){return e(),o.onShowLimbs(),l(u)}).then(function(){return a.string="\u7ed9\u6ce1\u6ce1\u753b\u4e0a\u8868\u60c5\u5427",p(r)}).then(function(){return o.onInjectToolDrag(r,o.ballNode)}).then(function(e){return e(),o.onShowFace(r)}).then(function(){return l(r)}).then(function(){return a.string="\u6ce1\u6ce1\u7684\u88c5\u626e\u5b8c\u6210\u5566",new Promise(function(e){i.active=!1;var t=n.parent,s=t.children.slice();t.getComponent(cc.Sprite).enabled=!0;var r=new cc.Node("light");r.parent=t,r.setPosition(cc.v3(0,0)),r.addComponent(cc.Sprite).spriteFrame=o.light,r.zIndex=-1,c.default.playEffect(c.default.audioName.CLEAN_OVER),cc.tween(r).to(.5,{scale:2},{easing:cc.easing.backOut}).call(function(){cc.tween(r).to(2,{angle:360}).set({angle:0}).union().repeatForever().start()}).start();for(var a=0,d=s;a<d.length;a++){var p=d[a];cc.tween(p).to(.5,{scale:1.1},{easing:cc.easing.backOut}).start()}o.scheduleOnce(function(){e()},3.5)})}).then(function(){o.node.getComponent(s.default).onGameSucc()})}},t.prototype.onInjectToolDrag=function(e,t){return new Promise(function(o){var n=function(t){e.setPosition(e.getPosition().add(t.getDelta().mul(.6666666666666666)))},i=function(){e.off(cc.Node.EventType.TOUCH_MOVE,n),e.off(cc.Node.EventType.TOUCH_END,s),e.off(cc.Node.EventType.TOUCH_CANCEL,s)},s=function(){t.getBoundingBoxToWorld().contains(e.convertToWorldSpaceAR(cc.v2(0,0)))?o(i):cc.tween(e).then(e.position.mag()>50?cc.tween().to(.1,{angle:5}).to(.2,{angle:-5}).to(.1,{angle:0}):cc.tween().delay(0)).to(.5,{position:cc.v3(0,0)},{easing:cc.easing.backOut}).start()};e.on(cc.Node.EventType.TOUCH_MOVE,n),e.on(cc.Node.EventType.TOUCH_END,s),e.on(cc.Node.EventType.TOUCH_CANCEL,s)})},t.prototype.onShowHeadWear=function(){if(!(this.selectDecorate.x<1)){this.headwearNode.children.forEach(function(e){e.active=!1});var e=this.headwearNode.children[this.selectDecorate.x-1];e.opacity=0,e.y+=100,e.active=!0,cc.tween(e).by(.5,{y:-100,opacity:255},{easing:cc.easing.fade}).start()}},t.prototype.onShowLimbs=function(){if(!(this.selectDecorate.y<1)){this.limbNode.children.forEach(function(e){e.active=!1});var e=this.limbNode.children[this.selectDecorate.y-1];e.opacity=0,e.y-=100,e.active=!0,cc.tween(e).by(.5,{y:100,opacity:255},{easing:cc.easing.fade}).start()}},t.prototype.onShowFace=function(e){var t=this;return new Promise(function(o){if(!(t.selectDecorate.z<1)){t.expressionNode.children.forEach(function(e){e.active=!1});var n=t.expressionNode.children[t.selectDecorate.z-1],i=t.expressionNode.getComponent(cc.Mask),s=i._graphics,c=e.getChildByName("anchor");s.clear(),n.active=!0;for(var r=function(e,t,o,n){o=e.lerp(t,n);var r=c.convertToWorldSpaceAR(cc.v3(0,0)),a=i.node.convertToNodeSpaceAR(r);return s.circle(a.x,a.y,50),s.fill(),o},a=[],d=!0,p=-i.node.width/2;p<i.node.width/2;p+=25){var l=cc.v2(p,d?i.node.height/2:-i.node.height/2),h=e.parent.convertToNodeSpaceAR(i.node.convertToWorldSpaceAR(l)).sub(c.getPosition());a.push(h),d=!d}var u=cc.v2(i.node.width/2,0),g=e.parent.convertToNodeSpaceAR(i.node.convertToWorldSpaceAR(u)).sub(c.getPosition());a.push(g);var v=a.map(function(e,t){return t<1?0:a[t].sub(a[t-1]).mag()/750}),_=a.reduce(function(e,t,o){return o<1?cc.tween().set({position:a[o]}):e.then(cc.tween().to(v[o],{position:t},{progress:r}))},cc.tween());cc.tween(e).then(_).call(function(){o()}).start()}})},i([p({})],t.prototype,"selectColor",void 0),i([p({})],t.prototype,"selectDecorate",void 0),i([p({type:cc.SpriteFrame})],t.prototype,"light",void 0),i([d],t)}(r.default);o.default=l,cc._RF.pop()},{"307_1_LevelCtrl":"307_1_LevelCtrl",AudioManager:void 0,LevelCtrl_CommonResult:void 0}]},{},["307_1_Drag","307_1_Press","307_1_Show_Hidden","307_1_Slide","307_1_Tap","307_1_LevelCtrl","307_2_LevelCtrl"]);
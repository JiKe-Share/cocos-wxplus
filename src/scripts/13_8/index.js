window.__require=function t(e,c,s){function i(n,r){if(!c[n]){if(!e[n]){var a=n.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+n+"'")}n=a}var h=c[n]={exports:{}};e[n][0].call(h.exports,function(t){return i(e[n][1][t]||t)},h,h.exports,t,e,c,s)}return c[n].exports}for(var o="function"==typeof __require&&__require,n=0;n<s.length;n++)i(s[n]);return i}({clean1:[function(t,e,c){"use strict";cc._RF.push(e,"def5aXx/XlGXJzxdeTNDgHa","clean1");var s=__extends,i=__decorate;Object.defineProperty(c,"__esModule",{value:!0});var o=t("Game"),n=t("AudioManager"),r=cc._decorator,a=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.process=[],e.title=[],e.clean=null,e.cleanRect=null,e.cleanMask=null,e.clean_bar=null,e.sizenode=null,e.title_lable=null,e.currect=null,e.successEffectNode=null,e.currpro=0,e.startposX=0,e.startposY=-400,e.currnum=0,e.cleanpos=[],e.cleamposnum=0,e.titlelable=["\u6b65\u9aa41\uff1a\u522e\u75e7","\u6b65\u9aa42\uff1a\u7528\u6c34\u6e05\u6d17","\u6b65\u9aa43\uff1a\u7ee7\u7eed\u522e\u75e7","\u6b65\u9aa44\uff1a\u7b2c\u4e8c\u904d\u6e05\u6d17","\u6b65\u9aa45\uff1a\u6d82\u62b9\u6ce1\u6cab","\u6b65\u9aa46\uff1a\u5237\u5b50\u5237","\u6b65\u9aa47\uff1a\u9ebb\u5e03\u6e05\u6d01\u5b8c"],e.CAT_2="cat_2",e.isrect=!0,e.car_time3=3,e.localtime=0,e}var c;return s(e,t),c=e,e.prototype.onLoad=function(){this.updateTask(),this.titlelable=this.title},e.prototype.updateTask=function(){if(this.currpro>=this.process.length)this.clean.active=!1;else{this.clean_bar.getComponent(cc.ProgressBar).progress=0,this.clean=this.process[this.currpro].getChildByName("gongju"),this.cleanRect=this.clean.children[1],this.clean.on(cc.Node.EventType.TOUCH_START,this.CleanTouchStart,this),this.clean.on(cc.Node.EventType.TOUCH_MOVE,this.CleanTouchMove,this),this.clean.on(cc.Node.EventType.TOUCH_END,this.CleanTouchEnd,this),this.clean.zIndex=cc.macro.MAX_ZINDEX;var t=this.sizenode.width,e=this.sizenode.height;this.cleanpos=[],this.cleamposnum=0;for(var s=this.cleanRect.width/4,i=0;i<t/s;i++)for(var o=0;o<e/s;o++){var n=cc.v2(-t/2+s*i,e/2-s*o),r=this.process[this.currpro].getChildByName("mask").getComponent(cc.PolygonCollider).points;c.containsPoint(n.x,n.y,r)&&this.cleanpos.push(n)}}},e.containsPoint=function(t,e,c){for(var s=c.length,i=0,o=0;o<s;++o){var n=c[o].x,r=c[o].y,a=c[(o+1)%s].x,l=c[(o+1)%s].y;r!=l&&(e<Math.min(r,l)||e>=Math.max(r,l)||(e-r)*(a-n)/(l-r)+n>t&&i++)}return i%2==1},e.prototype.start=function(){this.UpProcess()},e.prototype.CleanTouchStart=function(){n.default.playEffect(this.CAT_2,!0)},e.prototype.CleanTouchMove=function(t){this.clean.x+=t.getDeltaX()/this.sizenode.scaleX,this.clean.y+=t.getDeltaY()/this.sizenode.scaleY;var e=this.clean.x+this.cleanRect.x,c=this.clean.y+this.cleanRect.y;this._addCircle(cc.v2(e,c),this.cleanRect.width,this.cleanRect.height,this.cleanMask),this.clean.children[0].active=!0;for(var s=0;s<this.cleanpos.length;s++)if(this.cleanpos[s]){var i=this.clean.x+this.cleanRect.x,o=this.clean.y+this.cleanRect.y;this.rectToPoints(this.cleanpos[s],cc.v2(i,o),this.cleanRect.width,this.cleanRect.height)&&(this.cleamposnum+=1,this.cleanpos[s]=null,this.cleamposnum>this.cleanpos.length/10*9?this.clean_bar.getComponent(cc.ProgressBar).progress=1:this.clean_bar.getComponent(cc.ProgressBar).progress=this.cleamposnum/(this.cleanpos.length/10*9))}},e.prototype.CleanTouchEnd=function(){cc.audioEngine.stopAllEffects(),this.clean.x=this.startposX,this.clean.y=this.startposY,this.clean.children[0].active=!1,this.cleamposnum>this.cleanpos.length/10*9&&(this.cleanMask.active=!1,this.currpro++,this.updateTask(),this.UpProcess(),this.CleanOff())},e.prototype.CleanOff=function(){var t=this;this.currect.active=!0,this.scheduleOnce(function(){t.currect.active=!1},.5)},e.prototype.UpProcess=function(){var t=this;if(this.currpro>=this.process.length){this.successEffectNode.active=!0;for(var e=function(){var e=50*s,i=s;c.scheduleOnce(function(){t.successEffectNode.children[i].active=!0},.001*e)},c=this,s=0;s<this.successEffectNode.childrenCount;s++)e();this.scheduleOnce(this.onGameSucc,2)}else{this.currnum=0;for(var i=0;i<this.process.length;i++)i==this.currpro?(this.process[i].active=!0,this.process[i].getChildByName("gongju").x=-2e3,this.currnum=i,this.cleanMask=this.process[this.currnum].getChildByName("mask"),cc.tween(this.process[i].getChildByName("gongju")).to(1,{position:cc.v3(0,this.process[i].getChildByName("gongju").y)}).start()):i<this.currpro&&(this.process[i].active=!1);this.title_lable&&(this.title_lable.getComponent(cc.Label).string=this.titlelable[this.currpro])}},e.prototype.onGameSucc=function(){cc.find("Canvas/game").getComponent(o.default).answerCrrect({position:cc.Vec2.ZERO,show:!0})},e.prototype._addCircle=function(t,e,c,s){var i=s.getComponent(cc.Mask)._graphics,o=cc.color(0,0,0,255);i.circle(t.x,t.y,e),i.lineWidth=2,i.fillColor=o,i.fill()},e.prototype.rectToPoints=function(t,e,c,s){return t.x>e.x-c&&t.x<e.x+c&&t.y>e.y-s&&t.y<e.y+s},i([l([cc.Node])],e.prototype,"process",void 0),i([l([cc.String])],e.prototype,"title",void 0),i([l(cc.Node)],e.prototype,"clean_bar",void 0),i([l(cc.Node)],e.prototype,"sizenode",void 0),i([l(cc.Node)],e.prototype,"title_lable",void 0),i([l(cc.Node)],e.prototype,"currect",void 0),i([l(cc.Node)],e.prototype,"successEffectNode",void 0),c=i([a],e)}(cc.Component);c.default=h,cc._RF.pop()},{AudioManager:void 0,Game:void 0}]},{},["clean1"]);
window.__require=function t(e,c,o){function i(s,l){if(!c[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!l&&h)return h(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var r=c[s]={exports:{}};e[s][0].call(r.exports,function(t){return i(e[s][1][t]||t)},r,r.exports,t,e,c,o)}return c[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({lv501_14_Ctrl:[function(t,e,c){"use strict";cc._RF.push(e,"e3b5e1CmL1KSo0ZuH97zJUi","lv501_14_Ctrl");var o=__extends,i=__decorate;Object.defineProperty(c,"__esModule",{value:!0});var n=t("Game"),s=t("AssetManager"),l=t("AudioManager"),a=cc._decorator,h=a.ccclass,r=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tasklist=null,e.titlelist=[],e.dd=null,e.successnum=9,e.localnum=0,e.plan=0,e.cleanpos=[],e.cleamposnum=0,e.progressBar=null,e.node_splash=null,e.node_ef_stars=null,e.sccliz=null,e.szcount=1,e.isworking=!1,e.bq=null,e.isplay=!1,e.count=0,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.node.opacity=0,s.default.loadSoundEffect_fileDir("AudioClip/lv_501/14",function(){t.node&&(t.node.opacity=255)}),this.dd=this.node.getChildByName("dd"),this.title=this.node.getChildByName("title"),this.progressBar=this.node.getChildByName("progressBar").getComponent(cc.ProgressBar),this.node_ef_stars=this.node.getChildByName("ef_stars"),this.sccliz=this.node.getChildByName("success"),this.node_splash=this.node.getChildByName("splash"),this.UpNode(),cc.sys.isBrowser&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){e.keyCode==cc.macro.KEY.space&&(t.plan++,t.UpNode())},this)},e.prototype.UpNode=function(){for(var t=0;t<this.tasklist.childrenCount;t++)t==this.plan?this.tasklist.children[t].active=!0:this.tasklist.children[t].active=!1;if(this.title.getComponent(cc.Label).string=this.titlelist[this.plan],this.toolNode=this.tasklist.children[this.plan].getChildByName("tool"),this.tool=this.toolNode.getChildByName("tool"),this.mask=this.tasklist.children[this.plan].getChildByName("mask"),this.rect=this.tasklist.children[this.plan].getChildByName("rect"),2!=this.plan)if(7==this.plan?(this.startpos=this.tool.children[0].position,this.startpos1=this.tool.children[1].position):this.startpos=this.tool.position,this.tool.getChildByName("icon")&&(this.icon=this.tool.getChildByName("icon"),this.icon.active=!1),8!=this.plan){if(cc.tween(this.toolNode).to(.5,{position:cc.v3(0,0)}).start(),7==this.plan)for(var e=0;e<this.tool.childrenCount;e++){var c=this.tool.children[e];c.scale=1,c.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),c.on(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),c.on(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),c.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)}else 4==this.plan?this.tool.scale=.8:this.tool.scale=1,this.tool.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.on(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.on(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this);if(3==this.plan){this.cleanpos=[],this.cleamposnum=0;var o=this.tool.children[0].width/4;for(t=0;t<720/o;t++)for(var i=0;i<1280/o;i++){var n=cc.v2(o*t-360,640-o*i),s=this.mask.getComponent(cc.PolygonCollider).points;this.containsPoint(n.x,n.y,s)&&this.cleanpos.push(n)}}}else this.Mission9Handler();else this.Task3Func()},e.prototype.TouchStart=function(t){this.isworking||(this.icon&&(this.icon.active=!0),4==this.plan?t.target.scale=1:t.target.scale=1.2,l.default.playEffect(l.default.audioName.BUTTON),this.toolNode.getChildByName("tool_icon")&&(this.toolNode.getChildByName("tool_icon").active=!1))},e.prototype.TouchSMove=function(t){if(!this.isworking){var e=this.node.convertToNodeSpaceAR(t.getLocation());7==this.plan?t.target.setPosition(e):this.tool.setPosition(this.tool.getPosition().add(t.getDelta().mul(.6666666666666666))),3==this.plan&&(this.tool.children[0].active=!0),this.localnum,this.successnum}},e.prototype.BtnOffClick=function(){if(0==this.plan)for(var t=0;t<this.tool.childrenCount;t++){var e=this.tool.children[t];e.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),e.off(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),e.off(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),e.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)}else this.tool.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.off(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.off(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)},e.prototype.TouchSEnd=function(t){this.isworking||(4==this.plan&&(t.target.scale=.8),t.target.scale=1,this.rectrect(t.target,this.rect)?(0==this.plan&&this.Task1Func(),7==this.plan&&(t.target.active=!1,this.Mission8Handler()),6==this.plan&&(t.target.active=!1,this.Task7Func()),4==this.plan&&(t.target.active=!1,this.Task5Func()),5==this.plan&&(t.target.active=!1,this.Task6Func()),3==this.plan&&(t.target.active=!1,this.Task4Func())):7==this.plan?(this.tool.children[0].position=this.startpos,this.tool.children[1].position=this.startpos1):this.tool.position=this.startpos)},e.prototype.task1cctw=function(t){cc.tween(t).to(.2,{scale:1.2}).to(.2,{scale:1}).call(function(){}).start()},e.prototype.Task1Func=function(){var t=this,e=[cc.v2(-100,-160),cc.v2(-18,-40),cc.v2(150,-135)];this.isworking=!0;var c=this.rect.parent.getChildByName("mask1");cc.tween(this.tool).to(.5,{position:cc.v3(e[0])}).call(function(){t.updateMsk1(c,t.tool.children[0]),t.task1cctw(c.children[0]),t.playaudio("lv501_14_1"),t.scheduleOnce(function(){cc.tween(t.tool).to(.5,{position:cc.v3(e[1])}).call(function(){t.task1cctw(c.children[1]),t.updateMsk1(c,t.tool.children[0]),t.playaudio("lv501_14_1"),t.scheduleOnce(function(){cc.tween(t.tool).to(.5,{position:cc.v3(e[2])}).call(function(){t.task1cctw(c.children[2]),t.playaudio("lv501_14_1"),t.updateMsk1(c,t.tool.children[0]),t.scheduleOnce(function(){t.successnum=0,t.tool.position=t.startpos,t.updateMsk1(c,t.tool.children[0]),t.showbiaoqing(t.rect.parent.getChildByName("qipao")),t.scheduleOnce(function(){t.SuccessFunc()},1.5),t.isworking=!1},1)}).start()},.6)}).start()},.6)}).start()},e.prototype.playaudio=function(t){cc.audioEngine.stopAllEffects(),l.default.playEffect(t)},e.prototype.Task3Func=function(){var t=this;cc.tween(this.mask.children[0]).to(.5,{y:-50}).call(function(){t.mask.children[0].active=!1}).start(),cc.tween(this.mask.children[1]).to(.5,{y:50}).call(function(){t.playaudio("lv501_14_2"),t.mask.children[1].active=!1}).start(),this.scheduleOnce(function(){t.rect.active=!0,t.playcctw(t.rect.children[0]),t.playcctw(t.rect.children[1]),t.playcctw(t.rect.children[2]),t.scheduleOnce(function(){cc.tween(t.rect).delay(1).to(.5,{x:800}).call(function(){t.successnum=0,t.SuccessFunc()}).start(),t.rect.getChildByName("success").active=!1,cc.tween(t.mask).delay(1).to(.5,{x:800}).call(function(){}).start()},1.5)},.5)},e.prototype.playcctw=function(t){t.scale=0,cc.tween(t).to(1,{scale:1}).call(function(){}).start()},e.prototype.Task4Func=function(){var t=this,e=this.rect.parent.getChildByName("action").getComponent(cc.Animation);e.node.active=!0,e.play(),this.successnum=0,cc.tween(this.mask.children[0]).to(2,{opacity:255}).delay(1).call(function(){}).start(),this.playaudio("lv501_14_4"),cc.tween(this.rect.children[0]).to(2,{opacity:130}).delay(1).call(function(){t.tool.position=t.startpos,t.SuccessFunc()}).start()},e.prototype.Task5Func=function(){var t=this;this.successnum=0;var e=this.rect.parent.getChildByName("action");e.active=!0,e.scale=1.1,cc.tween(e).to(.5,{scale:1}).call(function(){l.default.playEffect("lv501_fang"),cc.tween(t.mask).to(.5,{opacity:0}).call(function(){t.SuccessFunc()}).start()}).start()},e.prototype.Task6Func=function(){var t=this,e=this.rect.parent.getChildByName("action");e.active=!0,this.successnum=0,this.playaudio("lv501_14_3"),cc.tween(e.children[0]).to(1,{height:0}).call(function(){t.SuccessFunc()}).start(),cc.tween(this.mask).to(1,{opacity:255}).call(function(){}).start()},e.prototype.Task7Func=function(){var t=this,e=this.rect.parent.getChildByName("action").getComponent(cc.Animation);e.node.active=!0,this.playaudio("lv501_14_5"),e.play(),this.successnum=0,cc.tween(this.mask.children[0]).to(2,{opacity:255}).delay(1).call(function(){t.SuccessFunc()}).start()},e.prototype.Mission8Handler=function(){this.successnum=2,this.mask.children[this.localnum].active=!0,this.localnum++,l.default.playEffect("lv501_fang"),this.SuccessFunc()},e.prototype.Mission9Handler=function(){var t=this,e=this.rect.getChildByName("jindu").children[0],c=this.rect.getChildByName("shijian"),o=this.mask.getChildByName("1").getChildByName("action1"),i=this.mask.getChildByName("2");this.successnum=0,cc.tween(this.rect).to(.5,{position:cc.v3(0,0)}).call(function(){cc.tween(c).to(.2,{angle:15}).to(.2,{angle:-15}).to(.1,{angle:0}).call(function(){t.rect.getComponent(cc.Animation).play(),t.playaudio("lv501_14_8"),cc.tween(c).to(3,{y:-180}).start(),cc.tween(o).to(3,{opacity:255}).start(),o.active=!0,cc.tween(e).to(3,{scaleY:0}).call(function(){t.rect.getComponent(cc.Animation).stop(),cc.tween(t.rect.getChildByName("shijian")).to(.2,{angle:15}).to(.2,{angle:-15}).to(.1,{angle:0}).call(function(){t.mask.getChildByName("1").active=!1,o.opacity=255,i.active=!0,cc.tween(i).to(.5,{y:200,opacity:0}).call(function(){t.scheduleOnce(function(){t.mask.getChildByName("3").active=!0,t.SuccessFunc()},.5)}).start()}).start()}).start()}).start()}).start()},e.prototype.SuccessFunc=function(){var t=this;this.successnum==this.localnum&&(this.BtnOffClick(),this.plan+=1,1!=this.plan&&3!=this.plan||l.default.playEffect("lv501_14_7"),this.localnum=0,this.progressBar.node.opacity=0,this.plan==this.tasklist.childrenCount?(this.node_ef_stars.active=!0,this.playaudio("lv501_14_2"),cc.tween(this.toolNode).to(.5,{position:cc.v3(800,0)}).call(function(){t.scheduleOnce(function(){t.GameWin()},1.5)}).start()):1==this.plan||3==this.plan?(cc.tween(this.toolNode).to(.5,{position:cc.v3(800,0)}).call(function(){t.UpNode()}).start(),this.scheduleOnce(function(){t.showSplash()},.5)):cc.tween(this.toolNode).to(.5,{position:cc.v3(800,0)}).call(function(){t.UpNode()}).start())},e.prototype.containsPoint=function(t,e,c){for(var o=c.length,i=0,n=0;n<o;++n){var s=c[n].x,l=c[n].y,a=c[(n+1)%o].x,h=c[(n+1)%o].y;l!=h&&(e<Math.min(l,h)||e>=Math.max(l,h)||(e-l)*(a-s)/(h-l)+s>t&&i++)}return i%2==1},e.prototype.rectToPoints=function(t,e,c,o){return t.x>e.x-c&&t.x<e.x+c&&t.y>e.y-o&&t.y<e.y+o},e.prototype._addCircle=function(t,e,c,o){var i=o.getComponent(cc.Mask)._graphics,n=cc.color(0,0,0,255);i.circle(t.x,t.y,e),i.lineWidth=2,i.fillColor=n,i.fill()},e.prototype.GameWin=function(){var t=this;l.default.playEffect(l.default.audioName.CRRECT),cc.tween(this.dd).to(1,{opacity:255,scale:1}).delay(.5).call(function(){t.dd.scale=0,cc.find("Canvas/game").getComponent(n.default).showResultLayer()}).start()},e.prototype.rectrect=function(t,e){var c=t.getBoundingBoxToWorld(),o=e.getBoundingBoxToWorld();return!!cc.Intersection.rectRect(o,c)},e.prototype.showbiaoqing=function(t){this.playaudio("lv501_14_6"),t.active=!0,t.scale=0,t.opacity=100,cc.tween(t).to(.5,{scale:1,opacity:255}).delay(.5).to(.2,{scale:1.2,opacity:255}).to(.2,{scale:1,opacity:255}).delay(1).call(function(){t.active=!1}).start()},e.prototype.showSplash=function(){cc.Tween.stopAllByTarget(this.node_splash),this.node_splash.opacity=255,cc.tween(this.node_splash).to(1,{opacity:0},{easing:"fade"}).start()},e.prototype.onRefreshProgressBar=function(t){this.progressBar.progress=t,this.progressBar.node.opacity=255},e.prototype.updateMsk1=function(t,e){var c=t.getComponent(cc.Mask)._graphics;c.clear(),c.fillColor=cc.Color.BLACK;var o=this.tool.parent.convertToNodeSpaceAR(this.tool.convertToWorldSpaceAR(cc.v2(0,0)));c.circle(o.x+e.x,o.y+e.y,45),c.fill()},e.prototype.convetOtherNodeSpaceAR=function(t,e){if(!t||!e)return null;var c=t.convertToWorldSpaceAR(cc.v2(0,0));return e.convertToNodeSpaceAR(c)},e.prototype.transformToWorldSpaceAR=function(t,e){return e?e.convertToNodeSpaceAR(t):null},i([r(cc.Node)],e.prototype,"tasklist",void 0),i([r([cc.String])],e.prototype,"titlelist",void 0),i([r],e.prototype,"isworking",void 0),i([r(cc.Node)],e.prototype,"bq",void 0),i([h],e)}(cc.Component);c.default=p,cc._RF.pop()},{AssetManager:void 0,AudioManager:void 0,Game:void 0}],lv501_14_move:[function(t,e,c){"use strict";cc._RF.push(e,"78bc7xsf5FJqaxG3h7rmrtW","lv501_14_move");var o=__extends,i=__decorate;Object.defineProperty(c,"__esModule",{value:!0});var n=t("AudioManager"),s=t("lv501_14_task2"),l=cc._decorator,a=l.ccclass,h=l.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scriptsParent=null,e.type=0,e.level=null,e.isxj=!1,e}return o(e,t),e.prototype.onLoad=function(){this.level=this.scriptsParent.getComponent(s.default),this.BtnOnClick()},e.prototype.init=function(){},e.prototype.BtnOnClick=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.TouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.TouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchEnd,this)},e.prototype.BtnOffClick=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.TouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.TouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchEnd,this)},e.prototype.TouchStart=function(t){this.level.icon.active=!0,this.level.icon.position=this.node.parent.parent.convertToNodeSpaceAR(t.getLocation()),this.type<=2?this.level.icon.getComponent(cc.Sprite).spriteFrame=this.level.movesp[0]:this.level.icon.getComponent(cc.Sprite).spriteFrame=this.level.movesp[this.type-2],n.default.playEffect(n.default.audioName.BUTTON),this.node.opacity=0},e.prototype.TouchMove=function(t){this.level.icon.position=this.node.parent.parent.convertToNodeSpaceAR(t.getLocation()),this.rectrect()?this.playanim():this.type<=2?(this.level.kuang.children[this.level.count].children[1].active=!1,this.isxj=!1):(this.level.kuang.children[this.type].children[1].active=!1,this.isxj=!1)},e.prototype.TouchEnd=function(){var t=this;this.rectrect()&&(3==this.type?(this.level.kuang.children[this.type].children[1].active=!0,this.level.kuang.children[this.type].children[2].active=!0,this.node.active=!1,this.level.icon.active=!1,cc.tween(this.level.kuang.children[this.type].children[2]).to(.2,{scale:1.2}).to(.3,{scale:.6}).call(function(){t.level.kuang.children[t.type].children[2].active=!1,t.level.scc()}).start()):5==this.type?(this.level.kuang.children[this.type].children[1].active=!0,this.level.icon.active=!1,this.node.active=!1,cc.tween(this.level.kuang.children[this.type].children[1]).to(.2,{scale:1.4}).to(.3,{scale:1}).call(function(){t.level.scc()}).start()):this.type<=2?(this.level.kuang.children[this.level.count].children[1].active=!0,this.node.active=!1,this.level.icon.active=!1,cc.tween(this.level.kuang.children[this.level.count].children[1]).to(.2,{scale:1.4}).to(.3,{scale:1}).call(function(){t.level.scc()}).start(),this.level.count++):(this.level.kuang.children[this.type].children[1].active=!0,this.level.icon.active=!1,this.node.active=!1,cc.tween(this.level.kuang.children[this.type].children[1]).to(.2,{scale:1.4}).to(.3,{scale:1}).call(function(){t.level.scc()}).start())),this.level.icon.active=!1,this.node.opacity=255},e.prototype.playanim=function(){var t;this.isxj||(this.isxj=!0,this.type<=2?((t=this.level.kuang.children[this.level.count].children[1]).active=!0,cc.tween(t).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){}).start()):((t=this.level.kuang.children[this.type].children[1]).active=!0,cc.tween(t).to(.1,{scale:1.2}).to(.1,{scale:1}).call(function(){}).start()))},e.prototype.rectrect=function(){var t=this.level.rectkuang,e=cc.rect(-t.width/2,t.y,t.width,t.height),c=this.level.icon,o=cc.rect(c.x,c.y,c.width,c.height);return!!cc.Intersection.rectRect(o,e)},e.prototype.rectrect1=function(t,e){if(cc.Intersection.rectRect(t.getBoundingBoxToWorld(),e.getBoundingBoxToWorld()))return!0;console.log("==========\u4e0d\u9999\u8549")},i([h(cc.Node)],e.prototype,"scriptsParent",void 0),i([h(cc.Float)],e.prototype,"type",void 0),i([a],e)}(cc.Component);c.default=r,cc._RF.pop()},{AudioManager:void 0,lv501_14_task2:"lv501_14_task2"}],lv501_14_task2:[function(t,e,c){"use strict";cc._RF.push(e,"63030iNH5tI4LZVvzTiYgVl","lv501_14_task2");var o=__extends,i=__decorate;Object.defineProperty(c,"__esModule",{value:!0});var n=t("AudioManager"),s=t("lv501_14_Ctrl"),l=cc._decorator,a=l.ccclass,h=l.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.rectkuang=null,e.plan=0,e.movesp=[],e.kuang=null,e.scriptsParent=null,e.count=0,e.levepr=null,e}return o(e,t),e.prototype.onLoad=function(){this.levepr=this.scriptsParent.getComponent(s.default)},e.prototype.scc=function(){this.plan++,n.default.playEffect("lv501_fang"),this.plan>=6&&(this.levepr.successnum=0,this.levepr.SuccessFunc())},i([h(cc.Node)],e.prototype,"icon",void 0),i([h(cc.Node)],e.prototype,"rectkuang",void 0),i([h([cc.SpriteFrame])],e.prototype,"movesp",void 0),i([h(cc.Node)],e.prototype,"kuang",void 0),i([h(cc.Node)],e.prototype,"scriptsParent",void 0),i([a],e)}(cc.Component);c.default=r,cc._RF.pop()},{AudioManager:void 0,lv501_14_Ctrl:"lv501_14_Ctrl"}]},{},["lv501_14_Ctrl","lv501_14_move","lv501_14_task2"]);
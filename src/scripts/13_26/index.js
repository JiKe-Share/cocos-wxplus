window.__require=function t(e,o,i){function n(r,c){if(!o[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var d="function"==typeof __require&&__require;if(!c&&d)return d(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var h=o[r]={exports:{}};e[r][0].call(h.exports,function(t){return n(e[r][1][t]||t)},h,h.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({Task_5_RemoveKeys_026:[function(t,e,o){"use strict";cc._RF.push(e,"46fcaoMW7ZB3IM8223d9pUq","Task_5_RemoveKeys_026");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=t("AudioManager"),r=cc._decorator,c=r.ccclass,a=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNode=null,e.fallNode=null,e.sizeNode=null,e.tool=null,e.toolWorkingAngle=0,e.delayTime=0,e.audioNameKey="",e.currNode=null,e.compCount=0,e.destinationNodes=null,e.isTouching=!1,e}return i(e,t),e.prototype.start=function(){var t=this;this.scheduleOnce(this.addEvent,this.delayTime),this.scheduleOnce(function(){t.refreshProgressBar(0)},0),this.setupDestinationMarkers()},e.prototype.addEvent=function(){var t=this.tool.getChildByName("core").getChildByName("touchNode");t.on(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouch_end,this)},e.prototype.removeEvent=function(){var t=this.tool.getChildByName("core").getChildByName("touchNode");t.off(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),t.off(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),t.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),t.off(cc.Node.EventType.TOUCH_END,this.onTouch_end,this)},e.prototype.setupDestinationMarkers=function(){this.destinationNodes=[],this.getTargetNodeInChildren(this.targetNode,this.destinationNodes)},e.prototype.getTargetNodeInChildren=function(t,e){var o=t.children;t.getComponent(cc.Sprite)&&e.push(t);for(var i=0;i<o.length;i++)this.getTargetNodeInChildren(o[i],e)},e.prototype.onTouch_start=function(){this.isTouching=!0,this.tool.angle=this.toolWorkingAngle},e.prototype.onTouch_move=function(t){if(this.isTouching){var e=t.getDelta().x/this.sizeNode.scaleX,o=t.getDelta().y/this.sizeNode.scaleY;this.tool.setPosition(this.tool.getPosition().add(cc.v2(e,o)));for(var i=this.tool.getChildByName("rect").getBoundingBoxToWorld(),n=0;n<this.destinationNodes.length;n++){var r=this.destinationNodes[n].getBoundingBoxToWorld(),c=cc.v2(r.x+r.width/2,r.y);if(i.contains(c)){this.removeKey(),this.currNode=this.destinationNodes[n],this.currNode.parent=this.tool,this.currNode.setPosition(0,this.currNode.height/2-10),this.destinationNodes.splice(n,1),this.compCount+=1;var a=this.compCount/(this.compCount+this.destinationNodes.length);this.refreshProgressBar(a),""!=this.audioNameKey&&s.default.playEffect(this.audioNameKey,!1);break}}}},e.prototype.removeKey=function(){if(null!=this.currNode){var t=this.currNode,e=this.fallNode.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO));t.parent=this.fallNode,t.setPosition(e),cc.tween(t).by(1,{y:-1e3,angle:15*Math.random()}).to(.02,{opacity:0}).start(),this.currNode=null}},e.prototype.onTouch_end=function(){var t=this;this.isTouching&&(this.isTouching=!1,this.removeKey(),0==this.destinationNodes.length)&&(this.removeEvent(),cc.tween(this.tool).to(1,{opacity:0}).call(function(){t.node.dispatchEvent(new cc.Event.EventCustom("DX_CLEAN_COMPONE",!0))}).start())},e.prototype.refreshProgressBar=function(t){var e=new cc.Event.EventCustom("DX_CLEAN_PROGRESSBAR",!0);e.setUserData(t),this.node.dispatchEvent(e)},n([a(cc.Node)],e.prototype,"targetNode",void 0),n([a(cc.Node)],e.prototype,"fallNode",void 0),n([a(cc.Node)],e.prototype,"sizeNode",void 0),n([a(cc.Node)],e.prototype,"tool",void 0),n([a(cc.Float)],e.prototype,"toolWorkingAngle",void 0),n([a(cc.Float)],e.prototype,"delayTime",void 0),n([a(cc.String)],e.prototype,"audioNameKey",void 0),n([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{AudioManager:void 0}],Task_8_InstallKeys_026:[function(t,e,o){"use strict";cc._RF.push(e,"f4379A+8TVIhaOsr+MG/WGZ","Task_8_InstallKeys_026");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetNode=null,e.delayTime=0,e.destinationNodes=null,e}return i(e,t),e.prototype.start=function(){this.setupDestinationMarkers();for(var t=2*Math.PI,e=cc.Vec2.ONE.mul(2e3),o=0;o<this.destinationNodes.length;o++){var i=this.destinationNodes[o].getPosition(),n=i.add(e.rotate(t*Math.random()));this.destinationNodes[o].setPosition(n),this.destinationNodes[o].angle=360*Math.random(),cc.tween(this.destinationNodes[o]).delay(this.delayTime).to(3,{x:i.x,y:i.y,angle:0}).start()}},e.prototype.setupDestinationMarkers=function(){this.destinationNodes=[],this.getTargetNodeInChildren(this.targetNode,this.destinationNodes)},e.prototype.getTargetNodeInChildren=function(t,e){var o=t.children;t.getComponent(cc.Sprite)&&e.push(t);for(var i=0;i<o.length;i++)this.getTargetNodeInChildren(o[i],e)},n([c(cc.Node)],e.prototype,"targetNode",void 0),n([c(cc.Float)],e.prototype,"delayTime",void 0),n([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["Task_5_RemoveKeys_026","Task_8_InstallKeys_026"]);
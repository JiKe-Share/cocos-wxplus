window.__require=function e(t,i,o){function a(n,c){if(!i[n]){if(!t[n]){var l=n.split("/");if(l=l[l.length-1],!t[l]){var h="function"==typeof __require&&__require;if(!c&&h)return h(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+n+"'")}n=l}var d=i[n]={exports:{}};t[n][0].call(d.exports,function(e){return a(t[n][1][e]||e)},d,d.exports,e,t,i,o)}return i[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<o.length;n++)a(o[n]);return a}({lv511_6_levelCtrl:[function(e,t,i){"use strict";cc._RF.push(t,"0f0bcEQl/ZBnLQU5bhSnGMW","lv511_6_levelCtrl");var o=__extends,a=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var s=e("LevelCtrl_CommonResult"),n=e("AudioManager"),c=cc._decorator,l=c.ccclass,h=c.property,d=c.inspector,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialog1=null,t.dialog2=null,t.people=null,t.scenes=null,t.foods=null,t.face=null,t.cards=null,t.manhand=null,t.musics=null,t.gamestep=0,t.selectbtn=null,t.fire=null,t.isCanCtrl=!0,t.btns=null,t.cardback=[],t.storylabelDate=["\u4eb2\u7231\u7684\uff0c\u4eca\u5929\u662f\u6211\u4eec\u604b\u7231100\u5929\u7eaa\u5ff5\u65e5\uff0c\u4f60\u73b0\u5728\u997f\u5417\uff1f","\u90a3\u6211\u5e94\u8be5\u997f\u5417\uff1f","\u8822\u4e0d\u8822\u5450\uff0c\u81ea\u5df1\u997f\u4e0d\u997f\uff0c\u8fd8\u8981\u95ee\u6211\uff1f","\u997f\uff0c\u6211\u90fd\u8981\u997f\u75af\u4e86\uff01","\u6211\u73b0\u5728\u4e0d\u662f\u5f88\u997f\u8bf6","\u6211\u8bf4\u4f60\u997f\u4e86\uff0c\u5c31\u662f\u997f\u4e86","\u81ed\u76f4\u7537\uff0c\u4f60\u9009\u7684\u662f\u4ec0\u4e48\u4e1c\u897f\uff01","\u5b9d\u8d1d\u9192\u9192\uff0c\u6211\u4eec\u4ec0\u4e48\u5bb6\u5ead\u6761\u4ef6\u5c31\u53bb\u5403\u5927\u9910\u554a"],t.labelData=["\u521a\u597d\u6211\u73b0\u5728\u4e5f\u997f\u4e86\uff0c\u4eca\u5929\u5403\u5565\u7528\u62bd\u724c\u6765\u51b3\u5b9a\u5427","\u6211\u4eec\u4eca\u5929\u53bb\u54ea\u91cc\uff1f","\u6211\u4eca\u5929\u7a7f\u4ec0\u4e48\u597d\u5462\uff1f","\u70b9\u4ec0\u4e48\u8282\u76ee\uff0c\u66f4\u6709\u60c5\u8c03\u5462\uff1f"],t.selectdata=[["\u6211\u6700\u8ba8\u538c\u87ba\u86f3\u7c89\u4e86","\u706b\u9505\u624d\u662f\u6c38\u8fdc\u7684\u795e\uff01","\u725b\u6392\u52c9\u5f3a\u51d1\u6d3b\u5427"],["\u6211\u6700\u559c\u6b22\u5728\u4e2d\u9910\u9986\u7684\u73af\u5883\u4e86\uff01","\u897f\u9910\u5385,\u9a6c\u9a6c\u864e\u864e\u5427","\u53bb\u5395\u6240\u5403\uff0c\u4f60\u662f\u4e0d\u662f\u4e0d\u60f3\u6d3b\u4e86\uff01"],["\u8fd9\u4ef6\u52c9\u52c9\u5f3a\u5f3a\u8fc7\u5173\u5427","\u7a7f\u6210\u8fd9\u6837\uff0c\u600e\u4e48\u51fa\u95e8\uff01","\u8fd8\u662f\u65d7\u888d\u6700\u9002\u5408\u6211\uff01"],["\u6c1b\u56f4\u8fd9\u5757\u8fd8\u5f97\u9760\u79d1\u76ee\u4e09\u62ff\u634f","\u4f60\u5c31\u90a3\u4e48\u559c\u6b22\u793e\u4f1a\u6447\u5417\uff1f","\u4f60\u5bb6\u5403\u996d\u559c\u6b22\u6572\u5927\u9f13\u7684\u662f\u5417\uff1f"]],t.cardlabelData=[["\u87ba\u86f3\u7c89","\u706b\u9505","\u725b\u6392"],["\u4e2d\u5f0f\u5305\u53a2","\u897f\u9910\u5385","\u5395\u6240"],["\u77ed\u8896","\u9752\u86d9\u670d","\u65d7\u888d"],["\u79d1\u76ee\u4e09","\u793e\u4f1a\u6447","\u5403\u5e2d\u9f13"]],t.levelData=[[2,1,0],[1,0,2],[0,2,1],[1,0,2]],t.selectindex=0,t.iswork=!1,t.Failcount=0,t.bobytype=0,t.taskdata=[0,0,0,0],t.audioNametype=0,t.Dialogday=0,t.tutorialOriginPoint=cc.v2(0,0),t.gudieendPos=cc.v2(0,0),t.gudie=null,t}return o(t,e),t.prototype.start=function(){this.InitData(),this.startGmae()},t.prototype.startGmae=function(){var e=this;this.playsound("lv511_6_1"),this.showDialog1(this.storylabelDate[0],function(){}),this.scheduleOnce(function(){e.playsound("lv511_6_2"),e.showDialog1(e.storylabelDate[1],function(){e.playsound("lv511_6_3"),e.showDialog1(e.storylabelDate[2],function(){e.btns.active=!0})},1)},this.Dialogday)},t.prototype.hungrybtn=function(e){var t=this;1===e?(this.playsound("lv511_6_4"),this.showDialog1(this.storylabelDate[3],function(){t.updatetask()},1)):(this.audioNametype=0,this.playsound("lv511_6_5"),this.showDialog1(this.storylabelDate[4],function(){t.peopleFace(2),t.audioNametype=0,t.playsound("lv511_6_6"),t.showDialog1(t.storylabelDate[5]),t.scheduleOnce(function(){t.peopleFace(4),t.updatetask()},t.Dialogday)},1)),this.btns.active=!1},t.prototype.InitData=function(){var e=this;this.cards.active=!1,this.btns.active=!1,this.selectbtn.active=!1,this.face=this.people.children[this.bobytype].getChildByName("baby").getChildByName("face"),this.peopleFace(4),this.selectbtn.on(cc.Node.EventType.TOUCH_END,this.onSelectEvent,this),this.breaction(this.people.children[this.bobytype].getChildByName("baby")),this.handleaction(this.people.children[this.bobytype].getChildByName("hand")),this.cards.children.forEach(function(t,i){return t.on(cc.Node.EventType.TOUCH_END,function(){return e.onClickBtncard(i)},e)}),this.people.children[this.bobytype].getChildByName("baby").getChildByName("anger").active=!1,this.btns.children.forEach(function(t,i){return t.once(cc.Node.EventType.TOUCH_END,function(){return e.hungrybtn(i)},e)})},t.prototype.disappeartween=function(e){cc.tween(e).to(1,{opacity:0}).call(function(){}).start()},t.prototype.updatetask=function(){var e=this;if(4!==this.gamestep){if(this.peopleFace(4),3===this.gamestep){var t=this.people.children[this.bobytype].getChildByName("baby"),i=this.people.children[this.bobytype].getChildByName("hand");t.stopAllActions(),i.stopAllActions(),this.breaction(t),this.handleaction(i),this.people.children[this.bobytype].getChildByName("baby").getChildByName("anger").active=!1}this.cards.scale=0,this.cards.active=!0,this.audioNametype=1,this.showDialog1(this.labelData[this.gamestep],function(){cc.tween(e.cards).to(.5,{scale:1}).call(function(){e.isCanCtrl=!0,0===e.gamestep&&e.scheduleOnce(function(){e.gudieclice(0)},.5)}).start()})}else this.scheduleOnce(function(){n.default.stopMusic(),e.people.children[e.bobytype].getComponent(cc.Animation).stop(),e.people.children[e.bobytype].getChildByName("baby").getChildByName("by").active=!1,e.scenes.children[0].active=!0;var t=e.scenes.children[e.taskdata[1]+1];e.disappeartween(t),e.disappeartween(e.foods.children[e.taskdata[0]]),e.disappeartween(e.musics.children[e.selectindex]),e.manhand.active=!0,e.audioNametype=0,e.playsound("lv511_6_8"),e.showDialog1(e.storylabelDate[7],function(){e.scheduleOnce(function(){e.onGameSucc()},1)},1)},1)},t.prototype.peopleFace=function(e){this.shownode(this.face,e),this.people.getChildByName("sq").active=2===e},t.prototype.onClickBtncard=function(e){this.isCanCtrl&&(this.selectindex=e,this.updateCard(e),this.selectbtn.active=!0,this.peopleFace(this.levelData[this.gamestep][e]),this.gudie.active&&(this.gudie.active=!1),0===this.gamestep&&1===e&&this.gudieclice(1))},t.prototype.onSelectEvent=function(){var e=this;if(this.gudie.active&&(this.gudie.active=!1),this.isCanCtrl){this.isCanCtrl=!1,this.updateCard(3);var t=this.cards.children[this.selectindex];this.selectbtn.active=!1,cc.tween(t).to(.25,{scaleX:0}).call(function(){t.children[0].getComponent(cc.Sprite).spriteFrame=e.cardback[1],t.children[1].active=!0,t.children[1].getComponent(cc.Label).string=e.cardlabelData[e.gamestep][e.selectindex]}).to(.25,{scaleX:1}).call(function(){}).start(),this.scheduleOnce(function(){e.Selectask(),t.children[0].getComponent(cc.Sprite).spriteFrame=e.cardback[0],t.children[1].active=!1,e.cards.active=!1,1==e.levelData[e.gamestep][e.selectindex]&&e.peopleFace(4),e.audioNametype=2,e.showDialog1(e.selectdata[e.gamestep][e.selectindex]),e.scheduleOnce(function(){e.SelecEvent()},e.Dialogday)},1.5)}},t.prototype.SelecEvent=function(){var e=this;switch(this.levelData[this.gamestep][this.selectindex]){case 0:this.Failcount++,this.Failcount>=2?(this.fire.active=!0,this.people.children[this.bobytype].getChildByName("baby").getChildByName("anger").active=!0,this.playsound("lv511_6_7"),this.showDialog1(this.storylabelDate[6],function(){e.onGameFail()})):(this.gamestep++,this.updatetask());break;case 1:this.peopleFace(1),this.gamestep++,this.updatetask();break;case 2:this.peopleFace(2),this.audioNametype=0,this.playsound("lv511_6_7"),this.showDialog1(this.storylabelDate[6],function(){e.onGameFail()}),this.fire.active=!0,this.people.children[this.bobytype].getChildByName("baby").getChildByName("anger").active=!0}},t.prototype._jellyCurve=function(e){return Math.abs(Math.sin(1.2*Math.PI*e)*Math.sin(2*Math.PI*e))},t.prototype.Selectask=function(){switch(this.gamestep){case 0:this.shownode(this.foods,this.selectindex),cc.tween(this.foods.children[this.selectindex]).to(1,{scaleX:1.2,scaleY:.8333333333333334},{easing:this._jellyCurve}).start();break;case 1:this.scenes.children[this.selectindex+1].active=!0,this.scenes.children[this.selectindex+1].opacity=0,cc.tween(this.scenes.children[this.selectindex+1]).to(.5,{opacity:255}).start();break;case 2:var e=this.selectindex+1;this.shownode(this.people,e),this.face=this.people.children[e].getChildByName("baby").getChildByName("face"),this.bobytype=e;var t=this.people.children[this.bobytype].getChildByName("baby"),i=this.people.children[this.bobytype].getChildByName("hand");t.stopAllActions(),i.stopAllActions(),this.breaction(t),this.handleaction(i);break;case 3:this.shownode(this.musics,this.selectindex),this.musics.children[this.selectindex].x+=50,this.musics.children[this.selectindex].opacity=0,cc.tween(this.musics.children[this.selectindex]).by(.5,{x:-50,opacity:255}).start(),n.default.playMusic("lv511_6_bg"+this.selectindex)}this.taskdata[this.gamestep]=this.selectindex},t.prototype.updateCard=function(e){for(var t=0;t<this.cards.childrenCount;t++){var i=this.cards.children[t];e===t?(i.getComponent(cc.Sprite).enabled=!0,i.scale=1.1):(i.scale=1,i.getComponent(cc.Sprite).enabled=!1)}},t.prototype.onDisable=function(){cc.audioEngine.stopAllEffects(),setTimeout(function(){n.default.playMusic(n.default.audioName.BACKGROUND)},0)},t.prototype.handleaction=function(e){cc.tween(e).to(1,{angle:5}).to(1,{angle:-5}).union().repeatForever().start()},t.prototype.onGameFail=function(){this.node.getComponent(s.default).onGameFail()},t.prototype.onGameSucc=function(){this.node.getComponent(s.default).onGameSucc()},t.prototype.playsound=function(e,t){void 0===t&&(t=!1),t?n.default.playEffect(e):(n.default.pausesound(),n.default.playEffect1(e))},t.prototype.breaction=function(e){cc.tween(e).to(.5,{scaleY:1.02}).to(.5,{scaleY:1}).union().repeatForever().start()},t.prototype.shownode=function(e,t){for(var i=0;i<e.childrenCount;i++)e.children[i].active=i===t},t.prototype.showDialog1=function(e,t,i){var o=this;void 0===t&&(t=null),void 0===i&&(i=0);var a="";0!=this.audioNametype&&(1==this.audioNametype?(a="lv511_6_"+(8+this.gamestep+1),this.playsound(a)):(a="lv511_6_"+this.gamestep+"_"+this.selectindex,this.playsound(a))),1==i?(this.dialog2.children[0].getComponent(cc.Label).string=e,this.Dialogday=.2*e.length,this.dialog2.active=!0):(this.dialog1.children[0].getComponent(cc.Label).string=e,this.Dialogday=.2*e.length,this.dialog1.active=!0),this.unschedule(this.closeDialog1),this.scheduleOnce(function(){return o.closeDialog1(t)},this.Dialogday)},t.prototype.closeDialog1=function(e){void 0===e&&(e=null),this.dialog1.active=!1,this.dialog2.active=!1,e&&e()},t.prototype.gudieclice=function(e){this.gudie.active=!0;var t=this.gudie.getChildByName("gudiefinger");t.active=!0,1===e?t.setPosition(this.gudieendPos):t.setPosition(this.tutorialOriginPoint),t.stopAllActions();var i=cc.tween(t).by(.5,{x:-20,y:20}).by(.5,{x:20,y:-20}).call(function(){i.start()});i.start()},t.prototype.closegudie=function(){this.gudie.active=!1},a([h(cc.Node)],t.prototype,"dialog1",void 0),a([h(cc.Node)],t.prototype,"dialog2",void 0),a([h(cc.Node)],t.prototype,"people",void 0),a([h(cc.Node)],t.prototype,"scenes",void 0),a([h(cc.Node)],t.prototype,"foods",void 0),a([h(cc.Node)],t.prototype,"face",void 0),a([h(cc.Node)],t.prototype,"cards",void 0),a([h(cc.Node)],t.prototype,"manhand",void 0),a([h(cc.Node)],t.prototype,"musics",void 0),a([h(cc.Node)],t.prototype,"selectbtn",void 0),a([h(cc.Node)],t.prototype,"fire",void 0),a([h(cc.Node)],t.prototype,"btns",void 0),a([h([cc.SpriteFrame])],t.prototype,"cardback",void 0),a([h({})],t.prototype,"tutorialOriginPoint",void 0),a([h({})],t.prototype,"gudieendPos",void 0),a([h({type:cc.Node})],t.prototype,"gudie",void 0),a([l,d("packages://autoproperty//inspector.js")],t)}(cc.Component);i.default=r,cc._RF.pop()},{AudioManager:void 0,LevelCtrl_CommonResult:void 0}]},{},["lv511_6_levelCtrl"]);
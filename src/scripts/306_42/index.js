window.__require=function e(t,o,r){function a(i,s){if(!o[i]){if(!t[i]){var c=i.split("/");if(c=c[c.length-1],!t[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){return a(t[i][1][e]||e)},u,u.exports,e,t,o,r)}return o[i].exports}for(var n="function"==typeof __require&&__require,i=0;i<r.length;i++)a(r[i]);return a}({"306_42_DragSys":[function(e,t,o){"use strict";cc._RF.push(t,"b373avMuZ9NeLXwYH2yqZoy","306_42_DragSys");var r=__extends,a=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var n=e("306_DragSys"),i=cc._decorator,s=i.ccclass;i.property;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._curTapIconSiblingIndex=-1,t}return r(t,e),t.prototype._clickStart=function(e){if(this.isCanDrag&&!this._curDragIcon){this._curDragMoveDis=0;var t=e.target,o=t.parent.getComponent(cc.Layout),r=t.getChildByName("sprite");r&&(t._curTapIconSiblingIndex=t.getSiblingIndex()+1,t.setSiblingIndex(this._iconComs.length-1),o&&(o.enabled=!1),cc.tween(r).to(.1,{scale:2}).start())}},t.prototype._resetIcon=function(t){var o=t.node,r=t.node.parent.getComponent(cc.Layout);o._curTapIconSiblingIndex&&o.setSiblingIndex(o._curTapIconSiblingIndex-1),r&&(r.enabled=!0),e.prototype._resetIcon.call(this,t)},a([s],t)}(n.default);o.default=c,cc._RF.pop()},{"306_DragSys":void 0}],"306_42_LevelCtrl":[function(e,t,o){"use strict";cc._RF.push(t,"0557b6bIj1MX4pw4o6DEjOi","306_42_LevelCtrl");var r=__extends,a=__decorate,n=__awaiter,i=__generator;Object.defineProperty(o,"__esModule",{value:!0});var s=e("AssetManager"),c=e("AudioManager"),d=e("306_DragSys"),u=e("306_Config"),l=e("306_DialogSys"),p=e("LevelCtrl_CommonResult"),f=cc._decorator,_=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragSys=null,t.dialogSys=null,t.personNodes=[],t.shadowNodes=[],t.guideNode=null,t._isGameSuccess=!1,t}return r(t,e),t.prototype.onLoad=function(){this.dragSys.isCanDrag=!0,this.dragSys.node.on(d.default.EventType.DRAG_START,this._dragStart,this),this.dragSys.node.on(d.default.EventType.DRAG_SUCCESS,this._dragSuccess,this),this.dragSys.node.on(d.default.EventType.DRAG_ALL_SUCCESS,this._dragAllSuccess,this),this.guideNode.active=!1,this.dragSys.node.on(d.default.EventType.DRAG_FAIL,this._dragFail,this)},t.prototype.start=function(){var e=this;this.personNodes.forEach(function(e){cc.tween(e).to(1,{scaleY:1.02}).to(1,{scaleY:1}).union().repeatForever().start()}),this.shadowNodes.forEach(function(e){cc.tween(e).to(1,{scaleX:1.02}).to(1,{scaleX:1}).union().repeatForever().start()}),this.dragSys.isCanDrag=!1,s.default.loadSoundEffect_fileDir("AudioClip/lv_306/42",function(){return n(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return c.default.playMusic(u.AUDIOS[41].bgm),c.default.playEffect(u.AUDIOS[42].start),[4,this.dialogSys.showDialogById(1,u.TEXTS[42].start)];case 1:return e.sent(),this.dragSys.isCanDrag=!0,this.guideNode.active=!0,[2]}})})})},t.prototype.onDisable=function(){cc.audioEngine.stopAllEffects(),setTimeout(function(){c.default.playMusic(c.default.audioName.BACKGROUND)},0)},t.prototype._dragStart=function(){c.default.playEffect(c.default.audioName.BUTTON)},t.prototype._dragAllSuccess=function(){this._isGameSuccess=!0},t.prototype._dragSuccess=function(e){var t,o=this;this.guideNode.active&&(this.guideNode.active=!1),c.default.playEffect(u.AUDIOS.button);var r=e.id;this.dragSys.isCanDrag=!1,t=r<=5?0:r<=10?2:1,u.AUDIOS[42]["item_"+r]&&c.default.playEffect(u.AUDIOS[42]["item_"+r]),this.dialogSys.showDialogById(t,u.TEXTS[42][r]).then(function(){o._isGameSuccess?o._gameSuccess():o.dragSys.isCanDrag=!0})},t.prototype._dragFail=function(e){var t=this,o=e.node.getChildByName("sprite");if(o){for(var r=-1,a=0;a<this.personNodes.length;a++)if(this.personNodes[a].getBoundingBoxToWorld().contains(o.convertToWorldSpaceAR(cc.Vec2.ZERO))){r=a;break}-1!==r&&(this.dragSys.isCanDrag=!1,c.default.playEffect(u.AUDIOS[42].error),this.scheduleOnce(function(){c.default.playEffect(u.AUDIOS[42]["error_"+r]),t.dialogSys.showDialogById(r,u.TEXTS[42]["error_"+r]).then(function(){t.dragSys.isCanDrag=!0})},.1))}},t.prototype._gameSuccess=function(){this.node.getComponent(p.default).onGameSucc()},t.prototype._gameFail=function(){this.node.getComponent(p.default).onGameFail()},a([g({type:d.default})],t.prototype,"dragSys",void 0),a([g({type:l.default})],t.prototype,"dialogSys",void 0),a([g({type:[cc.Node]})],t.prototype,"personNodes",void 0),a([g({type:[cc.Node]})],t.prototype,"shadowNodes",void 0),a([g({type:cc.Node})],t.prototype,"guideNode",void 0),a([_],t)}(cc.Component);o.default=y,cc._RF.pop()},{"306_Config":void 0,"306_DialogSys":void 0,"306_DragSys":void 0,AssetManager:void 0,AudioManager:void 0,LevelCtrl_CommonResult:void 0}]},{},["306_42_DragSys","306_42_LevelCtrl"]);
window.__require=function t(e,o,i){function n(r,c){if(!o[r]){if(!e[r]){var d=r.split("/");if(d=d[d.length-1],!e[d]){var a="function"==typeof __require&&__require;if(!c&&a)return a(d,!0);if(s)return s(d,!0);throw new Error("Cannot find module '"+r+"'")}r=d}var h=o[r]={exports:{}};e[r][0].call(h.exports,function(t){return n(e[r][1][t]||t)},h,h.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({"302_GuCard_Guide":[function(t,e,o){"use strict";cc._RF.push(e,"64125zkprFFzZgIkzxd36+u","302_GuCard_Guide");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.guidedAnimSequence=[],e.guideIndex=-1,e}return i(e,t),e.prototype.onLoad=function(){this.showNextGuide()},e.prototype.hiddenAllGuides=function(){for(var t=0,e=this.guidedAnimSequence;t<e.length;t++){var o=e[t];o&&(o.active=!1)}},e.prototype.showGuide=function(t){var e=this;void 0===t&&(t=0),this.hiddenAllGuides(),this.scheduleOnce(function(){e.guideIndex<e.guidedAnimSequence.length&&e.guidedAnimSequence[e.guideIndex]&&(e.guidedAnimSequence[e.guideIndex].active=!0)},t)},e.prototype.showNextGuide=function(t){void 0===t&&(t=0),this.guideIndex++,this.showGuide(t)},e.prototype.showPreGuide=function(t){void 0===t&&(t=0),this.guideIndex++,this.showGuide(t)},e.prototype.showCurGuide=function(t,e){void 0===e&&(e=0);var o=this.guideIndex;this.guideIndex=t,this.showGuide(e),this.guideIndex=o},n([c([cc.Node])],e.prototype,"guidedAnimSequence",void 0),n([r],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],"302_GuCard_Item":[function(t,e,o){"use strict";cc._RF.push(e,"0dc22r6AXNO4bIjr+9PLf8P","302_GuCard_Item");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass;s.property;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.originalNodeSPPos=null,e}return i(e,t),e.prototype.onLoad=function(){this.originalNodeSPPos=cc.v2(this.node.getPosition()),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)},e.prototype.touchStart=function(){},e.prototype.touchMove=function(){},e.prototype.touchEnd=function(){},n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"302_GuCard_Link":[function(t,e,o){"use strict";cc._RF.push(e,"8154fKLtYVAv6GEofM7g+rA","302_GuCard_Link");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,c=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sfLinkFront=null,e.sfLinkBack=null,e.tempPos=null,e.targetPolygon=null,e.lvCtrl=null,e.touched=!1,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.init=function(t){this.targetPolygon=t.targetPolygonNode,this.lvCtrl=t},e.prototype.touchStart=function(t){this.touched=!0,this.tempPos=cc.v2(this.node.getPosition()),t.stopPropagationImmediate()},e.prototype.touchMove=function(t){this.touched&&(this.node.setPosition(this.node.getPosition().add(t.getDelta().mul(.6666666666666666))),t.stopPropagationImmediate())},e.prototype.touchEnd=function(t){var e=this;this.touched&&(cc.Intersection.polygonPolygon(this.node.getComponent(cc.PolygonCollider).points.map(function(t){return t.add(e.node.getPosition())}),this.targetPolygon.getComponent(cc.PolygonCollider).world.points)?this.lvCtrl.exportToOutNode(this.sfLinkBack,this.sfLinkFront):this.node.setPosition(this.tempPos),t.stopPropagationImmediate())},n([c(cc.SpriteFrame)],e.prototype,"sfLinkFront",void 0),n([c(cc.SpriteFrame)],e.prototype,"sfLinkBack",void 0),n([r],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],"302_GuCard_LvCtrl":[function(t,e,o){"use strict";cc._RF.push(e,"4df40gnTbNDQJYsz9gpPTRK","302_GuCard_LvCtrl");var i,n=__extends,s=__decorate;Object.defineProperty(o,"__esModule",{value:!0}),o.GuCard_Mask_Ev=void 0;var r,c=t("LevelCtrl_CommonResult"),d=t("302_GuCard_Guide"),a=t("302_GuCard_Item"),h=t("302_GuCard_Link"),u=cc._decorator,p=u.ccclass,l=u.property;(r=i=o.GuCard_Mask_Ev||(o.GuCard_Mask_Ev={})).StartTear="kai_si_jia",r.OnTear="shikaibomo",r.OnDestroy="bomoshidiaole";var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelId=0,e.arrPrefabCard=[],e.arrPrefabPolygon=[],e.arrPrefabResults=[],e.arrSfCardBackground=[],e.mapNode=null,e.outNode=null,e.targetPolygonNode=null,e.cardPos=null,e.onBoundItems=[],e.canDrop=!0,e.tempItemPos=null,e.curItemOnBound=!0,e.curItemIsIntersection=!1,e.resultNode=null,e.items=[],e.linkNode=null,e.tipsNode=null,e.itemComplete=!1,e.touchDistance=100,e.guideNode=null,e.isTouched=!1,e}return n(e,t),e.prototype.onLoad=function(){this.init(),this.node.on(cc.Node.EventType.TOUCH_START,this.itemStartTouch,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.itemTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.itemTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.itemTouchEnd,this),this.node.on(i.OnDestroy,this.onMaskDestory,this),this.node.on(i.StartTear,this.onStartTear,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.itemStartTouch,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.itemTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.itemTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_END,this.itemTouchEnd,this),this.node.off(i.OnDestroy,this.onMaskDestory,this),this.node.off(i.StartTear,this.onStartTear,this)},e.prototype.init=function(){this.guideNode=this.node.getChildByName("guide"),this.mapNode=this.node.getChildByName("map"),this.outNode=this.mapNode.getChildByName("out"),this.resultNode=this.node.getChildByName("result"),this.cardPos=cc.instantiate(this.arrPrefabCard[this.levelId-1]),this.mapNode.getChildByName("di").addChild(this.cardPos),this.cardPos.x=1080,this.cardPos.getComponent(cc.Sprite).spriteFrame=this.arrSfCardBackground[(this.levelId-1)%this.arrSfCardBackground.length];for(var t=0,e=this.cardPos.children;t<e.length;t++){var o=e[t];o.addComponent(a.default),this.items.push(o.getComponent(a.default))}this.cardPos.active=!1,this.targetPolygonNode=cc.instantiate(this.arrPrefabPolygon[(this.levelId-1)%this.arrPrefabPolygon.length]),this.targetPolygonNode.parent=this.mapNode.getChildByName("di").getChildByName("xingzhuang"),this.linkNode=this.mapNode.getChildByName("guajian"),this.linkNode.getComponent(h.default).init(this)},e.prototype.showTips=function(t){void 0===t&&(t=""),cc.isValid(this.tipsNode)?(this.tipsNode.active=!0,this.tipsNode.getComponent(cc.Label).string=t):(this.tipsNode=new cc.Node("tipsNode"),this.cardPos.addChild(this.tipsNode),this.tipsNode.addComponent(cc.Widget).target=this.cardPos,this.tipsNode.getComponent(cc.Widget).top=-30,this.tipsNode.getComponent(cc.Widget).isAlignTop=!0,this.tipsNode.addComponent(cc.Label).string=t,this.tipsNode.getComponent(cc.Label).fontSize=30,this.tipsNode.color=cc.Color.BLACK)},e.prototype.printResultPic=function(){var t=this,e=cc.instantiate(this.arrPrefabResults[(this.levelId-1)%this.arrPrefabResults.length]);this.resultNode.addChild(e),this.outNode.parent=e.getChildByName("slot"),this.mapNode.active=!1,this.scheduleOnce(function(){cc.tween(t.outNode).to(.6,{scale:.1,position:cc.Vec3.ZERO}).call(function(){t.scheduleOnce(function(){t.getComponent(c.default).onGameSucc()},2)}).start()},.2)},e.prototype.onStartTear=function(t){var e;null===(e=this.guideNode)||void 0===e||e.getComponent(d.default).showNextGuide(1),t.stopPropagation()},e.prototype.onMaskDestory=function(t){var e=this;cc.isValid(this.cardPos)&&(this.cardPos.active=!0,this.scheduleOnce(function(){cc.tween(e.cardPos).to(.5,{x:0}).call(function(){e.showTips("\u5c06\u4e0b\u65b9\u6240\u6709\u56fe\u6848\u653e\u7f6e\u5230\u4e0a\u9762\u533a\u57df")}).start()},.2)),t.stopPropagation()},e.prototype.isComplete=function(){this.itemComplete=!0;for(var t=0,e=this.items;t<e.length;t++){var o=e[t];if(-1===this.onBoundItems.indexOf(o.node)){this.itemComplete=!1;break}}return this.itemComplete},e.prototype.checkOnBound=function(t){var e,o;this.curItemOnBound=!0;var i=this.targetPolygonNode.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.getPosition())),n=t.getComponent(cc.PolygonCollider).points.map(function(t){return t.add(i)}),s=null===(o=null===(e=this.targetPolygonNode)||void 0===e?void 0:e.getComponent(cc.PolygonCollider))||void 0===o?void 0:o.points;if(s)for(var r=0,c=n;r<c.length;r++){var d=c[r];if(!cc.Intersection.pointInPolygon(d,s)){this.curItemOnBound=!1;break}}else this.curItemOnBound=!1;return this.curItemOnBound},e.prototype.checkIntersection=function(t){if(this.curItemIsIntersection=!1,this.onBoundItems.length<1)return this.curItemIsIntersection;for(var e=this.targetPolygonNode.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.getPosition())),o=t.getComponent(cc.PolygonCollider).points.map(function(t){return t.add(e)}),i=0,n=this.onBoundItems.filter(function(e){return e!=t}).map(function(t){return t.getComponent(cc.PolygonCollider).points.map(function(e){return e.add(t.getPosition())})});i<n.length;i++){var s=n[i];if(cc.Intersection.polygonPolygon(s,o)){this.curItemIsIntersection=!0;break}}return this.curItemIsIntersection},e.prototype.itemUpdateState=function(t){this.canDrop=!0,this.checkOnBound(t)||(this.canDrop=!1),this.canDrop&&!this.checkIntersection(t)||(this.canDrop=!1)},e.prototype.itemStartTouch=function(t){if(!this.itemComplete&&!this.isTouched){this.isTouched=!0;var e=t.target;e.getComponent(a.default)&&(-1!=this.onBoundItems.indexOf(e)&&(this.tempItemPos=cc.v2(e.getPosition())),e.setPosition(e.parent.convertToNodeSpaceAR(t.getLocation()).add(cc.v2(0,this.touchDistance))),this.itemUpdateState(e))}},e.prototype.itemTouchMove=function(t){if(!this.itemComplete&&this.isTouched){var e=t.target;if(e.getComponent(a.default)){if(e.setPosition(-1!=this.onBoundItems.indexOf(e)?this.targetPolygonNode.convertToNodeSpaceAR(t.getLocation()).add(cc.v2(0,this.touchDistance)):this.cardPos.convertToNodeSpaceAR(t.getLocation()).add(cc.v2(0,this.touchDistance))),this.itemUpdateState(e),this.canDrop)e.color=cc.Color.WHITE;else{var o=cc.Color.RED;o.g=165,o.b=165,e.color=o}this.showTips(this.curItemOnBound?this.curItemIsIntersection?"\u4e0e\u5176\u4ed6\u56fe\u7247\u91cd\u5408\u4e86":"\u53ef\u4ee5\u653e\u7f6e":"\u8d85\u51fa\u8fb9\u754c\u4e86")}}},e.prototype.itemTouchEnd=function(t){var e,o=this;if(!this.itemComplete){var i=t.target;if(i.getComponent(a.default)){var n=this.onBoundItems.indexOf(i),s=this.targetPolygonNode.convertToNodeSpaceAR(i.parent.convertToWorldSpaceAR(i.getPosition()));-1!=n?this.canDrop?i.setPosition(s):this.curItemOnBound?i.setPosition(this.tempItemPos):(i.setPosition(this.tempItemPos),this.onBoundItems.splice(n,1),i.setParent(this.cardPos),i.setPosition(i.getComponent(a.default).originalNodeSPPos)):this.canDrop?(i.parent=this.targetPolygonNode,i.setPosition(s),this.onBoundItems.push(i),this.showTips("\u5c06\u4e0b\u65b9\u6240\u6709\u56fe\u6848\u653e\u7f6e\u5230\u4e0a\u9762\u533a\u57df"),null===(e=this.guideNode)||void 0===e||e.getComponent(d.default).hiddenAllGuides(),this.isComplete()&&cc.tween(this.cardPos).to(.2,{x:-1080}).call(function(){var t;o.cardPos.active=!1,o.tipsNode.active=!1,o.mapNode.getChildByName("guajian").active=!0,null===(t=o.guideNode)||void 0===t||t.getComponent(d.default).showNextGuide(.2)}).start()):i.setPosition(i.getComponent(a.default).originalNodeSPPos),i.color=cc.Color.WHITE,this.isTouched=!1}}},e.prototype.exportToOutNode=function(t,e){var o,i=this;null===(o=this.guideNode)||void 0===o||o.getComponent(d.default).hiddenAllGuides();var n=cc.instantiate(this.targetPolygonNode);cc.tween(this.targetPolygonNode).call(function(){cc.tween(i.linkNode).to(.8,{angle:-90,position:cc.v3(9,43,0)}).start()}).to(1.2,{position:this.targetPolygonNode.position.sub(this.targetPolygonNode.getChildByName("slot").position).add(cc.v3(0,-170,0))}).call(function(){i.linkNode.active=!1,i.linkNode.destroy(),i.targetPolygonNode.active=!1;var o=i.outNode,s=new cc.Node;s.anchorX=.1,s.anchorY=.93,o.addChild(s),s.addComponent(cc.Sprite).spriteFrame=t,o.addChild(n);var r=cc.v2(11,-290).sub(n.getChildByName("slot").getPosition());n.setPosition(r);var c=new cc.Node;c.anchorX=.8,c.anchorY=1,o.addChild(c),c.addComponent(cc.Sprite).spriteFrame=e,i.scheduleOnce(function(){i.printResultPic()},.2)}).start()},s([l({type:cc.Integer,min:0})],e.prototype,"levelId",void 0),s([l([cc.Prefab])],e.prototype,"arrPrefabCard",void 0),s([l([cc.Prefab])],e.prototype,"arrPrefabPolygon",void 0),s([l([cc.Prefab])],e.prototype,"arrPrefabResults",void 0),s([l([cc.SpriteFrame])],e.prototype,"arrSfCardBackground",void 0),s([p],e)}(cc.Component);o.default=f,cc._RF.pop()},{"302_GuCard_Guide":"302_GuCard_Guide","302_GuCard_Item":"302_GuCard_Item","302_GuCard_Link":"302_GuCard_Link",LevelCtrl_CommonResult:void 0}],"302_GuCard_Mask":[function(t,e,o){"use strict";cc._RF.push(e,"f9bf2h3OwdITIojfTpt/zO6","302_GuCard_Mask");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=t("302_GuCard_LvCtrl"),r=cc._decorator,c=r.ccclass,d=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tearingSf=null,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(s.GuCard_Mask_Ev.OnTear,this.tearing,this)},e.prototype.onDestroy=function(){this.node.off(s.GuCard_Mask_Ev.OnTear,this.tearing,this),this.node.dispatchEvent(new cc.Event.EventCustom(s.GuCard_Mask_Ev.OnDestroy,!0))},e.prototype.tearing=function(){this.getComponent(cc.Sprite).spriteFrame=this.tearingSf},n([d(cc.SpriteFrame)],e.prototype,"tearingSf",void 0),n([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{"302_GuCard_LvCtrl":"302_GuCard_LvCtrl"}],"302_GuCard_Tweezers":[function(t,e,o){"use strict";cc._RF.push(e,"c038bVtf15EZattVtK0lvC+","302_GuCard_Tweezers");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var s=t("302_GuCard_LvCtrl"),r=cc._decorator,c=r.ccclass,d=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskNode=null,e.tempPos=null,e.touched=!1,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.touchStart=function(t){this.touched=!0,this.tempPos=cc.v2(this.node.getPosition()),t.stopPropagation()},e.prototype.touchMove=function(t){this.touched&&(this.node.setPosition(this.node.getPosition().add(t.getDelta().mul(.6666666666666666))),t.stopPropagation())},e.prototype.touchEnd=function(t){var e=this;this.touched&&(cc.Intersection.polygonPolygon(this.node.getComponent(cc.PolygonCollider).points.map(function(t){return t.add(e.node.getPosition())}),this.maskNode.getComponent(cc.PolygonCollider).world.points)?(this.node.dispatchEvent(new cc.Event.EventCustom(s.GuCard_Mask_Ev.StartTear,!0)),cc.tween(this.node).to(.2,{angle:-30}).call(function(){cc.tween(e.maskNode).to(.1,{position:e.node.position.add(cc.v3(-220,-30,0))}).call(function(){e.maskNode.emit(s.GuCard_Mask_Ev.OnTear)}).to(.4,{position:cc.v3(175,175,0)}).start()}).to(.5,{position:cc.v3(395,205,0)}).call(function(){e.scheduleOnce(function(){e.node.destroy(),e.maskNode.destroy()},.2)}).start()):this.node.setPosition(this.tempPos),t.stopPropagation())},n([d(cc.Node)],e.prototype,"maskNode",void 0),n([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{"302_GuCard_LvCtrl":"302_GuCard_LvCtrl"}]},{},["302_GuCard_Guide","302_GuCard_Item","302_GuCard_Link","302_GuCard_LvCtrl","302_GuCard_Mask","302_GuCard_Tweezers"]);
window.__require=function t(e,c,s){function i(a,n){if(!c[a]){if(!e[a]){var h=a.split("/");if(h=h[h.length-1],!e[h]){var r="function"==typeof __require&&__require;if(!n&&r)return r(h,!0);if(o)return o(h,!0);throw new Error("Cannot find module '"+a+"'")}a=h}var l=c[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,c,s)}return c[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)i(s[a]);return i}({Cat:[function(t,e,c){"use strict";cc._RF.push(e,"56c34oLcspHzadleJrWlMjB","Cat");var s=__extends,i=__decorate;Object.defineProperty(c,"__esModule",{value:!0});var o=t("Game"),a=t("AudioManager"),n=cc._decorator,h=n.ccclass,r=n.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.process=null,e.shear=null,e.nail=null,e.shearRect=null,e.clean=null,e.cleanRect=null,e.cleanMask=null,e.clean_bar=null,e.zhua=null,e.cat_sprite=null,e.cat_3=null,e.cat_Rect3=null,e.cat_bar3=null,e.cat_4=null,e.cat_Rect4=null,e.cat_bar4=null,e.cat_4_guang=null,e.cat_5=null,e.cat_bar5=null,e.cat_5_node=null,e.title_lable=null,e.currect=null,e.currpro=0,e.startposX=0,e.startposY=-400,e.currnum=0,e.cleanpos=[],e.cleamposnum=0,e.titlelable=["\u6b65\u9aa41\uff1a\u7ed9\u732b\u526a\u6307","\u6b65\u9aa42\uff1a\u7ed9\u732b\u722a\u5243\u6bdb","\u6b65\u9aa43\uff1a\u7ed9\u732b\u722a\u6e05\u6d01","\u6b65\u9aa44\uff1a\u7ed9\u732b\u722a\u4fdd\u6e7f","\u6b65\u9aa45\uff1a\u7ed9\u732b\u722a\u4e0a\u62a4\u811a\u818f"],e.CAT="cat",e.CAT_1="cat_1",e.CAT_2="cat_2",e.CAT_3="cat_3",e.isrect=!0,e.car_time3=3,e.localtime=0,e.car_time4=3,e.car_time5=3,e}return s(e,t),e.prototype.onLoad=function(){this.shear.zIndex=cc.macro.MAX_ZINDEX,this.shear.on(cc.Node.EventType.TOUCH_MOVE,this.ShearTouchMove,this),this.shear.on(cc.Node.EventType.TOUCH_END,this.ShearTouchend,this),this.clean.on(cc.Node.EventType.TOUCH_START,this.CleanTouchStart,this),this.clean.on(cc.Node.EventType.TOUCH_MOVE,this.CleanTouchMove,this),this.clean.on(cc.Node.EventType.TOUCH_END,this.CleanTouchEnd,this),this.cat_3.on(cc.Node.EventType.TOUCH_START,this.class3ContactInit,this),this.cat_3.on(cc.Node.EventType.TOUCH_MOVE,this.class3ContactMove,this),this.cat_3.on(cc.Node.EventType.TOUCH_END,this.class3ContactEnd,this),this.cat_4.on(cc.Node.EventType.TOUCH_START,this.class4ContactInit,this),this.cat_4.on(cc.Node.EventType.TOUCH_MOVE,this.class4ContactMove,this),this.cat_4.on(cc.Node.EventType.TOUCH_END,this.class4ContactEnd,this),this.cat_5.on(cc.Node.EventType.TOUCH_MOVE,this.class5ContactMove,this),this.cat_5.on(cc.Node.EventType.TOUCH_END,this.class5ContactEnd,this);for(var t=this.zhua.width,e=this.zhua.height,c=0;c<t/this.cleanRect.width;c++)for(var s=0;s<e/this.cleanRect.width;s++){var i=cc.v2(-t/2+this.cleanRect.width*c,e/2-this.cleanRect.width*s);this.cleanpos.push(i)}},e.prototype.start=function(){this.UpProcess()},e.prototype.ShearTouchMove=function(t){var e=this,c=this;if(this.shear.x+=t.getDeltaX(),this.shear.y+=t.getDeltaY(),this.isrect)for(var s=0;s<this.nail.childrenCount;s++)if(this.nail.children[s].active&&this.rectToPoints(this.nail.children[s].position,cc.v2(this.shear.x,this.shear.y+148),this.shearRect.width,this.shearRect.height))return c.isrect=!1,cc.tween(c.shear.children[0]).to(.1,{angle:-5}).to(.1,{angle:0}).call(function(){a.default.playEffect(e.CAT_1),c.nail.children[s].active=!1,c.isrect=!0,c.currnum++}).start(),void cc.tween(c.shear.children[1]).to(.1,{angle:5}).to(.1,{angle:0}).start()},e.prototype.ShearTouchend=function(){this.shear.x=this.startposX,this.shear.y=this.startposY,this.currnum==this.nail.childrenCount&&(this.currpro+=1,a.default.playEffect(this.CAT),this.ShearOff(),this.UpProcess())},e.prototype.CleanTouchStart=function(){a.default.playEffect(this.CAT_2,!0)},e.prototype.CleanTouchMove=function(t){this.clean.x+=t.getDeltaX(),this.clean.y+=t.getDeltaY(),this._addCircle(cc.v2(this.clean.x,this.clean.y+162),this.cleanRect.width,this.cleanRect.height,this.cleanMask);for(var e=0;e<this.cleanpos.length;e++)this.cleanpos[e]&&this.rectToPoints(this.cleanpos[e],cc.v2(this.clean.x,this.clean.y+162),this.cleanRect.width,this.cleanRect.height)&&(this.cleamposnum+=1,this.cleanpos[e]=null,this.cleamposnum>this.cleanpos.length/10*9?this.clean_bar.getComponent(cc.ProgressBar).progress=1:this.clean_bar.getComponent(cc.ProgressBar).progress=this.cleamposnum/(this.cleanpos.length/10*9))},e.prototype.CleanTouchEnd=function(){cc.audioEngine.stopAllEffects(),this.clean.x=this.startposX,this.clean.y=this.startposY,this.cleamposnum>this.cleanpos.length/10*9&&(a.default.playEffect(this.CAT),this.cleanMask.active=!1,this.currpro++,this.UpProcess(),this.CleanOff())},e.prototype.class3ContactInit=function(){this.cat_Rect3.active=!0},e.prototype.class3ContactMove=function(t){this.cat_3.x+=t.getDeltaX(),this.cat_3.y+=t.getDeltaY(),this.rectToPoints(cc.v2(this.cat_3.x,this.cat_3.y+140),this.zhua.position,this.cat_Rect3.width,this.cat_Rect3.height)&&(this.localtime+=.016,this.localtime>=this.car_time3?(this.cat_bar3.getComponent(cc.ProgressBar).progress=1,this.zhua.getComponent(cc.Sprite).spriteFrame=this.cat_sprite):(this.cat_bar3.getComponent(cc.ProgressBar),this.cat_bar3.getComponent(cc.ProgressBar).progress=this.localtime/3))},e.prototype.class3ContactEnd=function(){this.cat_3.x=this.startposX,this.cat_3.y=this.startposY,this.cat_Rect3.active=!1,this.localtime>=this.car_time3&&(a.default.playEffect(this.CAT),this.localtime=0,this.currpro++,this.UpProcess(),this.Cat3Off())},e.prototype.class4ContactInit=function(){a.default.playEffect(this.CAT_3,!0),this.cat_Rect4.active=!0},e.prototype.class4ContactMove=function(t){this.cat_4.x+=t.getDeltaX(),this.cat_4.y+=t.getDeltaY(),this.rectToPoints(cc.v2(this.cat_4.x,this.cat_4.y+140),this.zhua.position,this.cat_Rect4.width,this.cat_Rect4.height)&&(this.localtime+=.016,this.localtime>=this.car_time4?(this.cat_bar4.getComponent(cc.ProgressBar).progress=1,this.zhua.getComponent(cc.Sprite).spriteFrame=this.cat_sprite):this.cat_bar4.getComponent(cc.ProgressBar).progress=this.localtime/3)},e.prototype.class4ContactEnd=function(){var t=this;cc.audioEngine.stopAllEffects(),this.cat_4.x=this.startposX,this.cat_4.y=this.startposY,this.cat_Rect4.active=!1,this.localtime>=this.car_time4&&(this.localtime=0,this.Cat4Off(),a.default.playEffect(this.CAT),cc.tween(this.cat_4_guang).to(1,{position:cc.v3(400,0,0)}).call(function(){t.currpro++,t.UpProcess()}).start())},e.prototype.class5ContactMove=function(t){this.cat_5.x+=t.getDeltaX(),this.cat_5.y+=t.getDeltaY(),this.localtime+=.016,this.localtime>=this.car_time5?(this.cat_bar5.getComponent(cc.ProgressBar).progress=1,this.zhua.getComponent(cc.Sprite).spriteFrame=this.cat_sprite):this.cat_bar5.getComponent(cc.ProgressBar).progress=this.localtime/3},e.prototype.class5ContactEnd=function(){var t=this;if(this.cat_5.x=this.startposX,this.cat_5.y=this.startposY,this.localtime>=this.car_time5){this.localtime=0,this.Cat5Off(),this.cat_5_node.active=!0,a.default.playEffect(this.CAT);for(var e=function(){var e=50*s,i=s;c.scheduleOnce(function(){t.cat_5_node.children[i].active=!0},.001*e)},c=this,s=0;s<this.cat_5_node.childrenCount;s++)e();this.scheduleOnce(this.onGameSucc,2)}},e.prototype.ShearOff=function(){var t=this;this.shear.off(cc.Node.EventType.TOUCH_MOVE,this.ShearTouchMove,this),this.shear.off(cc.Node.EventType.TOUCH_END,this.ShearTouchend,this),this.currect.active=!0,this.scheduleOnce(function(){t.currect.active=!1},.5)},e.prototype.CleanOff=function(){var t=this;this.clean.off(cc.Node.EventType.TOUCH_MOVE,this.CleanTouchMove,this),this.clean.off(cc.Node.EventType.TOUCH_END,this.CleanTouchEnd,this),this.currect.active=!0,this.scheduleOnce(function(){t.currect.active=!1},.5)},e.prototype.Cat3Off=function(){var t=this;this.cat_3.off(cc.Node.EventType.TOUCH_START,this.class3ContactMove,this),this.cat_3.off(cc.Node.EventType.TOUCH_MOVE,this.class3ContactMove,this),this.cat_3.off(cc.Node.EventType.TOUCH_END,this.class3ContactEnd,this),this.currect.active=!0,this.scheduleOnce(function(){t.currect.active=!1},.5)},e.prototype.Cat4Off=function(){var t=this;this.cat_4.off(cc.Node.EventType.TOUCH_START,this.class4ContactMove,this),this.cat_4.off(cc.Node.EventType.TOUCH_MOVE,this.class4ContactMove,this),this.cat_4.off(cc.Node.EventType.TOUCH_END,this.class4ContactEnd,this),this.currect.active=!0,this.scheduleOnce(function(){t.currect.active=!1},.5)},e.prototype.Cat5Off=function(){this.cat_5.off(cc.Node.EventType.TOUCH_MOVE,this.class5ContactMove,this),this.cat_5.off(cc.Node.EventType.TOUCH_END,this.class5ContactEnd,this)},e.prototype.UpProcess=function(){this.currnum=0;for(var t=0;t<this.process.childrenCount;t++)t==this.currpro?(this.process.children[t].active=!0,this.process.children[t].children[0].x=-2e3,cc.tween(this.process.children[t].children[0]).to(1,{position:cc.v3(0,this.process.children[t].children[0].y)}).start()):this.process.children[t].active=!1;this.title_lable&&(this.title_lable.getComponent(cc.Label).string=this.titlelable[this.currpro])},e.prototype.onGameSucc=function(){cc.find("Canvas/game").getComponent(o.default).answerCrrect({position:cc.Vec2.ZERO,show:!0})},e.prototype._addCircle=function(t,e,c,s){var i=s.getComponent(cc.Mask)._graphics,o=cc.color(0,0,0,255);i.rect(t.x,t.y,e,c),i.lineWidth=2,i.fillColor=o,i.fill()},e.prototype.rectToPoints=function(t,e,c,s){return t.x>e.x-c&&t.x<e.x+c&&t.y>e.y-s&&t.y<e.y+s},i([r(cc.Node)],e.prototype,"process",void 0),i([r(cc.Node)],e.prototype,"shear",void 0),i([r(cc.Node)],e.prototype,"nail",void 0),i([r(cc.Node)],e.prototype,"shearRect",void 0),i([r(cc.Node)],e.prototype,"clean",void 0),i([r(cc.Node)],e.prototype,"cleanRect",void 0),i([r(cc.Node)],e.prototype,"cleanMask",void 0),i([r(cc.Node)],e.prototype,"clean_bar",void 0),i([r(cc.Node)],e.prototype,"zhua",void 0),i([r(cc.SpriteFrame)],e.prototype,"cat_sprite",void 0),i([r(cc.Node)],e.prototype,"cat_3",void 0),i([r(cc.Node)],e.prototype,"cat_Rect3",void 0),i([r(cc.Node)],e.prototype,"cat_bar3",void 0),i([r(cc.Node)],e.prototype,"cat_4",void 0),i([r(cc.Node)],e.prototype,"cat_Rect4",void 0),i([r(cc.Node)],e.prototype,"cat_bar4",void 0),i([r(cc.Node)],e.prototype,"cat_4_guang",void 0),i([r(cc.Node)],e.prototype,"cat_5",void 0),i([r(cc.Node)],e.prototype,"cat_bar5",void 0),i([r(cc.Node)],e.prototype,"cat_5_node",void 0),i([r(cc.Node)],e.prototype,"title_lable",void 0),i([r(cc.Node)],e.prototype,"currect",void 0),i([h],e)}(cc.Component);c.default=l,cc._RF.pop()},{AudioManager:void 0,Game:void 0}]},{},["Cat"]);
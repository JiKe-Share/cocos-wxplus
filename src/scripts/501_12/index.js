window.__require=function t(o,e,i){function n(s,r){if(!e[s]){if(!o[s]){var a=s.split("/");if(a=a[a.length-1],!o[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var h=e[s]={exports:{}};o[s][0].call(h.exports,function(t){return n(o[s][1][t]||t)},h,h.exports,t,o,e,i)}return e[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({lv501_12_gudie_move:[function(t,o,e){"use strict";cc._RF.push(o,"55ca1AvS9pChLCvmh8oLZEA","lv501_12_gudie_move");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,r=c.property,a=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.startPos=cc.v2(0,0),o.endPos=cc.v2(0,0),o.day=0,o}return i(o,t),o.prototype.start=function(){var t=this;this.node.active=!1,this.scheduleOnce(function(){t.node.active=!0,t.node.setPosition(t.startPos);var o=t.endPos.sub(t.startPos).mag()/600;t.node.parent.on(cc.Node.EventType.TOUCH_START,t.close,t),cc.tween(t.node).to(.2,{scale:1}).to(o,{position:cc.v3(t.endPos.x,t.endPos.y)}).to(.2,{scale:1.2}).delay(.2).to(o,{position:cc.v3(t.startPos.x,t.startPos.y)}).union().repeatForever().start()},this.day)},o.prototype.close=function(){this.node.destroy()},n([r(cc.Vec2)],o.prototype,"startPos",void 0),n([r(cc.Vec2)],o.prototype,"endPos",void 0),n([r(cc.Float)],o.prototype,"day",void 0),n([s],o)}(cc.Component);e.default=a,cc._RF.pop()},{}],lv501_12_tool_move:[function(t,o,e){"use strict";cc._RF.push(o,"414b1yx/8NBQrNi3IH0Trlg","lv501_12_tool_move");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,r=c.property,a=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.startPosi=cc.Vec2.ZERO,o.endPosi=cc.Vec2.ZERO,o._moveSpeed=200,o.delayTime=0,o.time=0,o}return i(o,t),Object.defineProperty(o.prototype,"moveSpeed",{get:function(){return this._moveSpeed},set:function(t){this._moveSpeed=t;var o=this.endPosi.sub(this.startPosi).mag()/this._moveSpeed;this.time=o},enumerable:!1,configurable:!0}),o.prototype.onEnable=function(){cc.Tween.stopAllByTarget(this.node),this.node.setPosition(this.startPosi);var t=this.endPosi.sub(this.startPosi).mag()/this._moveSpeed;cc.tween(this.node).delay(this.delayTime).to(t,{x:this.endPosi.x,y:this.endPosi.y}).start()},o.prototype.onDisable=function(){},o.prototype.onHide=function(t){cc.Tween.stopAllByTarget(this.node),this.node.setPosition(this.endPosi);var o=this.endPosi.sub(this.startPosi).mag()/this._moveSpeed;cc.tween(this.node).to(o,{x:this.startPosi.x,y:this.startPosi.y}).call(function(){t&&t()}).start()},o.prototype.onReset=function(){cc.tween(this.node).to(1,{x:this.endPosi.x,y:this.endPosi.y}).start()},n([r(cc.Vec2)],o.prototype,"startPosi",void 0),n([r(cc.Vec2)],o.prototype,"endPosi",void 0),n([r(cc.Float)],o.prototype,"_moveSpeed",void 0),n([r(cc.Float)],o.prototype,"delayTime",void 0),n([r(cc.Float)],o.prototype,"moveSpeed",null),n([r(cc.Float)],o.prototype,"time",void 0),n([s],o)}(cc.Component);e.default=a,cc._RF.pop()},{}],lv_501_12_scc:[function(t,o,e){"use strict";cc._RF.push(o,"8c504TY3LFJdZtviBkiMSlp","lv_501_12_scc");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("AudioManager"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.target=null,o}return i(o,t),o.prototype.start=function(){for(var t=0;t<this.target.childrenCount;t++)this.fangdonanim(this.target.children[t])},o.prototype.fangdonanim=function(t){this.scheduleOnce(function(){c.default.playEffect("lv501_12_9"),t.active=!0,t.opacity=0,cc.tween(t).by(.5,{y:-50,opacity:255}).start()},.75)},n([a(cc.Node)],o.prototype,"target",void 0),n([r],o)}(cc.Component);e.default=l,cc._RF.pop()},{AudioManager:void 0}],lv_501_12_task1:[function(t,o,e){"use strict";cc._RF.push(o,"52486xBfEtBCpOPjv9P31r0","lv_501_12_task1");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("AudioManager"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.delayTime=0,o.isworking=!1,o.reqi=null,o.kaiguan=null,o.dipan=null,o.lv=0,o.guide=null,o}return i(o,t),o.prototype.start=function(){this.scheduleOnce(this.addEvent,this.delayTime),this.reqi.opacity=0},o.prototype.addEvent=function(){var t=this;this.guide&&this.scheduleOnce(function(){t.guide.active=!0},1)},o.prototype.onTouch_end=function(){var t=this;this.guide.destroy(),c.default.playEffect("lv501_12_6"),this.kaiguan.children[0].active=!0,this.isworking=!0,this.scheduleOnce(function(){t.dipan.children[0].active=!0,t.dipan.children[0].opacity=0,cc.tween(t.dipan.children[0]).to(.5,{opacity:255}).call(function(){cc.tween(t.reqi).to(.5,{opacity:255}).call(function(){t.node.dispatchEvent(new cc.Event.EventCustom("DX_CLEAN_COMPONE",!0))}).start()}).start()},1)},n([a(cc.Float)],o.prototype,"delayTime",void 0),n([a(cc.Node)],o.prototype,"reqi",void 0),n([a(cc.Node)],o.prototype,"kaiguan",void 0),n([a(cc.Node)],o.prototype,"dipan",void 0),n([a(cc.Float)],o.prototype,"lv",void 0),n([a(cc.Node)],o.prototype,"guide",void 0),n([r],o)}(cc.Component);e.default=l,cc._RF.pop()},{AudioManager:void 0}],lv_501_12_task2:[function(t,o,e){"use strict";cc._RF.push(o,"83211mLoLNFBI62XcbruEHD","lv_501_12_task2");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("AudioManager"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.delayTime=0,o.isworking=!1,o.target=null,o.bing1=null,o.bing2=null,o.jishiqi=null,o.tool=null,o.tool1=null,o.count=0,o.guide=null,o.isTouching=!1,o}return i(o,t),o.prototype.start=function(){this.scheduleOnce(this.addEvent,this.delayTime),this.initData()},o.prototype.addEvent=function(){var t=this.tool;t.on(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouch_end,this);var o=this.tool1;o.on(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),o.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),o.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),o.on(cc.Node.EventType.TOUCH_END,this.onTouch_end,this)},o.prototype.onTouch_start=function(t){this.isTouching=!0,c.default.playEffect("lv501_fang"),t.target.scale=1},o.prototype.onTouch_move=function(t){this.isTouching&&(this.isworking||(t.target==this.tool?this.tool.setPosition(this.tool.getPosition().add(t.getDelta().mul(.6666666666666666))):this.tool1.setPosition(this.tool1.getPosition().add(t.getDelta().mul(.6666666666666666)))))},o.prototype.onTouch_end=function(t){this.isTouching&&(this.isTouching=!1,this.isworking||(this.rectrect(this.target,t.target)?(t.target.x>=0?(this.bing2.active=!0,t.target.active=!1):(this.bing1.active=!0,t.target.active=!1),c.default.playEffect("lv501_12_4"),this.count++,2==this.count&&(this.jishiqi.active=!0,this.TimerRotation())):t.target.scale=.8))},o.prototype.MoveAction=function(t,o,e,i){cc.tween(t).by(1.5,{position:cc.v3(o,e)}).call(function(){i()}).start()},o.prototype.rectrect=function(t,o,e){void 0===e&&(e=0);var i=cc.rect(-t.width/2,-t.height/2+e,t.width,t.height),n=cc.rect(o.x,o.y+o.parent.y-o.width/2,o.width/2,o.height);return!!cc.Intersection.rectRect(n,i)},o.prototype.playinteraction5=function(){},o.prototype.TimerRotation=function(){this.jishiqi.getChildByName("zhizhen").angle=140,this.jishiqi.getChildByName("black").getComponent(cc.Sprite).fillRange=0,this.schedule(this.timeradd,.15),this.jishiqi.getChildByName("black").getComponent(cc.Sprite).fillCenter=cc.v2(.5,.5),this.bing1.children[0].active=!0,this.bing2.children[0].active=!0,this.bing1.children[0].opacity=0,this.bing2.children[0].opacity=0},o.prototype.timeradd=function(){var t=this,o=this.jishiqi.getChildByName("zhizhen"),e=this.jishiqi.getChildByName("black").getComponent(cc.Sprite);if(e.fillRange>=.75)return this.unschedule(this.timeradd),cc.audioEngine.stopAllEffects(),c.default.playEffect("lv501_jsq"),void cc.tween(this.jishiqi).to(.25,{scale:1.2}).to(.25,{scale:1.1}).call(function(){t.onCompOne()}).start();e.fillRange>=.175&&e.fillRange<.325||(e.fillRange>=.325&&e.fillRange<.525?(this.bing1.children[0].opacity+=28.333333333333332,this.bing2.children[0].opacity+=28.333333333333332):e.fillRange>=.525&&e.fillRange<.75&&this.bing1.children[0].opacity<255&&(this.bing1.children[0].opacity=255,this.bing2.children[0].opacity=255)),o.angle-=10,e.fillRange+=.027777777777777776},o.prototype.onCompOne=function(){var t=this;cc.tween(this.tool.parent).to(1,{opacity:0}).call(function(){t.node.dispatchEvent(new cc.Event.EventCustom("DX_CLEAN_COMPONE",!0))}).start()},o.prototype.initData=function(){this.addEvent(),this.jishiqi.active=!1},n([a(cc.Float)],o.prototype,"delayTime",void 0),n([a(cc.Node)],o.prototype,"target",void 0),n([a(cc.Node)],o.prototype,"bing1",void 0),n([a(cc.Node)],o.prototype,"bing2",void 0),n([a(cc.Node)],o.prototype,"jishiqi",void 0),n([a(cc.Node)],o.prototype,"tool",void 0),n([a(cc.Node)],o.prototype,"tool1",void 0),n([a(cc.Node)],o.prototype,"guide",void 0),n([r],o)}(cc.Component);e.default=l,cc._RF.pop()},{AudioManager:void 0}],lv_501_12_task3:[function(t,o,e){"use strict";cc._RF.push(o,"46c14GUsOpBbJ2sgODE6fk6","lv_501_12_task3");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("AudioManager"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.delayTime=0,o.isworking=!1,o.target=null,o.target1=null,o.rect=null,o.guochan=null,o.guochan1=null,o.tool=null,o.rq1=null,o.rq2=null,o.count=0,o.isTouching=!1,o}return i(o,t),o.prototype.start=function(){this.scheduleOnce(this.addEvent,this.delayTime),this.initData(),this.tool.x=-500,cc.tween(this.tool).to(1,{x:0}).start()},o.prototype.addEvent=function(){var t=this.tool;t.on(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouch_end,this)},o.prototype.onTouch_start=function(t){this.isTouching=!0,t.target.scale=1,t.target.angle=-125,c.default.playEffect("lv501_fang")},o.prototype.onTouch_move=function(t){this.isTouching&&(this.isworking||this.tool.setPosition(this.tool.getPosition().add(t.getDelta().mul(.6666666666666666))))},o.prototype.onTouch_end=function(){var t=this;if(this.isTouching&&(this.isTouching=!1,!this.isworking)){if(this.rectrect(this.rect,this.tool))if(this.tool.x<180){if(this.target.children[1].x>=0)return;this.tool.active=!1;var o=this.guochan;c.default.playEffect("lv501_12_1"),cc.tween(this.target.children[0]).to(1,{position:cc.v3(-300,0)}).start(),cc.tween(this.target.children[1]).to(1,{position:cc.v3(0,0)}).call(function(){o.stopAllActions(),o.active=!1,t.tool.active=!0,cc.audioEngine.stopAllEffects(),t.count+=1,t.rq1.active=!0,c.default.playEffect("lv501_12_4"),t.count>=2&&t.onCompOne()}).start(),o.position=cc.v3(this.target.x+o.width/2+80,this.target.y),o.active=!0,cc.tween(o).sequence(cc.tween(o).to(.1,{position:cc.v3(o.x-50,o.y)}).start(),cc.tween(o).to(.1,{position:cc.v3(o.x+50,o.y)}).start()).repeatForever().start()}else{if(this.target1.children[1].x>=0)return;this.tool.active=!1,o=this.guochan1,c.default.playEffect("lv501_12_1"),cc.tween(this.target1.children[0]).to(1,{position:cc.v3(-300,0)}).start(),cc.tween(this.target1.children[1]).to(1,{position:cc.v3(0,0)}).call(function(){o.stopAllActions(),o.active=!1,cc.audioEngine.stopAllEffects(),t.tool.active=!0,t.count+=1,t.rq2.active=!0,t.count>=2&&t.onCompOne()}).start(),o.position=cc.v3(this.target1.x+o.width/2+80,this.target1.y),o.active=!0,cc.tween(o).sequence(cc.tween(o).to(.1,{position:cc.v3(o.x-50,o.y)}).start(),cc.tween(o).to(.1,{position:cc.v3(o.x+50,o.y)}).start()).repeatForever().start()}this.tool.scale=.8,this.tool.angle=-90}},o.prototype.MoveAction=function(t,o,e,i){cc.tween(t).by(1.5,{position:cc.v3(o,e)}).call(function(){i()}).start()},o.prototype.rectrect=function(t,o,e){void 0===e&&(e=0);var i=cc.rect(-t.width/2,-t.height/2+e,t.width,t.height),n=cc.rect(-o.width/2,-o.height/2+e,o.width,o.height);return!!cc.Intersection.rectRect(n,i)},o.prototype.onCompOne=function(){var t=this;cc.tween(this.tool).to(1,{opacity:0}).call(function(){t.node.dispatchEvent(new cc.Event.EventCustom("DX_CLEAN_COMPONE",!0))}).start()},o.prototype.initData=function(){this.addEvent()},n([a(cc.Float)],o.prototype,"delayTime",void 0),n([a(cc.Node)],o.prototype,"target",void 0),n([a(cc.Node)],o.prototype,"target1",void 0),n([a(cc.Node)],o.prototype,"rect",void 0),n([a(cc.Node),a(cc.Node)],o.prototype,"guochan",void 0),n([a(cc.Node)],o.prototype,"guochan1",void 0),n([a(cc.Node)],o.prototype,"tool",void 0),n([a(cc.Node)],o.prototype,"rq1",void 0),n([a(cc.Node)],o.prototype,"rq2",void 0),n([r],o)}(cc.Component);e.default=l,cc._RF.pop()},{AudioManager:void 0}],lv_501_12_task4:[function(t,o,e){"use strict";cc._RF.push(o,"2a686knaG1KY6oSFRN+gbsH","lv_501_12_task4");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("AudioManager"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.delayTime=0,o.bing1=null,o.bing2=null,o.jishiqi=null,o.count=0,o.kaolu=null,o}return i(o,t),o.prototype.start=function(){this.initData(),this.TimerRotation()},o.prototype.addEvent=function(){},o.prototype.TimerRotation=function(){this.jishiqi.getChildByName("zhizhen").angle=140,this.jishiqi.getChildByName("black").getComponent(cc.Sprite).fillRange=0,this.schedule(this.timeradd,.15),this.jishiqi.getChildByName("black").getComponent(cc.Sprite).fillCenter=cc.v2(.5,.5),this.bing1.children[0].active=!0,this.bing2.children[0].active=!0,this.bing1.children[0].opacity=0,this.bing2.children[0].opacity=0},o.prototype.timeradd=function(){var t=this,o=this.jishiqi.getChildByName("zhizhen"),e=this.jishiqi.getChildByName("black").getComponent(cc.Sprite);if(e.fillRange>=.75)return this.unschedule(this.timeradd),cc.audioEngine.stopAllEffects(),c.default.playEffect("lv501_jsq"),void cc.tween(this.jishiqi).to(.25,{scale:1.2}).to(.25,{scale:1.1}).call(function(){t.kaolu.children[0].children[0].active=!1,c.default.playEffect("lv501_12_3"),t.scheduleOnce(function(){t.onCompOne()})}).start();e.fillRange>=.175&&e.fillRange<.325||(e.fillRange>=.325&&e.fillRange<.525?(this.bing1.children[0].opacity+=28.333333333333332,this.bing2.children[0].opacity+=28.333333333333332):e.fillRange>=.525&&e.fillRange<.75&&this.bing1.children[0].opacity<255&&(this.bing1.children[0].opacity=255,this.bing2.children[0].opacity=255)),o.angle-=10,e.fillRange+=.027777777777777776},o.prototype.onCompOne=function(){var t=this;cc.tween(this.kaolu).to(1,{y:500,opacity:0}).call(function(){t.node.dispatchEvent(new cc.Event.EventCustom("DX_CLEAN_COMPONE",!0))}).start()},o.prototype.initData=function(){this.addEvent()},n([a(cc.Float)],o.prototype,"delayTime",void 0),n([a(cc.Node)],o.prototype,"bing1",void 0),n([a(cc.Node)],o.prototype,"bing2",void 0),n([a(cc.Node)],o.prototype,"jishiqi",void 0),n([a(cc.Node)],o.prototype,"kaolu",void 0),n([r],o)}(cc.Component);e.default=l,cc._RF.pop()},{AudioManager:void 0}],lv_501_12_task5:[function(t,o,e){"use strict";cc._RF.push(o,"87b5efZWTpBBIpAg4eUC3qX","lv_501_12_task5");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("AudioManager"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.tools=null,o.delayTime=0,o.dianzi=null,o.isworking=!1,o.target=null,o.lv=0,o.count=0,o.tool=null,o.targetrect=null,o.isTouching=!1,o}return i(o,t),o.prototype.start=function(){var t=this;this.scheduleOnce(this.addEvent,this.delayTime),this.initData(),this.dianzi.y=-700,this.dianzi.opacity=-700,this.target.y=700,this.target.opacity=0,cc.tween(this.dianzi).to(.5,{y:-60,opacity:255}).call(function(){cc.tween(t.target).to(.5,{y:-55.411,opacity:255}).call(function(){t.selectortool()}).start()}).start()},o.prototype.addEvent=function(){for(var t=0;t<this.tools.childrenCount;t++){var o=this.tools.children[t];o.on(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),o.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),o.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),o.on(cc.Node.EventType.TOUCH_END,this.onTouch_end,this)}},o.prototype.selectortool=function(){var t=this;this.isworking=!0,this.tool=this.tools.children[this.count],cc.tween(this.tool).to(1,{x:0}).call(function(){t.isworking=!1}).start()},o.prototype.onTouch_start=function(){this.isTouching=!0,this.tool.scale=1,c.default.playEffect("lv501_fang")},o.prototype.onTouch_move=function(t){this.isTouching&&(this.isworking||this.tool.setPosition(this.tool.getPosition().add(t.getDelta().mul(.6666666666666666))))},o.prototype.onTouch_end=function(t){this.isTouching&&(this.isTouching=!1,this.isworking||(this.rectrect(this.targetrect,t.target)?(c.default.playEffect("lv501_fang"),this.target.children[this.count].active=!0,t.target.active=!1,this.count++,this.count>=this.tools.childrenCount?this.onCompOne():this.selectortool()):this.tool.scale=.8))},o.prototype.rectrect=function(t,o,e){void 0===e&&(e=0);var i=cc.rect(-t.width/2,-t.height/2+e,t.width,t.height),n=cc.rect(-o.width/2,-o.height/2+e,o.width,o.height);return!!cc.Intersection.rectRect(n,i)},o.prototype.onCompOne=function(){var t=this;cc.tween(this.tool).to(1,{opacity:0}).call(function(){t.node.dispatchEvent(new cc.Event.EventCustom("DX_CLEAN_COMPONE",!0))}).start()},o.prototype.initData=function(){this.addEvent();for(var t=0;t<this.target.childrenCount;t++)this.target.children[t].active=!1},n([a(cc.Node)],o.prototype,"tools",void 0),n([a(cc.Float)],o.prototype,"delayTime",void 0),n([a(cc.Node)],o.prototype,"dianzi",void 0),n([a],o.prototype,"isworking",void 0),n([a(cc.Node)],o.prototype,"target",void 0),n([a(cc.Float)],o.prototype,"lv",void 0),n([a(cc.Node)],o.prototype,"targetrect",void 0),n([r],o)}(cc.Component);e.default=l,cc._RF.pop()},{AudioManager:void 0}],lv_501_12_task6:[function(t,o,e){"use strict";cc._RF.push(o,"40435rLc2lLxZR8qAI49Lf7","lv_501_12_task6");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("AudioManager"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.sizeNode=null,o.tool=null,o.rect=null,o.toolWorkingAngle=0,o.toolWorkingscale=1,o.delayTime=0,o.audioNameKey="",o.lv=0,o.mask=null,o.hanbao=null,o.caidai=null,o.purgePosCount=0,o.bq=null,o.isTouching=!1,o.isplay=!1,o}return i(o,t),o.prototype.onLoad=function(){this.maskPolygon=this.mask.getComponent(cc.PolygonCollider).points},o.prototype.start=function(){var t=this;this.scheduleOnce(this.addEvent,this.delayTime),this.scheduleOnce(function(){t.refreshProgressBar(0)},0),this.initData()},o.prototype.addEvent=function(){var t=this.rect;t.on(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouch_end,this)},o.prototype.removeEvent=function(){var t=this.rect;t.off(cc.Node.EventType.TOUCH_START,this.onTouch_start,this),t.off(cc.Node.EventType.TOUCH_MOVE,this.onTouch_move,this),t.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouch_end,this),t.off(cc.Node.EventType.TOUCH_END,this.onTouch_end,this)},o.prototype.onTouch_start=function(){this.isTouching=!0,this.tool.angle=this.toolWorkingAngle,c.default.playEffect("lv501_fang"),this.tool.scale=1},o.prototype.onTouch_move=function(t){if(this.isTouching){this.tool.setPosition(this.tool.getPosition().add(t.getDelta().mul(.6666666666666666)));var o=this.mask.convertToNodeSpaceAR(this.tool.convertToWorldSpaceAR(cc.Vec2.ZERO));this._addCircle(o);for(var e=this.tool.getBoundingBox(),i=0;i<this.cleanPos.length;i++)if(null!=this.cleanPos[i]&&e.contains(this.cleanPos[i])){this.purgePosCount+=1,this.cleanPos[i]=null;var n=this.purgePosCount/(this.cleanPos.length/10*8);n>1?(this.refreshProgressBar(1),this.isplay||(c.default.playEffect("lv501_12_7"),this.isplay=!1)):this.refreshProgressBar(n)}}},o.prototype.onTouch_end=function(){var t=this;this.isTouching&&(this.isTouching=!1,""!=this.audioNameKey&&cc.audioEngine.stopAllEffects(),this.purgePosCount>this.cleanPos.length/10*8?cc.tween(this.tool).to(1,{opacity:0}).call(function(){t.hanbao.active=!0,c.default.playEffect("lv501_fang"),t.scheduleOnce(function(){t.showbiaoqing(),cc.tween(t.caidai).to(.5,{scale:1}).to(.5,{y:-200,opacity:0}).call(function(){t.scheduleOnce(function(){t.node.dispatchEvent(new cc.Event.EventCustom("DX_CLEAN_COMPONE",!0))},1.5)}).start()},1.2)}).start():this.tool.scale=.8)},o.prototype.initData=function(){var t=this.sizeNode.width,o=this.sizeNode.height;this.cleanPos=[],this.purgePosCount=0;for(var e=this.tool.width/4,i=0;i<t/e;i++)for(var n=0;n<o/e;n++){var c=cc.v2(-t/2+e*i,o/2-e*n);cc.Intersection.pointInPolygon(c,this.maskPolygon)&&this.cleanPos.push(c)}},o.prototype._addCircle=function(t){var o=this.mask.getComponent(cc.Mask)._graphics;o.fillColor=cc.Color.BLACK,o.circle(t.x,t.y,this.tool.width),o.fill()},o.prototype.showbiaoqing=function(){var t=this;c.default.playEffect("lv501_good"),this.bq.active=!0,this.bq.scale=0,cc.tween(this.bq).to(.5,{scale:1}).to(.2,{angle:45}).to(.2,{angle:-45}).to(.1,{angle:0}).delay(1).call(function(){t.bq.active=!1}).start()},o.prototype.refreshProgressBar=function(t){var o=new cc.Event.EventCustom("DX_CLEAN_PROGRESSBAR",!0);o.setUserData(t),this.node.dispatchEvent(o)},n([a(cc.Node)],o.prototype,"sizeNode",void 0),n([a(cc.Node)],o.prototype,"tool",void 0),n([a(cc.Node)],o.prototype,"rect",void 0),n([a(cc.Float)],o.prototype,"toolWorkingAngle",void 0),n([a(cc.Float)],o.prototype,"toolWorkingscale",void 0),n([a(cc.Float)],o.prototype,"delayTime",void 0),n([a(cc.String)],o.prototype,"audioNameKey",void 0),n([a(cc.Float)],o.prototype,"lv",void 0),n([a(cc.Node)],o.prototype,"mask",void 0),n([a(cc.Node)],o.prototype,"hanbao",void 0),n([a(cc.Node)],o.prototype,"caidai",void 0),n([a(cc.Node)],o.prototype,"bq",void 0),n([r],o)}(cc.Component);e.default=l,cc._RF.pop()},{AudioManager:void 0}],lv_501_12:[function(t,o,e){"use strict";cc._RF.push(o,"f3cac72OUhMdJsNtdG8YHFt","lv_501_12");var i=__extends,n=__decorate;Object.defineProperty(e,"__esModule",{value:!0});var c=t("Game"),s=t("AudioManager"),r=cc._decorator,a=r.ccclass,l=r.property,h=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.taskArr=[],o.titleArr=["\u6b65\u9aa4\u540d\u79f0-1","\u6b65\u9aa4\u540d\u79f0-2"],o.progressBar=null,o.lbl_tile=null,o.node_xx=null,o.node_ef_stars=null,o.node_succ=null,o.node_splash=null,o.totalProgress=0,o.currProgress=0,o.node_dd=null,o}return i(o,t),o.prototype.onLoad=function(){this.progressBar=this.node.getChildByName("progressBar").getComponent(cc.ProgressBar),this.lbl_tile=this.node.getChildByName("lbl_title").getComponent(cc.Label),this.node_dd=this.node.getChildByName("dd"),this.node_xx=this.node.getChildByName("xx"),this.node_ef_stars=this.node.getChildByName("ef_stars"),this.node_succ=this.node.getChildByName("succ"),this.node_splash=this.node.getChildByName("splash"),null!=this.node_xx&&(this.node_xx.active=!1),this.node_ef_stars.active=!1,this.node_succ.active=!1,this.totalProgress=this.taskArr.length,this.currProgress=0,this.refreshTask()},o.prototype.onShowDD=function(){null!=this.node_dd&&(this.node_dd.active=!0,this.node_dd.scale=0,cc.tween(this.node_dd).to(.6,{scale:1.1}).to(.1,{scale:1}).delay(.5).to(.2,{scale:0}).start())},o.prototype.start=function(){var t=this;this.node.on("DX_CLEAN_SPLASH",this.showSplash,this),this.node.on("DX_CLEAN_COMPONE",this.onAddProgress,this),this.node.on("DX_CLEAN_PROGRESSBAR",this.onRefreshProgressBar,this),this.node.on("DX_dd",this.onShowDD,this),cc.sys.isBrowser&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(o){o.keyCode==cc.macro.KEY.space&&t.onAddProgress(null)},this)},o.prototype.onDestroy=function(){this.node.off("DX_CLEAN_SPLASH",this.showSplash,this),this.node.off("DX_CLEAN_COMPONE",this.onAddProgress,this),this.node.off("DX_CLEAN_PROGRESSBAR",this.onRefreshProgressBar,this)},o.prototype.onEnable=function(){},o.prototype.onDisable=function(){cc.audioEngine.stopAllEffects(),setTimeout(function(){s.default.playMusic(s.default.audioName.BACKGROUND)},0)},o.prototype.showSplash=function(t){null!=t&&t.stopPropagation(),cc.Tween.stopAllByTarget(this.node_splash),this.node_splash.opacity=255,cc.tween(this.node_splash).to(1,{opacity:0},{easing:"fade"}).start()},o.prototype.onAddProgress=function(t){null!=t&&t.stopPropagation(),this.currProgress+=1,this.refreshTask(),this.currProgress>=this.totalProgress&&this.onGameSucc()},o.prototype.onRefreshProgressBar=function(t){var o=t.getUserData();null!=t&&t.stopPropagation(),this.progressBar.progress=o,this.progressBar.node.opacity=255},o.prototype.refreshTask=function(){for(var t=0;t<this.totalProgress;t++)this.taskArr[t].active=t==this.currProgress;this.lbl_tile.string=this.titleArr[this.currProgress],this.progressBar.node.opacity=0},o.prototype.onGameSucc=function(){this.showSplash(null),this.lbl_tile.string="",this.node_succ.active=!0,this.node_ef_stars.active=!0,this.scheduleOnce(function(){cc.find("Canvas/game").getComponent(c.default).answerCrrect({position:cc.Vec2.ZERO,show:!0})},3)},n([l([cc.Node])],o.prototype,"taskArr",void 0),n([l([cc.String])],o.prototype,"titleArr",void 0),n([a],o)}(cc.Component);e.default=h,cc._RF.pop()},{AudioManager:void 0,Game:void 0}]},{},["lv_501_12","lv_501_12_scc","lv_501_12_task1","lv_501_12_task2","lv_501_12_task3","lv_501_12_task4","lv_501_12_task5","lv_501_12_task6","lv501_12_gudie_move","lv501_12_tool_move"]);
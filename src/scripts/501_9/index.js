window.__require=function t(e,o,i){function s(n,a){if(!o[n]){if(!e[n]){var r=n.split("/");if(r=r[r.length-1],!e[r]){var h="function"==typeof __require&&__require;if(!a&&h)return h(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+n+"'")}n=r}var l=o[n]={exports:{}};e[n][0].call(l.exports,function(t){return s(e[n][1][t]||t)},l,l.exports,t,e,o,i)}return o[n].exports}for(var c="function"==typeof __require&&__require,n=0;n<i.length;n++)s(i[n]);return s}({lv501_9_gudie_move_label:[function(t,e,o){"use strict";cc._RF.push(e,"08531OIdQVBm7Y5lC8eVmW2","lv501_9_gudie_move_label");var i=__extends,s=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,a=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=null,e.endPos=null,e.shouzi=null,e}return i(e,t),e.prototype.start=function(){this.shouzi.setPosition(this.startPos);var t=this.endPos.sub(this.startPos).mag()/600;this.node.parent.on(cc.Node.EventType.TOUCH_START,this.close,this),cc.tween(this.shouzi).to(.2,{scale:1}).to(t,{position:cc.v3(this.endPos.x,this.endPos.y)}).to(.2,{scale:1.2}).delay(.2).to(t,{position:cc.v3(this.startPos.x,this.startPos.y)}).union().repeatForever().start()},e.prototype.close=function(){this.node.destroy()},s([a(cc.Vec2)],e.prototype,"startPos",void 0),s([a(cc.Vec2)],e.prototype,"endPos",void 0),s([a(cc.Node)],e.prototype,"shouzi",void 0),s([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],lv501_9_gudie_move:[function(t,e,o){"use strict";cc._RF.push(e,"3f92e/8+kFErYsADVaaZmcF","lv501_9_gudie_move");var i=__extends,s=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,n=c.ccclass,a=c.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=null,e.endPos=null,e.day=0,e.finger=null,e.hint=null,e}return i(e,t),e.prototype.start=function(){var t=this;null===this.finger?(this.node.active=!1,this.scheduleOnce(function(){t.node.active=!0,t.node.setPosition(t.startPos);var e=t.endPos.sub(t.startPos).mag()/600;t.node.parent.on(cc.Node.EventType.TOUCH_START,t.close,t),cc.tween(t.node).to(.2,{scale:1}).to(e,{position:cc.v3(t.endPos.x,t.endPos.y)}).to(.2,{scale:1.2}).delay(.2).to(e,{position:cc.v3(t.startPos.x,t.startPos.y)}).union().repeatForever().start()},this.day)):(this.finger.active=!1,this.hint.active=!1,this.scheduleOnce(function(){t.finger.active=!0,t.hint.active=!0,t.finger.setPosition(t.startPos);var e=t.endPos.sub(t.startPos).mag()/600;t.node.parent.on(cc.Node.EventType.TOUCH_START,t.close,t),cc.tween(t.finger).to(.2,{scale:1}).to(e,{position:cc.v3(t.endPos.x,t.endPos.y)}).to(.2,{scale:1.2}).delay(.2).to(e,{position:cc.v3(t.startPos.x,t.startPos.y)}).union().repeatForever().start()},this.day))},e.prototype.close=function(){this.node.destroy()},s([a(cc.Vec2)],e.prototype,"startPos",void 0),s([a(cc.Vec2)],e.prototype,"endPos",void 0),s([a(cc.Float)],e.prototype,"day",void 0),s([a(cc.Node)],e.prototype,"finger",void 0),s([a(cc.Node)],e.prototype,"hint",void 0),s([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],lv_501_9_move:[function(t,e,o){"use strict";cc._RF.push(e,"f47feiAK7VLOahZ2IcVicka","lv_501_9_move");var i=__extends,s=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=t("lv_501_9"),n=cc._decorator,a=n.ccclass,r=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scriptsParent=null,e.level=null,e.icon=[],e}return i(e,t),e.prototype.onLoad=function(){this.level=this.scriptsParent.getComponent(c.default),this.BtnOnClick()},e.prototype.init=function(t){this.id=t,this.id==this.level.selecttype?(this.node.y=10,this.node.getComponent(cc.Sprite).spriteFrame=this.icon[1]):(this.node.y=0,this.node.getComponent(cc.Sprite).spriteFrame=this.icon[0])},e.prototype.BtnOnClick=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.TouchEnd,this)},e.prototype.BtnOffClick=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.TouchEnd,this)},e.prototype.TouchEnd=function(){this.level.selecttype=this.id,this.level.updateitem()},s([r(cc.Node)],e.prototype,"scriptsParent",void 0),s([r([cc.SpriteFrame])],e.prototype,"icon",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{lv_501_9:"lv_501_9"}],lv_501_9:[function(t,e,o){"use strict";cc._RF.push(e,"9a5c8VHuZ5A6oLsllq1FYLV","lv_501_9");var i=__extends,s=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var c=t("MathTool"),n=t("Game"),a=t("AudioManager"),r=t("lv_501_9_move"),h=cc._decorator,l=h.ccclass,p=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.taskNode=null,e.titlelist=[],e.dd=null,e.items=null,e.grap=null,e.plan=0,e.successnum=9,e.localnum=0,e.graphics=null,e.rect=null,e.itemsp=[],e.itemgroup=null,e.tiaoliao=null,e.selecttype=0,e.startTime=0,e.ismove=!1,e.cakeradius=0,e.sruebtn=null,e.cleanpos=[],e.isscc=!1,e.pos1=cc.v2(0,0),e.lastpos=cc.v2(0,0),e.points=[],e.cleamposnum=0,e.iscreat=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.dd=this.node.getChildByName("dd"),this.UpNode(),cc.sys.isBrowser&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){e.keyCode==cc.macro.KEY.space&&(t.plan++,t.UpNode())},this)},e.prototype.UpNode=function(){for(var t=0;t<this.taskNode.childrenCount;t++)t==this.plan?this.taskNode.children[t].active=!0:this.taskNode.children[t].active=!1;this.title=this.taskNode.children[this.plan].getChildByName("title"),this.title.getComponent(cc.Label).string=this.titlelist[this.plan],this.plan<2?(this.toolNode=this.taskNode.children[this.plan].getChildByName("tool"),this.tool=this.toolNode.getChildByName("tool"),this.mask=this.taskNode.children[this.plan].getChildByName("mask"),this.startpos=this.tool.position,cc.tween(this.toolNode).to(.5,{position:cc.v3(0,0)}).start(),this.tool.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.on(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.on(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this),this.successnum=this.mask.childrenCount,this.localnum=0):(this.toolNode=this.taskNode.children[this.plan].getChildByName("tool"),this.tool=this.toolNode.getChildByName("tool"),this.tool.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.on(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.on(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this),this.successnum=this.mask.childrenCount,this.updateitem(),this.sruebtn.on(cc.Node.EventType.TOUCH_END,this.gamescc,this),this.localnum=0)},e.prototype.gamescc=function(){this.isscc||(this.GameWin(),this.isscc=!0)},e.prototype.updateitem=function(){for(var t=0;t<this.itemgroup.childrenCount;t++)this.itemgroup.children[t].getComponent(r.default).init(t)},e.prototype.TouchStart=function(t){if(this.toolNode.getChildByName("tool_icon")&&(this.toolNode.getChildByName("tool_icon").active=!1),this.startTime=(new Date).getTime(),this.plan>=2){var e=this.transformToWorldSpaceAR(t.getLocation(),this.tool);this.sruebtn.active=!0,5==this.selecttype&&this.createitem(this.selecttype,e),this.drawclick(t),0===this.selecttype?(this.pos1=e,this.graphics=this.creategraphics().getComponent(cc.Graphics),this.graphics.moveTo(e.x,e.y)):2===this.selecttype&&(this.pos1=e,this.graphics=this.creategraphics().getComponent(cc.Graphics),this.graphics.moveTo(e.x,e.y))}},e.prototype.TouchSMove=function(t){if(this.iscreat=!0,this.plan>=2)this.transformToWorldSpaceAR(t.getLocation(),this.tool).mag()<this.cakeradius&&this.drawmove(t);else{var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.tool.x=e.x,this.tool.y=e.y,this.localnum==this.successnum)return;var o=this.mask.children[0],i=cc.rect(o.x,o.y,o.width,o.height),s=cc.v2(e.x+this.tool.children[0].x,e.y+this.tool.children[0].y);c.default.rectPoint(s,i)&&(0==this.plan?this.Task1Func():1==this.plan?this.Task2Func():this.plan)}},e.prototype.BtnOffClick=function(){this.tool.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.off(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.off(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)},e.prototype.TouchSEnd=function(){this.plan>=2?(this.iscreat=!1,console.log("=========1")):(this.tool.position=this.startpos,this.SuccessFunc())},e.prototype.item=function(t){this.selecttype=t,console.log(t)},e.prototype.SuccessFunc=function(){var t=this;console.log(this.plan,this.successnum,this.localnum),4==this.plan&&this.cleamposnum>this.cleanpos.length/10*9&&(this.localnum=this.successnum),this.successnum==this.localnum&&(this.BtnOffClick(),this.plan+=1,cc.tween(this.toolNode).to(.5,{position:cc.v3(800,0)}).call(function(){t.plan==t.taskNode.childrenCount?t.GameWin():10==t.plan?t.LastStep():t.UpNode()}).start())},e.prototype.Task1Func=function(){var t=this,e=this.mask.children[0];if(0==e.children[0].opacity){this.toolNode.active=!1;var o=this.taskNode.children[this.plan].getChildByName("action");o.active=!0,cc.tween(o).to(.3,{position:cc.v3(110,325)}).to(.6,{position:cc.v3(80,325)}).to(.3,{position:cc.v3(95,325)}).call(function(){o.active=!1}).start(),cc.tween(e.children[0]).to(1.2,{opacity:255}).call(function(){t.localnum=1,t.successnum=1,t.SuccessFunc()}).start()}},e.prototype.Task2Func=function(){var t=this,e=this.mask.children[0];if(0==e.children[0].scale){this.toolNode.active=!1;var o=this.taskNode.children[this.plan].getChildByName("action");o.active=!0,cc.tween(o).to(1,{angle:360}).call(function(){o.active=!1}).start(),cc.tween(e.children[0]).to(1,{scale:1}).call(function(){t.localnum=1,t.successnum=1,t.SuccessFunc()}).start()}},e.prototype.LastStep=function(){for(var t=0;t<this.taskNode.childrenCount;t++)t==this.plan?this.taskNode.children[t].active=!0:this.taskNode.children[t].active=!1;this.localnum=0,this.tool=this.taskNode.children[this.plan].getChildByName("di"),this.title=this.taskNode.children[this.plan].getChildByName("title"),this.title.getComponent(cc.Label).string=this.titlelist[this.plan],this.tool.on(cc.Node.EventType.TOUCH_START,this.GadgetTapBegin,this),this.tool.on(cc.Node.EventType.TOUCH_END,this.ToolTouchEnd,this)},e.prototype.GadgetTapBegin=function(t){var e=t.getLocation();this.startposx=e.x,this.startposx=e.y},e.prototype.ToolTouchEnd=function(t){var e=this,o=t.getLocation();this.startposx,o.x;var i=this.startposx-o.y;if(this.startTime=0,i>0)0==this.localnum&&(this.localnum+=1,this.tool.parent.getChildByName("mask").active=!1,this.tool.parent.getChildByName("mask1").active=!0);else if(1==this.localnum){this.localnum+=1,this.tool.parent.getChildByName("mask1").active=!1;var s=this.tool.parent.getChildByName("mask2");s.active=!0,cc.tween(s.children[1]).to(1,{position:cc.v3(80,50)}).call(function(){cc.tween(s).to(.5,{angle:-90,position:cc.v3(-60,0)}).delay(.5).call(function(){e.GameWin()}).start()}).start()}},e.prototype.drawmove=function(t){var e=this.transformToWorldSpaceAR(t.getLocation(),this.tool);if(e.mag()<this.cakeradius)switch(this.selecttype){case 0:this.graphics.lineTo(e.x,e.y),this.graphics.stroke(),this.graphics.lineWidth=40,this.graphics.strokeColor=cc.Color.fromHEX(this.graphics.strokeColor,"#E1331B"),this.graphics.moveTo(e.x,e.y);break;case 2:this.graphics.lineTo(e.x,e.y),this.graphics.stroke(),this.graphics.moveTo(e.x,e.y),this.graphics.lineWidth=40,this.graphics.strokeColor=cc.Color.fromHEX(this.graphics.strokeColor,"#631B15");break;case 5:if(t.getDelta().mag()>=10)this.createitem(this.selecttype,e);else{var o=(new Date).getTime();(o-this.startTime)/1e3>=.2&&(this.startTime=o,this.createitem(this.selecttype,e))}}},e.prototype.creategraphics=function(){var t=cc.instantiate(this.grap);return t.setPosition(0,0),this.tiaoliao.addChild(t),t},e.prototype.createitem=function(t,e){var o=cc.instantiate(this.items);o.setPosition(e),o.getComponent(cc.Sprite).spriteFrame=this.itemsp[t],this.tiaoliao.addChild(o)},e.prototype.drawclick=function(t){var e=this.transformToWorldSpaceAR(t.getLocation(),this.tool);switch(this.selecttype){case 1:case 3:case 4:e.mag()<this.cakeradius-30&&this.createitem(this.selecttype,e);break;case 6:e.mag()<this.cakeradius-60&&this.createitem(this.selecttype,e);break;case 7:e.mag()<this.cakeradius-30&&this.createitem(this.selecttype,e)}},e.prototype.GameWin=function(){var t=this;a.default.playEffect(a.default.audioName.CRRECT),cc.tween(this.dd).to(1,{opacity:255,scale:1}).delay(.5).call(function(){t.dd.scale=0,cc.find("Canvas/game").getComponent(n.default).showResultLayer()}).start()},e.prototype.update=function(){},e.prototype.transformToWorldSpaceAR=function(t,e){return e?e.convertToNodeSpaceAR(t):null},s([p(cc.Node)],e.prototype,"taskNode",void 0),s([p([cc.String])],e.prototype,"titlelist",void 0),s([p(cc.Prefab)],e.prototype,"items",void 0),s([p(cc.Prefab)],e.prototype,"grap",void 0),s([p(cc.Graphics)],e.prototype,"graphics",void 0),s([p(cc.Node)],e.prototype,"rect",void 0),s([p([cc.SpriteFrame])],e.prototype,"itemsp",void 0),s([p(cc.Node)],e.prototype,"itemgroup",void 0),s([p(cc.Node)],e.prototype,"tiaoliao",void 0),s([p(cc.Float)],e.prototype,"cakeradius",void 0),s([p(cc.Node)],e.prototype,"sruebtn",void 0),s([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{AudioManager:void 0,Game:void 0,MathTool:void 0,lv_501_9_move:"lv_501_9_move"}]},{},["lv_501_9","lv_501_9_move","lv501_9_gudie_move","lv501_9_gudie_move_label"]);
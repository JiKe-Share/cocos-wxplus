window.__require=function t(e,o,i){function n(a,p){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var s="function"==typeof __require&&__require;if(!p&&s)return s(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return n(e[a][1][t]||t)},u,u.exports,t,e,o,i)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({"309_2_Anime":[function(t,e,o){"use strict";cc._RF.push(e,"aa63fMZu4ZM8p5/YWu2bOFF","309_2_Anime");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,p=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.liubeiNormal=null,e.guanyuNormal=null,e.zhangfeiNormal=null,e.mosquito=null,e.stateKeepTime=.5,e.liubeiPat=[],e.guanyuPut=[],e.zhangfeiTake=[],e.table=[],e}return i(e,t),e.prototype.onLoad=function(){this.liubeiPat.forEach(function(t){return t.active=!1}),this.guanyuPut.forEach(function(t){return t.active=!1}),this.zhangfeiTake.forEach(function(t){return t.active=!1}),this.playBreath(this.liubeiNormal),this.playBreath(this.guanyuNormal),this.playBreath(this.zhangfeiNormal),this.playMosquitoAnime()},e.prototype.playLiubeiAnime=function(){var t=this;this.liubeiNormal.active=!1,this.liubeiPat.forEach(function(t){return t.active=!0}),this.scheduleOnce(function(){t.liubeiNormal.active=!0,t.liubeiPat.forEach(function(t){return t.active=!1})},this.stateKeepTime)},e.prototype.playGuanyuAnime=function(){var t=this;this.guanyuNormal.active=!1,this.guanyuPut.forEach(function(t){return t.active=!0}),this.scheduleOnce(function(){t.guanyuNormal.active=!0,t.guanyuPut.forEach(function(t){return t.active=!1})},this.stateKeepTime)},e.prototype.playZhangfeiAnime=function(){var t=this;this.zhangfeiNormal.active=!1,this.zhangfeiTake.forEach(function(t){return t.active=!0}),this.scheduleOnce(function(){t.zhangfeiNormal.active=!0,t.zhangfeiTake.forEach(function(t){return t.active=!1})},this.stateKeepTime)},e.prototype.renderGridAnimation=function(){var t=this.table[0],e=this.table[1],o=this.table[2];cc.tween(t).to(this.stateKeepTime/2,{position:t.position.add(cc.v3(0,10))}).to(this.stateKeepTime/2,{position:t.position}).start(),cc.tween(e).to(this.stateKeepTime/2,{position:e.position.add(cc.v3(0,20)),angle:20}).to(this.stateKeepTime/2,{position:e.position,angle:0}).start(),cc.tween(o).to(this.stateKeepTime/2,{position:o.position.add(cc.v3(0,20)),angle:-20}).to(this.stateKeepTime/2,{position:o.position,angle:0}).start()},e.prototype.playMosquitoAnime=function(){var t=this;this.mosquito.setPosition(cc.v2(-300,65)),cc.tween(this.mosquito).parallel(cc.tween(this.mosquito).to(1,{position:cc.v3(300,65)}).call(function(){t.mosquito.setSiblingIndex(0),t.mosquito.scaleX=-1}).to(1,{position:cc.v3(-300,65)}).call(function(){t.mosquito.setSiblingIndex(t.mosquito.parent.childrenCount),t.mosquito.scaleX=1}),cc.tween(this.mosquito).by(.1,{y:2}).by(.1,{y:-2}).union().repeat(10)).repeatForever().start()},e.prototype.playBreath=function(t){cc.tween(t).to(1,{scale:1.02}).to(1,{scale:1},{easing:cc.easing.sineOut}).union().repeatForever().start()},n([p({type:cc.Node})],e.prototype,"liubeiNormal",void 0),n([p({type:cc.Node})],e.prototype,"guanyuNormal",void 0),n([p({type:cc.Node})],e.prototype,"zhangfeiNormal",void 0),n([p({type:cc.Node})],e.prototype,"mosquito",void 0),n([p({})],e.prototype,"stateKeepTime",void 0),n([p({type:[cc.Node]})],e.prototype,"liubeiPat",void 0),n([p({type:[cc.Node]})],e.prototype,"guanyuPut",void 0),n([p({type:[cc.Node]})],e.prototype,"zhangfeiTake",void 0),n([p({type:[cc.Node]})],e.prototype,"table",void 0),n([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"309_2_LvCtrl":[function(t,e,o){"use strict";cc._RF.push(e,"fa250hG2L9FHp9Jt4aoza0E","309_2_LvCtrl");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var r=t("LevelCtrl_CommonResult"),a=t("AudioManager"),p=t("309_2_Anime"),c=t("309_2_OptionSys"),s=cc._decorator,u=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anime=null,e.optionSys=null,e.errorLabel=null,e.errorLimit=8,e.audioMap={pat:"lv309_1_1",take:"lv309_2_1",put:"lv309_2_2",desk:"lv309_1_4",miss:"lv309_1_5",bgm1:"lv309_1_6",bgm2:"lv309_1_7",bgm3:"lv309_1_8",bgm4:"lv309_1_9",bgm5:"lv309_1_10",bgm6:"lv309_1_11",bgm7:"lv309_1_12",bgm8:"lv309_1_13",success:"lv309_1_14",fail:"lv309_1_15"},e._bgmScore=[[1,0,1,0,1,2,3],[1,2,3,0,1,2,3],[1,1,4,0,1,2,3],[1,1,4,4,1,2,3],[1,2,3,1,1,2,3],[1,1,2,0,3,3,3],[1,1,2,3,1,2,3],[1,4,2,3,4,2,3]],e._curStage=0,e._bgmPatDelay=[3.4,1,1,1,1,1,1,1],e._bgmEndTime=[4.32,2.184,2.328,2.328,2.16,2.304,2.208,2.376],e._errorCount=0,e}return i(e,t),e.prototype.onEnable=function(){a.default.stopMusic()},e.prototype.onDestroy=function(){cc.audioEngine.stopAllEffects(),setTimeout(function(){a.default.playMusic(a.default.audioName.BACKGROUND)},0)},e.prototype.start=function(){var t=this;this._curStage=0,this._updateErrorCount(),this.optionSys.node.on(c.default.EventType.ERROR,this._onOptionError,this),this.optionSys.node.on(c.default.EventType.TIMEOVER,this._onTimeOver,this),this.optionSys.node.on(c.default.EventType.TIMEOUT,this._onTimeOut,this),this.scheduleOnce(function(){t.playBgm().then(function(){t.optionSys.play(t._bgmScore[t._curStage],2*t._bgmEndTime[t._curStage])})},1)},e.prototype.playBgm=function(){var t=this;return new Promise(function(e){a.default.playMusic(t.audioMap["bgm"+(t._curStage+1)]),t.scheduleOnce(function(){e()},t._bgmPatDelay[t._curStage]),t.scheduleOnce(function(){a.default.stopMusic()},t._bgmEndTime[t._curStage])})},e.prototype.onClickLiuBei=function(){this.anime.playLiubeiAnime(),this.optionSys.tap(1),a.default.playEffect(this.audioMap.pat)},e.prototype.onClickGuanYu=function(){this.anime.playGuanyuAnime(),this.optionSys.tap(3),a.default.playEffect(this.audioMap.put)},e.prototype.onClickZhangFei=function(){this.anime.playZhangfeiAnime(),this.optionSys.tap(2),a.default.playEffect(this.audioMap.take)},e.prototype.onClickTable=function(){this.anime.renderGridAnimation(),this.optionSys.tap(4),a.default.playEffect(this.audioMap.desk)},e.prototype._onOptionError=function(){this._errorCount++,a.default.playEffect(this.audioMap.miss),this._updateErrorCount()},e.prototype._onTimeOver=function(){var t=this;this._curStage++,this._curStage<this._bgmScore.length?this.playBgm().then(function(){t.optionSys.play(t._bgmScore[t._curStage],2*t._bgmEndTime[t._curStage]+1)}):this.onSuccess()},e.prototype._updateErrorCount=function(){this.errorLabel.getComponent(cc.Label).string="\u9519 \u8bef \u6b21 \u6570\uff1a("+this._errorCount+"/"+this.errorLimit+")",this._errorCount>=this.errorLimit&&(a.default.stopMusic(),this.optionSys.stop(),this.onFail())},e.prototype._onTimeOut=function(){this._errorCount++,this._updateErrorCount(),a.default.playEffect(this.audioMap.miss)},e.prototype.onSuccess=function(){this.node.getComponent(r.default).onGameSucc()},e.prototype.onFail=function(){this.node.getComponent(r.default).onGameFail()},n([l({type:p.default})],e.prototype,"anime",void 0),n([l({type:c.default})],e.prototype,"optionSys",void 0),n([l({type:cc.Node})],e.prototype,"errorLabel",void 0),n([l({})],e.prototype,"errorLimit",void 0),n([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"309_2_Anime":"309_2_Anime","309_2_OptionSys":"309_2_OptionSys",AudioManager:void 0,LevelCtrl_CommonResult:void 0}],"309_2_OptionSys":[function(t,e,o){"use strict";cc._RF.push(e,"d746b589HZBOIOeuD37n29c","309_2_OptionSys");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var r=t("309_2_Option"),a=t("309_2_Time"),p=cc._decorator,c=p.ccclass,s=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.optionPrefab=null,e.rightColor=cc.Color.GREEN,e.errorColor=cc.Color.RED,e.unTapColor=cc.Color.WHITE,e.timeCom=null,e.typeName=["  ","\u62cd","\u62ff","\u653e","\u684c"],e.curIndex=0,e.optionList=[],e.isPlaying=!1,e}var o;return i(e,t),o=e,e.prototype.update=function(t){this.optionList.length<=0||(this.updateTime(t),this.timeCom.curTime<=0&&this.optionList.length>0&&(this.timeCom.curTime=0,this.node.emit(o.EventType.TIMEOVER),this.curIndex<this.optionList.length&&this.node.emit(o.EventType.TIMEOUT),this.optionList=[],this.isPlaying=!1))},e.prototype.play=function(t,e){this.curIndex=0,this.optionList=[],this.node.removeAllChildren();for(var o=0;o<t.length;o++){var i=cc.instantiate(this.optionPrefab).getComponent(r.default);i.node.parent=this.node,i.node.scale=1,i.type=t[o],i.state=0,i.node.color=this.unTapColor,i.node.getComponent(cc.Label).string=this.typeName[t[o]],this.optionList.push(i)}this.timeCom.maxTime=e,this.timeCom.curTime=e,this.isPlaying=!0},e.prototype.stop=function(){this.isPlaying=!1,this.optionList=[],this.node.removeAllChildren()},e.prototype.tap=function(t){if(this.isPlaying&&!(this.optionList.length<=0)){for(this.node.emit(o.EventType.TAP,t),this.optionList[this.curIndex].type==t?(this.optionList[this.curIndex].state=1,this.optionList[this.curIndex].node.color=this.rightColor,this.node.emit(o.EventType.RIGHT)):(this.optionList[this.curIndex].state=2,this.optionList[this.curIndex].node.color=this.errorColor,this.node.emit(o.EventType.ERROR)),this.curIndex++;this.curIndex<this.optionList.length&&0==this.optionList[this.curIndex].type;)this.curIndex++;this.curIndex>=this.optionList.length&&(this.isPlaying=!1,this.timeCom.curTime=Math.min(3,this.timeCom.curTime),this.node.emit(o.EventType.FINISH),this.node.children.forEach(function(t){cc.tween(t).to(.5,{scale:0}).call(function(){t.destroy()}).start()}))}},e.prototype.updateTime=function(t){this.timeCom.curTime-=t,this.timeCom.curTime=Math.max(0,this.timeCom.curTime),this.timeCom.node.getChildByName("bar").getChildByName("progress").getComponent(cc.Sprite).fillRange=this.timeCom.curTime/this.timeCom.maxTime,this.timeCom.node.getChildByName("num").getComponent(cc.Label).string=this.timeCom.curTime.toFixed(0)+"/"+this.timeCom.maxTime.toFixed(0)},e.EventType={TAP:"tap",RIGHT:"right",ERROR:"error",TIMEOUT:"timeout",FINISH:"finish",TIMEOVER:"timeover"},n([s({type:cc.Prefab})],e.prototype,"optionPrefab",void 0),n([s({})],e.prototype,"rightColor",void 0),n([s({})],e.prototype,"errorColor",void 0),n([s({})],e.prototype,"unTapColor",void 0),n([s({type:a.default})],e.prototype,"timeCom",void 0),o=n([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"309_2_Option":"309_2_Option","309_2_Time":"309_2_Time"}],"309_2_Option":[function(t,e,o){"use strict";cc._RF.push(e,"3b2dcYYsjNIoL1ekj3BvTxf","309_2_Option");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,p=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e.state=0,e}return i(e,t),n([p({type:cc.Enum({"\u8df3\u8fc7":0,"\u62cd":1,"\u62ff":2,"\u653e":3})})],e.prototype,"type",void 0),n([p({type:cc.Enum({"\u672a\u89e6\u53d1":0,"\u6b63\u786e\u8f93\u5165":1,"\u9519\u8bef\u8f93\u5165":2})})],e.prototype,"state",void 0),n([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"309_2_TapSys":[function(t,e,o){"use strict";cc._RF.push(e,"2951aizfEdGo58rTvGnut51","309_2_TapSys");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var r=t("309_2_Tap"),a=cc._decorator,p=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tapBufferTime=.5,e.tapCom=[],e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.tapCom=this.node.getComponentsInChildren(r.default).filter(function(t){return t.node.active}),this.tapCom.forEach(function(e){e.node.on(cc.Node.EventType.TOUCH_END,t.tapEnd,t)})},e.prototype.tapEnd=function(t){var e=t.target,o=e.getComponent(r.default);o.isTap&&(o.isTap=!1,cc.Component.EventHandler.emitEvents(o.tapEvent,e),this.scheduleOnce(function(){o.isTap=!0},this.tapBufferTime))},n([c({type:cc.Float})],e.prototype,"tapBufferTime",void 0),n([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{"309_2_Tap":"309_2_Tap"}],"309_2_Tap":[function(t,e,o){"use strict";cc._RF.push(e,"ca96dPsUvJCSKz7ULOPw5PV","309_2_Tap");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,p=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTap=!0,e.tapEvent=[],e}return i(e,t),n([p({})],e.prototype,"isTap",void 0),n([p({type:[cc.Component.EventHandler]})],e.prototype,"tapEvent",void 0),n([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"309_2_Time":[function(t,e,o){"use strict";cc._RF.push(e,"9e929TwMjxGA4ph6fyL5256","309_2_Time");var i=__extends,n=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,p=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxTime=0,e.curTime=0,e}return i(e,t),n([p({})],e.prototype,"maxTime",void 0),n([p({})],e.prototype,"curTime",void 0),n([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}]},{},["309_2_TapSys","309_2_Anime","309_2_LvCtrl","309_2_OptionSys","309_2_Option","309_2_Time","309_2_Tap"]);
window.__require=function t(e,o,i){function a(c,r){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var d="function"==typeof __require&&__require;if(!r&&d)return d(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return a(e[c][1][t]||t)},l,l.exports,t,e,o,i)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<i.length;c++)a(i[c]);return a}({"316_10_Ani":[function(t,e,o){"use strict";cc._RF.push(e,"c5b4eibt+1Aj6quncBdEU5i","316_10_Ani");var i=__extends,a=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var n=t("316_AudioConfig"),c=t("316_StateNodeSys"),r=t("316_AudioFunc"),s=cc._decorator,d=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.teacher=null,e.dd=null,e.stateSys=null,e}return i(e,t),e.prototype.onLoad=function(){this.stateSys=this.node.getComponent(c.default),this.stateSys.on(c.default.EventType.ENTER_STATE,this._onEnterState,this);var t=this.teacher.getChildByName("hand");cc.tween(t).to(.5,{angle:5}).to(.5,{angle:-5}).union().repeatForever().start(),this.dd.active=!1},e.prototype._onEnterState=function(t){for(var e=this,o=function(t){var o=t.state,i=t.node,a=i.getChildByName("stand"),n=i.getChildByName("walk"),c=i.getChildByName("down"),r=a.getChildByName("normal"),s=a.getChildByName("idle"),d=a.getChildByName("salute"),l=a.getChildByName("head");switch(i.scaleX=1,i.children.forEach(function(t){t.active=!1}),o){case 0:e._onBreath(i),a.active=!0,a.children.forEach(function(t){t.active=!1}),l.active=!0,r.active=!0;break;case 1:a.active=!0,a.children.forEach(function(t){t.active=!1}),l.active=!0,r.active=!0,i.scaleX=-1;break;case 2:c.active=!0;break;case 3:a.active=!0,a.children.forEach(function(t){t.active=!1}),l.active=!0,s.active=!0;break;case 4:a.active=!0,a.children.forEach(function(t){t.active=!1}),l.active=!0,d.active=!0;break;case 5:n.active=!0}},i=0,a=this.stateSys.getAttrById(t);i<a.length;i++)o(a[i])},e.prototype._onBreath=function(t){cc.tween(t).to(.75,{scaleY:1.01}).to(.75,{scaleY:1}).union().repeatForever().start()},e.prototype.ddAni=function(t){this.dd.active=!0;var e=this.dd.getComponent(cc.Sprite);e.fillRange=0,r.playCommonEffect_316(n.default.findS_2),cc.tween(e).to(.5,{fillRange:1}).delay(.5).call(function(){t&&t()}).start()},a([l(cc.Node)],e.prototype,"teacher",void 0),a([l(cc.Node)],e.prototype,"dd",void 0),a([d],e)}(cc.Component);o.default=u,cc._RF.pop()},{"316_AudioConfig":void 0,"316_AudioFunc":void 0,"316_StateNodeSys":void 0}],"316_10_LevelCtrl":[function(t,e,o){"use strict";cc._RF.push(e,"c67a13Og51HcYoG4tINaXHC","316_10_LevelCtrl");var i=__extends,a=__decorate;Object.defineProperty(o,"__esModule",{value:!0});var n=t("LevelCtrl_CommonResult"),c=t("AssetManager"),r=t("AudioManager"),s=t("316_AudioConfig"),d=t("316_TextConfig"),l=t("316_DialogSys"),u=t("316_Icon2Scale"),p=t("316_SpotSys"),h=t("316_StateNodeSys"),f=t("316_AudioFunc"),v=t("316_10_Ani"),y=cc._decorator,S=y.ccclass,_=y.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateSys=null,e.dialogSys=null,e.icon2Scale=null,e.spotSys=null,e.btns=null,e.ani=null,e.guide=[],e.curState=0,e.triggerStep=!1,e}return i(e,t),Object.defineProperty(e.prototype,"btnsAble",{get:function(){return!this.btns.getChildByName("msk").active},set:function(t){this.btns.getChildByName("msk").active=!t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.spotSys.on(p.default.EventType.TAP_SPOT,this._onSpotClick,this),this.guide.forEach(function(t){t.active=!1})},e.prototype.start=function(){var t=this;this.dialogSys.hideAllDialogImmed(),this.icon2Scale.hideAllIcon(),c.default.loadSoundEffect_fileDir("AudioClip/lv_316/10",function(){t.switchState()})},e.prototype.switchState=function(t){var e=this;void 0===t&&(t=null);var o=t?t.getCurrentTarget().getSiblingIndex():0;Number.isNaN(o)||(this.btnsAble=!1,this.curState=o,this.ani.dd.active=!1,this.scheduleOnce(function(){e.updateBtns()}),this.guide[0].active&&(this.guide[1].opacity=0),r.default.playEffect(s.default[10]["command_"+(o+1)]),this.dialogSys.showDialog(d.default[10]["command_"+(o+1)]).then(function(){e.guide[0].active=!0,e.btnsAble=!0,e.stateSys.setAttrById(0,{state:o}),f.playCommonEffect_316(s.default.step),e.scheduleOnce(function(){switch(o){case 0:e.showSpot(6);break;case 1:e.showSpot(4);break;case 2:e.showSpot(8),e.showSpot(10);break;case 3:e.showSpot(9);break;case 4:e.showSpot(5),e.showSpot(7);break;case 5:e.showSpot(3)}})}))},e.prototype.showSpot=function(t){var e=this.spotSys.getSpotAttr(t);e.every(function(t){return t.isFind})||e.forEach(function(e){e.node.active=!0;var o=e.node.parent,i=o.getChildByName("stand"),a=o.getChildByName("walk"),n=o.getChildByName("down");switch(t){case 4:case 5:case 6:case 7:case 9:i.active=!1;break;case 8:case 10:n.active=!1;break;case 3:a.active=!1}})},e.prototype._onSpotClick=function(t){var e=this,o=this.spotSys.getSpotAttr(t);if(!o.every(function(t){return t.isFind})){this.guide[0].opacity=0,f.playCommonEffect_316(s.default.successS);var i=o.find(function(t){return!t.isFind}).node.parent;this.spotSys.setSpotAttr(t,{isFind:!0});var a=this.checkSpot(1,2,3,4,5,6,7,8,9,10),c=i.getChildByName("stand"),r=i.getChildByName("walk"),d=i.getChildByName("down");switch(t){case 4:case 5:case 6:case 7:case 9:c.active=!0;break;case 8:case 10:d.active=!0;break;case 3:r.active=!0}this.btnsAble=!1,this.icon2Scale.showIcon(t,o[0].node.convertToWorldSpaceAR(cc.v2(0,0))).then(function(){e.updateBtns(),e.scheduleOnce(function(){e.btnsAble=!0},e.triggerStep?1:0),a&&e.node.getComponent(n.default).onGameSucc()})}},e.prototype.checkSpot=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return e.every(function(e){return t.spotSys.getSpotAttr(e).every(function(t){return t.isFind})})},e.prototype.updateBtns=function(){var t=this;this.triggerStep=!1,this.btns.children.forEach(function(e,o){var i=e.getComponent(cc.Button);if(i){var a=e.getChildByName("gg");if(i.interactable){var n=!1;switch(o){case 0:n=t.checkSpot(6);break;case 1:n=t.checkSpot(4);break;case 2:n=t.checkSpot(8,10);break;case 3:n=t.checkSpot(9);break;case 4:n=t.checkSpot(5,7);break;case 5:n=t.checkSpot(3)}n&&(t.triggerStep=!0,t.ani.ddAni(function(){i.interactable=!n,a.active=!i.interactable,t.guide[1].active=!0}))}a.active=!i.interactable,i.interactable&&(e.getComponent(cc.Sprite).spriteFrame=t.curState===o?i.pressedSprite:i.normalSprite)}})},a([_(h.default)],e.prototype,"stateSys",void 0),a([_(l.default)],e.prototype,"dialogSys",void 0),a([_(u.default)],e.prototype,"icon2Scale",void 0),a([_(p.default)],e.prototype,"spotSys",void 0),a([_(cc.Node)],e.prototype,"btns",void 0),a([_(v.default)],e.prototype,"ani",void 0),a([_([cc.Node])],e.prototype,"guide",void 0),a([S],e)}(cc.Component);o.default=g,cc._RF.pop()},{"316_10_Ani":"316_10_Ani","316_AudioConfig":void 0,"316_AudioFunc":void 0,"316_DialogSys":void 0,"316_Icon2Scale":void 0,"316_SpotSys":void 0,"316_StateNodeSys":void 0,"316_TextConfig":void 0,AssetManager:void 0,AudioManager:void 0,LevelCtrl_CommonResult:void 0}]},{},["316_10_Ani","316_10_LevelCtrl"]);
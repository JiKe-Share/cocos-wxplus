window.__require=function t(o,i,e){function c(n,a){if(!i[n]){if(!o[n]){var l=n.split("/");if(l=l[l.length-1],!o[l]){var h="function"==typeof __require&&__require;if(!a&&h)return h(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+n+"'")}n=l}var r=i[n]={exports:{}};o[n][0].call(r.exports,function(t){return c(o[n][1][t]||t)},r,r.exports,t,o,i,e)}return i[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<e.length;n++)c(e[n]);return c}({Food_1:[function(t,o,i){"use strict";cc._RF.push(o,"ab5a1nuYMBHNpxNXPM0AeeG","Food_1");var e=__extends,c=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var s=t("MathTool"),n=t("Game"),a=t("AudioManager"),l=cc._decorator,h=l.ccclass,r=l.property,d=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.tasklist=[],o.titlelist=[],o.dd=null,o.successnum=9,o.localnum=0,o.plan=0,o.actionNum=0,o}return e(o,t),o.prototype.onLoad=function(){this.dd=this.node.getChildByName("dd"),this.UpNode()},o.prototype.UpNode=function(){for(var t=0;t<this.tasklist.length;t++)t==this.plan?this.tasklist[t].active=!0:this.tasklist[t].active=!1;this.title=this.tasklist[this.plan].getChildByName("title"),this.title.getComponent(cc.Label).string=this.titlelist[this.plan],this.toolNode=this.tasklist[this.plan].getChildByName("tool"),this.tool=this.toolNode.getChildByName("tool"),this.mask=this.tasklist[this.plan].getChildByName("mask"),this.startpos=this.tool.position,this.tool.getChildByName("icon")&&(this.icon=this.tool.getChildByName("icon"),this.icon.active=!1),cc.tween(this.toolNode).to(.5,{position:cc.v3(0,0)}).start(),this.tool.on(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.on(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.on(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.on(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)},o.prototype.TouchStart=function(){this.icon&&(this.icon.active=!0),this.toolNode.getChildByName("tool_icon")&&(this.toolNode.getChildByName("tool_icon").active=!1)},o.prototype.TouchSMove=function(t){var o=this,i=this.node.convertToNodeSpaceAR(t.getLocation());if(this.tool.x=i.x,this.tool.y=i.y,this.localnum!=this.successnum)for(var e=0;e<this.mask.childrenCount;e++){var c=this.mask.children[e],n=cc.rect(c.x,c.y,c.width,c.height),l=cc.v2(i.x+this.tool.children[0].x,i.y+this.tool.children[0].y);if(s.default.rectPoint(l,n))if(5==this.plan){if(c.children[1].x<0){this.tool.active=!1;var h=this.toolNode.parent.getChildByName("zhen");cc.tween(c.children[0]).to(1,{position:cc.v3(-105,0)}).start(),cc.tween(c.children[1]).to(1,{position:cc.v3(0,0)}).call(function(){h.stopAllActions(),h.active=!1,o.tool.active=!0,o.localnum+=1,o.SuccessFunc()}).start(),h.position=cc.v3(c.x+h.width/2+80,c.y),h.active=!0,cc.tween(h).sequence(cc.tween(h).to(.1,{position:cc.v3(h.x-50,h.y)}).start(),cc.tween(h).to(.1,{position:cc.v3(h.x+50,h.y)}).start()).repeatForever().start()}}else c.children[0].active||(0==this.plan?a.default.playEffect("lv2_1_5"):1==this.plan?(a.default.playEffect("lv2_1_1"),a.default.playEffect("lv2_1_4")):2==this.plan||3==this.plan||4==this.plan||7==this.plan||9==this.plan?a.default.playEffect("lv2_1_2"):6!=this.plan&&8!=this.plan||a.default.playEffect("lv2_1_3"),c.children[0].active=!0,this.localnum+=1,cc.tween(c.children[0]).to(.5,{scale:1}).start())}},o.prototype.BtnOffClick=function(){this.tool.off(cc.Node.EventType.TOUCH_START,this.TouchStart,this),this.tool.off(cc.Node.EventType.TOUCH_MOVE,this.TouchSMove,this),this.tool.off(cc.Node.EventType.TOUCH_END,this.TouchSEnd,this),this.tool.off(cc.Node.EventType.TOUCH_CANCEL,this.TouchSEnd,this)},o.prototype.TouchSEnd=function(){this.tool.position=this.startpos,this.SuccessFunc()},o.prototype.SuccessFunc=function(){var t=this;this.icon&&(this.icon.active=!1),this.toolNode.getChildByName("tool_icon")&&(this.toolNode.getChildByName("tool_icon").active=!0),this.successnum==this.localnum&&(this.BtnOffClick(),this.plan+=1,this.localnum=0,this.plan==this.tasklist.length?this.GameWin():6==this.plan?(this.toolNode.parent.getChildByName("di").active=!0,this.toolNode.active=!1,this.NodeAction()):cc.tween(this.toolNode).to(.5,{position:cc.v3(800,0)}).call(function(){t.UpNode()}).start())},o.prototype.NodeAction=function(){var t=this,o=this.mask.parent.getChildByName("pos");if(this.actionNum<6)cc.tween(this.mask.children[this.actionNum]).to(.5,{position:o.children[this.actionNum].position}).call(function(){t.mask.children[t.actionNum].active=!1,t.mask.parent.getChildByName("di").children[t.actionNum].active=!0,t.actionNum+=1,t.NodeAction()}).start();else{cc.tween(this.mask).to(.5,{position:cc.v3(800,0)}).start();var i=this.mask.parent.getChildByName("kaolu"),e=this.mask.parent.getChildByName("di");cc.tween(i).to(.5,{position:cc.v3(800,0)}).call(function(){cc.tween(e).to(.5,{position:cc.v3(0,200)}).call(function(){t.UpNode(),t.successnum=6}).start()}).start()}},o.prototype.GameWin=function(){var t=this;a.default.playEffect(a.default.audioName.CRRECT),cc.tween(this.dd).to(1,{opacity:255,scale:1}).delay(.5).call(function(){t.dd.scale=0,cc.find("Canvas/game").getComponent(n.default).showResultLayer()}).start()},o.prototype.update=function(){},c([r([cc.Node])],o.prototype,"tasklist",void 0),c([r([cc.String])],o.prototype,"titlelist",void 0),c([h],o)}(cc.Component);i.default=d,cc._RF.pop()},{AudioManager:void 0,Game:void 0,MathTool:void 0}]},{},["Food_1"]);
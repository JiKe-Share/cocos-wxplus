window.__require=function e(t,n,o){function i(r,c){if(!n[r]){if(!t[r]){var d=r.split("/");if(d=d[d.length-1],!t[d]){var l="function"==typeof __require&&__require;if(!c&&l)return l(d,!0);if(a)return a(d,!0);throw new Error("Cannot find module '"+r+"'")}r=d}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({"316_14_Ani":[function(e,t,n){"use strict";cc._RF.push(t,"0050bXFTytOxa2nlKQccJ++","316_14_Ani");var o=__extends,i=__decorate,a=__spreadArrays;Object.defineProperty(n,"__esModule",{value:!0});var r=e("AudioManager"),c=e("316_AudioConfig"),d=e("316_TextConfig"),l=e("316_DialogSys"),u=e("316_StateNodeSys"),s=cc._decorator,g=s.ccclass,p=s.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bomb=null,t.finNode=null,t.stateSys=null,t.dialog=null,t.tweenTag=cc.Enum({breath:1}),t.isInDialog=!1,t.curAudioId=-1,t}var n;return o(t,e),n=t,t.prototype.onLoad=function(){this.stateSys=this.node.getComponent(u.default),this.dialog=this.node.getComponent(l.default),this.stateSys.on(u.default.EventType.ENTER_STATE,this.onEnterState,this)},t.prototype.onEnterState=function(e){for(var t=this,o=this.stateSys.getAttrById(e),i=function(o){var i=o.state,l=o.node;switch(e){case 1:case 2:case 3:cc.tween(l).to(1,{scaleY:1.01}).to(1,{scaleY:1}).union().repeatForever().tag(a.tweenTag.breath).start();break;default:0===i&&a.scheduleOnce(function(){return l.active=!1})}if(0===i)return"continue";var u=0;switch(e){case 12:case 24:case 34:a.bomb.play(),u=.8;default:l.active=!0,a.scheduleOnce(function(){var o=d.default[14]["item_"+e];o?(t.isInDialog=!0,-1!==t.curAudioId&&cc.audioEngine.stop(t.curAudioId),c.default[14]["item_"+e]&&r.default.playEffect(c.default[14]["item_"+e]).then(function(e){return t.curAudioId=e}),t.dialog.showDialog(o,Math.floor(e/10)).then(function(){t.node.emit(n.EventType.DIALOG_END),t.node.emit(n.EventType.ANI_END)})):t.isInDialog||t.node.emit(n.EventType.ANI_END)},u)}},a=this,l=0,u=o;l<u.length;l++)i(u[l])},t.prototype.playFinAni=function(e,t){var n=this;this.finNode.opacity=0,this.finNode.active=!0,cc.tween(this.finNode).to(.5,{opacity:255,x:0}).call(function(){-1!==n.curAudioId&&cc.audioEngine.stop(n.curAudioId),c.default[14]["end_"+e]&&r.default.playEffect(c.default[14]["end_"+e]).then(function(e){return n.curAudioId=e}),n.dialog.showDialog(d.default[14]["end_"+e]).then(function(){cc.tween(n.finNode).to(.5,{opacity:0}).call(function(){t&&t(),n.finNode.x=227,n.finNode.active=!1}).start()})}).start()},t.prototype.playWipeAni=function(e,t,n){var o,i=t.getChildByName("xue").getComponent(cc.Mask),r=i._graphics,c=[cc.v2(52,70),cc.v2(20,98),cc.v2(-11,72),cc.v2(-40,105),cc.v2(-60,66),cc.v2(-80,110)].map(function(n){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(n))}),d=c.map(function(t,n){return t.sub(t[n-1]||e.getPosition()).mag()/500}),l=c.map(function(t,n){return cc.tween().to(d[n],{position:t},{progress:function(t,n,o,i){o=t.lerp(n,i);var a=r.node.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(o));return r.circle(a.x,a.y,69),r.fill(),o}})});i.inverted=!0,r.clear(),(o=cc.tween(e)).sequence.apply(o,a([cc.tween().to(.5,{angle:-30})],l)).call(function(){n&&n(),e.active=!1}).start()},t.prototype.FX_ImpactTrigger=function(e,t,n){cc.tween(e).set({angle:-90}).to(.5,{angle:0},{easing:cc.easing.backIn}).call(function(){n&&n(),t.active=!0,e.active=!1}).start()},t.EventType={ANI_END:"ani_end",DIALOG_END:"dialog_end"},i([p(cc.Animation)],t.prototype,"bomb",void 0),i([p(cc.Node)],t.prototype,"finNode",void 0),n=i([g],t)}(cc.Component);n.default=f,cc._RF.pop()},{"316_AudioConfig":void 0,"316_DialogSys":void 0,"316_StateNodeSys":void 0,"316_TextConfig":void 0,AudioManager:void 0}],"316_14_LevelCtrl":[function(e,t,n){"use strict";cc._RF.push(t,"052cd9J5mBIEbgH1Yy8FAiN","316_14_LevelCtrl");var o=__extends,i=__decorate;Object.defineProperty(n,"__esModule",{value:!0});var a=e("LevelCtrl_CommonResult"),r=e("AssetManager"),c=e("AudioManager"),d=e("316_AudioConfig"),l=e("316_TextConfig"),u=e("316_DragIconSys"),s=e("316_ActionTool"),g=e("316_AudioFunc"),p=e("316_14_Ani"),f=cc._decorator,h=f.ccclass,y=f.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageView=null,t.handkerchief=null,t.roadSign=null,t.hammer=null,t.wall=null,t.goldLeaf=null,t.monkeyCard=null,t.goldMulberry=null,t.bottomScrollView=null,t.guideNode=null,t.ani=null,t.dragSys=null,t.findNums=[],t.startDialogPlayed=[],t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.ani=this.getComponentInChildren(p.default),this.dragSys=this.getComponentInChildren(u.default),this.pageView.getComponent(cc.Mask)&&(this.pageView.getComponent(cc.Mask).enabled=!0),this.dragSys.on(u.default.EventType.DRAG_START,this.onDragStart,this),this.dragSys.on(u.default.EventType.DRAG_FAIL,this.onDragOff,this),this.dragSys.on(u.default.EventType.DRAG_RESET,this.onDragOff,this),this.dragSys.on(u.default.EventType.DRAG_ANIM_END,this.onDragBackEnd,this),this.dragSys.on(u.default.EventType.DRAG_SUCCESS,this.onDragSuccess,this),this.pageView.node.on("scroll-began",this.onScrollBegan,this),this.pageView.node.on("scroll-ended",this.onScrollEnded,this),this.ani.node.on(p.default.EventType.ANI_END,this.onAniEnd,this),this.wall.active=!1,this.goldMulberry.active=!1,s.default.regSlideEvent(this.handkerchief,function(t,n){t.stopPropagation(),e.roadSign.getBoundingBoxToWorld().contains(e.handkerchief.convertToWorldSpaceAR(cc.Vec2.ZERO))?(n(),g.playCommonEffect_316(d.default.findS_2),e.ani.isInDialog=!0,e.dragSys.interactable=!1,e.pageView.enabled=!1,e.ani.playWipeAni(e.handkerchief,e.roadSign,function(){e.findCurSceneItem(),-1!=e.ani.curAudioId&&cc.audioEngine.stop(e.ani.curAudioId),d.default[14].item_15&&c.default.playEffect(d.default[14].item_15).then(function(t){return e.ani.curAudioId=t}),e.ani.dialog.showDialog(l.default[14].item_15,1).then(function(){e.onAniEnd()})})):e.scheduleOnce(function(){e.pageView.enabled=!0},.5)},cc.v2(0),function(t){t.stopPropagation(),e.pageView.scrollToPage(e.pageView.getCurrentPageIndex(),0),e.pageView.enabled=!1}),s.default.regSlideEvent(this.hammer,function(t,n){t.stopPropagation(),e.wall.getBoundingBoxToWorld().intersects(e.hammer.getBoundingBoxToWorld())?(n(),g.playCommonEffect_316(d.default.findS_2),e.ani.FX_ImpactTrigger(e.hammer,e.wall,function(){e.pageView.enabled=!0})):e.scheduleOnce(function(){e.pageView.enabled=!0},.5)},cc.v2(0),function(t){t.stopPropagation(),e.pageView.scrollToPage(e.pageView.getCurrentPageIndex(),0),e.pageView.enabled=!1});var t=this.wall.getChildByName("zuozi");t.active=!0,s.default.regSlideEvent(t,function(n,o){n.stopPropagation(),e.ani.stateSys.getAttrById(2)[0].node.getBoundingBoxToWorld().contains(n.getLocation())?(o(),e.findCurSceneItem(),e.dragSys.interactable=!1,g.playCommonEffect_316(d.default.findS_2),e.ani.stateSys.setAttrById(25,{state:1}),t.active=!1):e.scheduleOnce(function(){e.pageView.enabled=!0},.5)},cc.v2(0),function(t){t.stopPropagation(),e.pageView.scrollToPage(e.pageView.getCurrentPageIndex(),0),e.pageView.enabled=!1}),s.default.regSlideEvent(this.goldLeaf,function(t,n){t.stopPropagation(),e.goldLeaf.getBoundingBoxToWorld().intersects(e.monkeyCard.getBoundingBoxToWorld())?(n(),g.playCommonEffect_316(d.default.findS_2),e.pageView.enabled=!0,e.goldLeaf.active=!1,e.monkeyCard.active=!1,e.goldMulberry.active=!0):e.scheduleOnce(function(){e.pageView.enabled=!0},.5)},cc.v2(0),function(t){t.stopPropagation(),e.pageView.scrollToPage(e.pageView.getCurrentPageIndex(),0),e.pageView.enabled=!1}),s.default.regSlideEvent(this.goldMulberry,function(t,n){t.stopPropagation(),e.ani.stateSys.getAttrById(3)[0].node.getBoundingBoxToWorld().intersects(e.goldMulberry.getBoundingBoxToWorld())?(n(),e.findCurSceneItem(),e.ani.isInDialog=!0,e.dragSys.interactable=!1,-1!=e.ani.curAudioId&&cc.audioEngine.stop(e.ani.curAudioId),d.default[14].item_35&&c.default.playEffect(d.default[14].item_35).then(function(t){return e.ani.curAudioId=t}),e.ani.dialog.showDialog(l.default[14].item_35,3).then(function(){e.onAniEnd()}),e.goldMulberry.active=!1):e.scheduleOnce(function(){e.pageView.enabled=!0},.5)},cc.v2(0),function(t){t.stopPropagation(),e.pageView.scrollToPage(e.pageView.getCurrentPageIndex(),0),e.pageView.enabled=!1})},t.prototype.start=function(){var e=this;this.findNums=this.pageView.getPages().map(function(){return 0}),this.startDialogPlayed=this.pageView.getPages().map(function(){return!1}),r.default.loadSoundEffect_fileDir("AudioClip/lv_316/14",function(){e.onScrollEnded()})},t.prototype.findCurSceneItem=function(){var e=this.pageView.getCurrentPageIndex();this.findNums[e]++},t.prototype.gameOver=function(){this.node.getComponent(a.default).onGameSucc()},t.prototype.onScrollBegan=function(){},t.prototype.onScrollEnded=function(){var e=this,t=this.pageView.getCurrentPageIndex();this.startDialogPlayed[t]||(this.startDialogPlayed[t]=!0,this.pageView.enabled=!1,-1!=this.ani.curAudioId&&cc.audioEngine.stop(this.ani.curAudioId),d.default[14]["start_"+(t+1)]&&c.default.playEffect(d.default[14]["start_"+(t+1)]).then(function(t){return e.ani.curAudioId=t}),this.ani.dialog.showDialog(l.default[14]["start_"+(t+1)],t+1).then(function(){e.ani.isInDialog||(e.pageView.enabled=!0)}))},t.prototype.onDragStart=function(){this.pageView.enabled=!1,this.bottomScrollView.enabled=!1,this.guideNode&&(this.guideNode.active=!1)},t.prototype.onDragOff=function(){this.pageView.enabled=!0,this.bottomScrollView.enabled=!0},t.prototype.onDragBackEnd=function(){this.bottomScrollView.enabled=!0},t.prototype.onDragSuccess=function(e){this.findCurSceneItem(),this.pageView.enabled=!1,this.dragSys.interactable=!1,this.ani.stateSys.setAttrById(e,{state:1}),g.playCommonEffect_316(d.default.successS)},t.prototype.onAniEnd=function(){var e=this,t=this.pageView.getCurrentPageIndex();this.findNums[t]>=5?this.ani.playFinAni(t+1,function(){var n=e.pageView.content.children[t].getChildByName("dd").getComponent(cc.Sprite);n.fillRange=0,n.node.active=!0,cc.tween(n).to(.5,{fillRange:1}).delay(.2).call(function(){if(g.playCommonEffect_316(d.default.successS),e.findNums.every(function(e){return e>=5}))e.gameOver();else{e.ani.isInDialog=!1,e.pageView.enabled=!0,e.dragSys.interactable=!0;var t=e.pageView.getCurrentPageIndex(),n=t<e.pageView.getPages().length-1,o=n&&e.findNums[t+1]>=5;n&&!o&&e.pageView.scrollToPage(t+1,e.pageView.pageTurningSpeed)}}).start()}):(this.ani.isInDialog=!1,this.pageView.enabled=!0,this.dragSys.interactable=!0)},i([y(cc.PageView)],t.prototype,"pageView",void 0),i([y(cc.Node)],t.prototype,"handkerchief",void 0),i([y(cc.Node)],t.prototype,"roadSign",void 0),i([y(cc.Node)],t.prototype,"hammer",void 0),i([y(cc.Node)],t.prototype,"wall",void 0),i([y(cc.Node)],t.prototype,"goldLeaf",void 0),i([y(cc.Node)],t.prototype,"monkeyCard",void 0),i([y(cc.Node)],t.prototype,"goldMulberry",void 0),i([y(cc.ScrollView)],t.prototype,"bottomScrollView",void 0),i([y(cc.Node)],t.prototype,"guideNode",void 0),i([g.bgm_316(6),h],t)}(cc.Component);n.default=_,cc._RF.pop()},{"316_14_Ani":"316_14_Ani","316_ActionTool":void 0,"316_AudioConfig":void 0,"316_AudioFunc":void 0,"316_DragIconSys":void 0,"316_TextConfig":void 0,AssetManager:void 0,AudioManager:void 0,LevelCtrl_CommonResult:void 0}]},{},["316_14_Ani","316_14_LevelCtrl"]);